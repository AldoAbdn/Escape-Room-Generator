(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{267:function(e,t,n){e.exports=n(616)},301:function(e,t){},385:function(e,t,n){},389:function(e,t,n){},398:function(e,t,n){},502:function(e,t,n){},616:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"login",function(){return jt}),n.d(a,"logout",function(){return kt});var o={};n.r(o),n.d(o,"addEscapeRoom",function(){return wt}),n.d(o,"removeEscapeRoom",function(){return xt}),n.d(o,"updateEscapeRoom",function(){return Rt}),n.d(o,"updateEscapeRooms",function(){return Dt});var r={};n.r(r),n.d(r,"setSelectedEscapeRoom",function(){return Tt}),n.d(r,"clearSelectedEscapeRoom",function(){return St}),n.d(r,"updateDetails",function(){return It}),n.d(r,"updateAccessibility",function(){return _t}),n.d(r,"addComponent",function(){return Mt}),n.d(r,"removeComponent",function(){return Pt}),n.d(r,"updateComponent",function(){return At}),n.d(r,"addRelationship",function(){return Nt}),n.d(r,"removeRelationship",function(){return Lt});var s={};n.r(s),n.d(s,"showModal",function(){return Ut}),n.d(s,"hideModal",function(){return Ft});var i=n(1),c=n.n(i),l=n(20),p=n.n(l),u=n(649),m=n(126),d=n(40),h=n(28),f=n(255),E=n(266),v=function(e){return function(t){return function(n){console.groupCollapsed(n.type),console.info("dispatching",n);var a=t(n);return console.log("next state",e.getState()),console.groupEnd(n.type),a}}},C=[f.a,Object(E.a)(),v],b=n(256),g=n(22);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(g.a)({},t.user);case"LOGOUT":return{};default:return e}};var y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_ESCAPE_ROOM":return t.push(n.escapeRoom),t.slice();case"REMOVE_ESCAPE_ROOM":return e=t.findIndex(function(e){return e._id===n.escapeRoom._id}),[].concat(Object(d.a)(t.slice(0,e)),Object(d.a)(t.slice(e+1)));case"UPDATE_ESCAPE_ROOM":return e=t.findIndex(function(e){return e._id===n.escapeRoom._id}),t[e]=n.escapeRoom,t.slice();case"UPDATE_ESCAPE_ROOMS":return n.escapeRooms.slice();default:return t}};var j=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a={};switch(n.type){case"SET_SELECTED_ESCAPE_ROOM":return Object(g.a)({},n.escapeRoom);case"CLEAR_SELECTED_ESCAPE_ROOM":return{};case"UPDATE_DETAILS":return(a=Object(g.a)({},t)).details=Object(g.a)({},a.details,n.details),a;case"UPDATE_ACCESSIBILITY":return(a=Object(g.a)({},t)).accessibility=Object(g.a)({},a.accessibility,n.accessibility),a;case"ADD_COMPONENT":return(a=Object(g.a)({},t)).components.push(n.component),void 0!==n.areaId&&(e=a.components.findIndex(function(e){return e._id===n.areaId}),a.components[e].outputComponents.push(n.component._id)),a;case"REMOVE_COMPONENT":return e=(a=Object(g.a)({},t)).components.findIndex(function(e){return e._id===n.componentId}),a.components=[].concat(Object(d.a)(a.components.slice(0,e)),Object(d.a)(a.components.slice(e+1))),a.components.forEach(function(e,t,a){a[t].inputComponents=e.inputComponents.filter(function(e){return e!==n.componentId}),a[t].outputComponents=e.outputComponents.filter(function(e){return e!==n.componentId})}),a;case"UPDATE_COMPONENT":return e=(a=Object(g.a)({},t)).components.findIndex(function(e){return e._id===n.component._id}),a.components[e]=Object(g.a)({},a.components[e],n.component),a;case"ADD_RELATIONSHIP":return(a=Object(g.a)({},t)).components.forEach(function(e,t,a){e._id===n.parentId&&(n.isInput?-1===e.inputComponents.indexOf(n.componentId)&&e.inputComponents.push(n.componentId):-1===e.outputComponents.indexOf(n.componentId)&&e.outputComponents.push(n.componentId))}),a;case"REMOVE_RELATIONSHIP":return(a=Object(g.a)({},t)).components.forEach(function(e,t,a){e._id===n.parentId&&(n.isInput?-1===e.inputComponents.indexOf(n.componentId)&&(e.inputComponents=e.inputComponents.filter(function(e){return e!==n.componentId})):-1===e.outputComponents.indexOf(n.componentId)&&(e.outputComponents=e.outputComponents.filter(function(e){return e!==n.componentId})))}),a;default:return t}},k=n(11),w=function e(t,n,a,o,r,s){var i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];Object(k.a)(this,e),this.header=t,this.body=n,this.confirm={text:a,action:o},this.cancel={text:r,action:s},this.isOpen=i};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w("","","",function(){},"",function(){},!1),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return Object(g.a)({},t.modal,{isOpen:!0});case"HIDE_MODAL":return new w("","","",function(){},"",function(){},!1);default:return e}},R=function(e){return Object(h.combineReducers)({usersService:e.users.reducer,escapeRoomsService:e["escape-rooms"].reducer,routing:b.routerReducer,user:O,escapeRooms:y,escapeRoom:j,modal:x})};var D=n(257),T=n.n(D),S=n(88),I=n.n(S),_=n(127),M=n.n(_),P=(n(385),n(387),n(648)),A=(n(389),n(19)),N=n.n(A),L=n(24),U=n(18),F=n(13),J=n(12),z=n(14),W=n(643),H=n(400),B=n(651),G=n(645),V=n(646),q=n(647),Y=n(259),K=n.n(Y),X=(n(398),n(644)),$=n(589),Q=n(650),Z=n(618),ee=n(619),te=n(620),ne=n(621),ae=n(622),oe=n(623),re=n(624),se=n(625),ie=n(626),ce=n(119),le=n(120),pe=n.n(le),ue=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleToggle=function(e){return function(t){var a=n.state.dropdownOpen;a[e]=!a[e],n.setState({dropdownOpen:a})}},n.handleClick=function(){var e=Object(L.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.newEscapeRoom&&n.props.newEscapeRoom();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleItemClick=function(e,t){return function(a){var o=n.props.escapeRooms[e];switch(t){case"EDIT":n.props.editEscapeRoom&&n.props.editEscapeRoom(o);break;case"JSON":n.saveJSON(o);break;case"PDF":n.savePDF(o);break;case"DELETE":n.props.deleteEscapeRoom&&n.props.showModal(new w("Warning","Are you sure you want to delete "+o.details.name+"?","Yes",function(){n.props.deleteEscapeRoom(o)},"No",function(){}));break;default:return}}},n.mapEscapeRoomToList=function(e,t){return c.a.createElement(Z.a,{key:t},e.details.name,c.a.createElement(ee.a,{style:{display:"inline",position:"absolute",right:"20px"},isOpen:n.state.dropdownOpen[t],toggle:n.handleToggle(t)},c.a.createElement(te.a,{caret:!0}),c.a.createElement(ne.a,{right:!0},c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"EDIT")},"Edit"),c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"JSON")},"Export as JSON"),c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"PDF")},"Export as PDF"),c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"DELETE")},"Delete"))))},n.state={dropdownOpen:[!1,!1]},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(ce.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new pe.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"render",value:function(){var e=this.props.escapeRooms;return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(H.a,{block:!0,onClick:this.handleClick},"NEW"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ie.a,null,e.map(this.mapEscapeRoomToList)))))}}]),t}(i.Component),me=n(46),de=n(627),he=n(628),fe=n(629),Ee=n(630),ve=n(631),Ce=n(632),be=n(633),ge=n(634),Oe=n(635),ye=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).handleSubmit=function(){var t=Object(L.a)(N.a.mark(function t(n){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.props.updateUser&&e.props.updateUser({email:e.state.email,password:e.state.password});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(me.a)({},t.target.id,t.target.value))},e.handleDismiss=function(t){e.setState({errorMessage:""})},e.handleClick=function(){var t=Object(L.a)(N.a.mark(function t(n){var a;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.target.id,t.next="editButton"===t.t0?3:"saveButton"===t.t0?5:19;break;case 3:return e.setState({edit:!0}),t.abrupt("break",19);case 5:if(a=e.props.user,""!==e.state.email){t.next=11;break}return e.setState({errorMessage:"Email Required"}),t.abrupt("return");case 11:a.email=e.state.email;case 12:if(""!==e.state.password&&(a.password=e.state.password),void 0===e.props.updateUser){t.next=18;break}return t.next=16,e.props.updateUser(a);case 16:!0===t.sent?e.setState({edit:!1}):e.setState({errorMessage:"Error, Please Try Again Later"});case 18:return t.abrupt("break",19);case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={edit:!1,errorMessage:"",email:"",password:"",_id:""},e}return Object(z.a)(t,e),Object(U.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user;this.setState({email:e.email})}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(e.user.email!==t.user.email){var n=this.props.user;this.setState({email:n.email,_id:n._id})}}},{key:"render",value:function(){return this.profile=c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(he.a,{height:"50%",src:this.props.user.avatar,alt:"Profile Image"}),c.a.createElement(fe.a,null,c.a.createElement(Ee.a,{className:"text-center"},this.props.user.email),c.a.createElement(H.a,{id:"editButton",block:!0,className:"text-center",onClick:this.handleClick},"Edit Profile")))))),this.editProfile=c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,{onSubmit:this.handleSubmit},c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"email"},"Email"),c.a.createElement(ge.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"password"},"Password"),c.a.createElement(ge.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(H.a,{id:"saveButton",onClick:this.handleClick},"Save"),c.a.createElement(Oe.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))),this.state.edit?this.editProfile:this.profile}}]),t}(i.Component),je=n(636),ke=n(637),we=n(638),xe=n(639),Re=n(640),De=n(2),Te=n.n(De),Se=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).handleClick=function(t){return function(n){switch(t){case"EXIT":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom);break;case"JSON":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom),e.saveJSON(e.props.escapeRoom);break;case"PDF":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom),e.savePDF(e.props.escapeRoom);break;default:return}}},e.handleToggle=function(t){e.setState({dropdownOpen:!e.state.dropdownOpen})},e.handleNav=function(t){return function(n){e.state.activeTab!==t&&e.setState({activeTab:t})}},e.state={activeTab:"design",dropdownOpen:!1},e}return Object(z.a)(t,e),Object(U.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(ce.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new pe.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"componentDidMount",value:function(){void 0===this.props.escapeRoom&&this.props.history.push("/")}},{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,{xs:"6",md:"3",lg:"3"},c.a.createElement(H.a,{block:!0,onClick:this.handleClick("EXIT")},"Save and Exit")),c.a.createElement(se.a,{xs:"6",md:"3",lg:"3"},c.a.createElement(ee.a,{block:!0,isOpen:this.state.dropdownOpen,toggle:this.handleToggle},c.a.createElement(te.a,{caret:!0},"Save and Export"),c.a.createElement(ne.a,{right:!0},c.a.createElement(ae.a,{onClick:this.handleClick("JSON")},"Export as JSON"),c.a.createElement(ae.a,{onClick:this.handleClick("PDF")},"Export as PDF")))),c.a.createElement(se.a,{xs:"6"})),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(je.a,{tabs:!0},c.a.createElement(ke.a,null,c.a.createElement(we.a,{className:Te()({active:"details"===this.state.activeTab}),onClick:this.handleNav("details")},"Details")),c.a.createElement(ke.a,null,c.a.createElement(we.a,{className:Te()({active:"accessibility"===this.state.activeTab}),onClick:this.handleNav("accessibility")},"Accessibility")),c.a.createElement(ke.a,null,c.a.createElement(we.a,{className:Te()({active:"design"===this.state.activeTab}),onClick:this.handleNav("design")},"Design"))))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(xe.a,{activeTab:this.state.activeTab},c.a.createElement(Re.a,{tabId:"details"},c.a.createElement(Ie,{details:this.props.escapeRoom.details,updateDetails:this.props.updateDetails})),c.a.createElement(Re.a,{tabId:"accessibility"},c.a.createElement(ct,{accessibility:this.props.escapeRoom.accessibility,updateAccessibility:this.props.updateAccessibility})),c.a.createElement(Re.a,{tabId:"design"},c.a.createElement(_e,{components:{components:this.props.escapeRoom.components},showModal:this.props.showModal,accessibility:this.props.escapeRoom.accessibility,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,updateComponent:this.props.updateComponent,addRelationship:this.props.addRelationship,removeRelationship:this.props.removeRelationship}))))))}}]),t}(i.Component),Ie=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,n.props.updateDetails(t)},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,null,c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"name"},"Room Name"),c.a.createElement(ge.a,{type:"text",name:"name",id:"name",placeholder:"Room Name",value:this.props.details.name,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"designers"},"Designers"),c.a.createElement(ge.a,{type:"text",name:"designers",id:"designers",placeholder:"Designer(s)",value:this.props.details.designers,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"theme"},"Theme"),c.a.createElement(ge.a,{type:"text",name:"theme",id:"theme",placeholder:"theme",value:this.props.details.theme,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,null,"Players"),c.a.createElement(ge.a,{type:"text",name:"minPlayers",id:"minPlayers",placeholder:"Min",value:this.props.details.minPlayers,onChange:this.handleChange}),c.a.createElement(ge.a,{type:"text",name:"maxPlayers",id:"maxPlayers",placeholder:"Max",value:this.props.details.maxPlayers,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"targetTime"},"Target Time"),c.a.createElement(ge.a,{type:"text",name:"targetTime",id:"targetTime",placeholder:"Time",value:this.props.details.targetTime,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"difficulty"},"Difficulty"),c.a.createElement(ge.a,{type:"range",min:"1",max:"5",name:"difficulty",id:"difficulty",value:this.props.details.difficulty,onChange:this.handleChange})))),c.a.createElement(se.a,null,c.a.createElement(ve.a,null,c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"objective"},"Objective"),c.a.createElement(ge.a,{type:"text",name:"objective",id:"objective",placeholder:"Main Objective",value:this.props.details.objective,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"description"},"Description"),c.a.createElement(ge.a,{type:"textarea",name:"description",id:"description",placeholder:"Description",value:this.props.details.description,onChange:this.handleChange}))))))}}]),t}(i.Component),_e=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleComponentClick=function(e){return function(t){t.stopPropagation(),n.setState({selected:e})}},n.updateComponent=function(e){n.props.updateComponent(e),n.setState({selected:Object(g.a)({},n.state.selected,e)})},n.findComponent=function(e){return n.props.components.components.find(function(t){return t._id===e})},n.state={selected:{}},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,{md:"2"},c.a.createElement(et,null)),c.a.createElement(se.a,{md:"8"},c.a.createElement(rt,{findComponent:this.findComponent,showModal:this.props.showModal,handleComponentClick:this.handleComponentClick,updateComponent:this.props.updateComponent,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship,components:this.props.components.components})),c.a.createElement(se.a,{md:"2"},c.a.createElement(st,{selected:this.state.selected,updateComponent:this.updateComponent}))))}}]),t}(i.Component),Me=n(31),Pe=(n(85),n(261)),Ae=n.n(Pe),Ne=function e(){Object(k.a)(this,e),this._id=Ae()(),this.name="",this.description="",this.output="",this.inputComponents=[],this.outputComponents=[],this.type="Component",this.position={top:0,left:0},this.estimatedCost=""},Le=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).type="Area",e}return Object(z.a)(t,e),t}(Ne),Ue=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).puzzleType="Cipher",e.type="Puzzle",e}return Object(z.a)(t,e),t}(Ne),Fe=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).type="Prop",e}return Object(z.a)(t,e),t}(Ne),Je=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).lockType="Numeric",e.type="Lock",e}return Object(z.a)(t,e),t}(Ne),ze=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).eventType="Sound Effect",e.type="Event",e}return Object(z.a)(t,e),t}(Ne),We=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).startTime="",e.endTime="",e.type="Music",e}return Object(z.a)(t,e),t}(Ne);var He=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(U.a)(t,[{key:"handleComponentDrop",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;if(void 0!==e.id){switch(e.id){case"Puzzle":n=new Ue;break;case"Lock":n=new Je;break;case"Event":n=new ze;break;case"Music":n=new We;break;case"Prop":n=new Fe;break;default:return}this.props.addComponent(n,this.props.component._id)}else(n=e)._id!==this.props.component._id&&this.props.addRelationship(n._id,this.props.component._id,t)}},{key:"render",value:function(){var e;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(c.a.createElement("div",{className:e,key:this.props.component._id},c.a.createElement(de.a,{onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(fe.a,null))))}}]),t}(i.Component),Be=Object(Me.DropTarget)("COMPONENT",{drop:function(e,t,n){if(!t.didDrop()){var a=t.getItem(),o=e.isInput;return n.handleComponentDrop(a,o),{moved:!0}}}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(He),Ge=(n(157),{canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,n){return void 0===e.component?{id:e.id}:Object(g.a)({},e.component)},endDrag:function(e,t,n){t.didDrop()||void 0===e.component&&null===e.component||e.showModal(new w("Warning","Are you sure you want to delete this component?","Yes",n.removeComponent,"No",function(){}))}});var Ve=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).removeComponent=function(){n.props.removeComponent(n.props.component._id)},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.addRef&&this.props.addRef(this.ref)}},{key:"findComponent",value:function(e){return void 0!==this.props.findComponent?this.props.findComponent(e):null}},{key:"render",value:function(){var e,t=this;this.props.isTarget&&(e=c.a.createElement(re.a,null,c.a.createElement(se.a,{xs:"6"},c.a.createElement(Be,{isInput:!0,component:this.props.component,handleComponentClick:this.props.handleComponentClick,showModal:this.props.showModal,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship})),c.a.createElement(se.a,{xs:"6"},c.a.createElement(Be,{isInput:!1,component:this.props.component,handleComponentClick:this.props.handleComponentClick,showModal:this.props.showModal,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship}))));var n={},a="",o="component";return void 0!==this.props.component&&(n.top=this.props.component.position.top,n.left=this.props.component.position.left,n.position="relative",o+=" "+this.props.component.type+" "+this.props.component._id,a=this.props.component._id),this.props.connectDragSource(c.a.createElement("div",{className:o,id:a,ref:function(e){return t.ref=e},style:n,onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement("span",null,this.props.id||a),e,c.a.createElement("span",null,a)))}}]),t}(i.Component),qe=Object(Me.DragSource)("COMPONENT",Ge,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Ve),Ye={drop:function(e,t,n){if(!t.didDrop()&&n&&void 0!==typeof e.component){var a=t.getItem();if(void 0===a.position){var o=t.getClientOffset(),r=p.a.findDOMNode(n).getBoundingClientRect();a.position={top:o.y-r.y-.2*r.height,left:o.x-r.x-.1*r.width}}else{var s=t.getDifferenceFromInitialOffset();a.position.left=Math.round(a.position.left+s.x),a.position.top=Math.round(a.position.top+s.y)}return n.handleComponentDrop(a),{moved:!0}}}};var Ke=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).state={render:!0},e}return Object(z.a)(t,e),Object(U.a)(t,[{key:"handleComponentDrop",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=null;if(void 0!==e.id&&void 0===e._id){switch(e.id){case"Puzzle":(t=new Ue).position=e.position;break;case"Prop":(t=new Fe).position=e.position;break;case"Lock":(t=new Je).position=e.position;break;case"Event":(t=new ze).position=e.position;break;case"Music":(t=new We).position=e.position;break;default:return}this.props.addComponent(t,this.props.component._id)}else t=e,this.props.updateComponent(t)}},{key:"render",value:function(){var e,t=this;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(c.a.createElement("div",{className:e,key:this.props.component._id},c.a.createElement(de.a,{className:this.props.component.type,onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(fe.a,null,c.a.createElement(Ee.a,null,this.props.component.type),this.props.outputComponents.map(function(e,n){var a;return a=t.props.findComponent(e._id),c.a.createElement(qe,{addRef:t.props.addRef,key:n,renderTrigger:JSON.stringify(t.props.outputComponents),isTarget:!0,handleComponentClick:t.props.handleComponentClick,component:a,findComponent:t.props.findComponent,id:a.type,showModal:t.props.showModal,addComponent:t.props.addComponent,removeComponent:t.props.removeComponent,addRelationship:t.props.addRelationship})})))))}}]),t}(i.Component),Xe=Object(Me.DropTarget)("COMPONENT",Ye,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver(),canDrop:t.canDrop(),itemType:t.getItemType()}})(Ke),$e={canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,n){return void 0!==e.id?{id:e.id}:{component:e.component}},endDrag:function(e,t,n){t.didDrop()||null==n||e.showModal(new w("Warning","Are you sure you want to delete this component?","Yes",n.removeComponent,"No",function(){}))}};var Qe=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).removeComponent=function(){e.props.removeComponent(e.props.component._id)},e.addComponent=function(t,n){console.log(e.props),console.log(t),console.log(n),e.props.addComponent(t,e.props.component._id),e.props.addRelationship(t._id,n)},e.state={render:!0},e}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e;return console.log("area-render"),this.props.isTarget&&(e=c.a.createElement(Xe,{addRef:this.props.addRef,findComponent:this.props.findComponent,handleComponentClick:this.props.handleComponentClick,outputComponents:this.props.outputComponents,component:this.props.component,showModal:this.props.showModal,addComponent:this.addComponent,updateComponent:this.props.updateComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship})),this.props.connectDragSource(c.a.createElement("div",{onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(de.a,{className:"component"},this.props.id,e)))}}]),t}(i.Component),Ze=Object(Me.DragSource)("AREA",$e,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Qe),et=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleComponentClick=function(e){},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h3",null,"Pallet"))),c.a.createElement(re.a,null,c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(Ze,{id:"Area",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Puzzle",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Prop",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Lock",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Event",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Music",handleComponentClick:this.handleComponentClick}))))}}]),t}(i.Component),tt=(n(502),n(173)),nt=n.n(tt),at={drop:function(e,t,n){var a=t.getItem();void 0!==a.component&&null!==a.component||n.props.addComponent(new Le)}};var ot=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).mapAreas=function(t,n){if("Area"===t.type){console.log(t.outputComponents);var a=e.props.components.filter(function(e){return t.outputComponents.includes(e._id)});return console.log(a),c.a.createElement(se.a,{key:t._id,xs:"12"},c.a.createElement(Ze,{addRef:e.addRef,isTarget:!0,findComponent:e.props.findComponent,handleComponentClick:e.props.handleComponentClick,component:t,outputComponents:a,showModal:e.props.showModal,addComponent:e.props.addComponent,removeComponent:e.props.removeComponent,updateComponent:e.props.updateComponent,addRelationship:e.props.addRelationship}))}},e.addRef=function(t){console.log(t),void 0!=t&&(console.log(e.state.refs.push(t)),e.setState({refs:[].concat(Object(d.a)(e.state.refs),[t])},function(t){console.log(e.state)}))},e.update=function(){return e.forceUpdate()},e.state={refs:[]},e}return Object(z.a)(t,e),Object(U.a)(t,[{key:"componentDidUpdate",value:function(e,t){JSON.stringify(this.props.components)!==JSON.stringify(e.components)?this.setState({render:!0}):this.state.refs.length!=t.refs.length&&window.requestAnimationFrame(function(){})}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.update,!0),window.addEventListener("resize",this.update)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.update),window.removeEventListener("resize",this.update)}},{key:"render",value:function(){var e,t=this;this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop");var n=[];return this.props.components.forEach(function(e,a,o){if(console.log(t.props.components),void 0!=e&&void 0!=e.inputComponents&&"Area"!=e.type){var r=e.inputComponents,s=e.outputComponents;r.forEach(function(a,o,r){a=t.props.findComponent(a),n.push(c.a.createElement(nt.a,{key:o,from:e._id,to:a._id,borderColor:"#007bff"}))}),s.forEach(function(a,o,r){a=t.props.findComponent(a),n.push(c.a.createElement(nt.a,{key:o,from:e._id,to:a._id,borderColor:"#28a745"}))})}}),this.props.connectDropTarget(c.a.createElement("div",{className:e},n,c.a.createElement(oe.a,{className:"component-arranger"},c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h3",null,"Components"))),c.a.createElement(re.a,null,this.props.components.map(this.mapAreas)))))}}]),t}(i.Component),rt=Object(Me.DropTarget)("AREA",at,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(ot),st=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,t._id=n.props.selected._id,n.props.updateComponent(t)},n.mapDetailToInput=function(e,t){return"string"===typeof n.props.selected[e]&&"_id"!==e&&"type"!==e?c.a.createElement(re.a,{key:t},c.a.createElement(se.a,null,c.a.createElement(be.a,{for:e},e),c.a.createElement(ge.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange}))):"output"===e?("Lock"===n.props.selected.type?a=c.a.createElement(Ct,{lockType:n.props.selected.lockType,handleOutputChange:n.handleOutputChange}):"Puzzle"===n.props.selected.type&&(a=c.a.createElement(bt,{puzzleType:n.props.selected.puzzleType,handleOutputChange:n.handleOutputChange})),c.a.createElement(re.a,{key:t},c.a.createElement(se.a,null,c.a.createElement(be.a,{for:e},e),c.a.createElement(ge.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange}),c.a.createElement("button",{onClick:n.generateFromInputs},"Generate From Inputs"),a))):"lockType"===e?c.a.createElement(re.a,{key:t},c.a.createElement(se.a,null,c.a.createElement(be.a,{for:e},e),c.a.createElement(ge.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange},c.a.createElement("option",null,"Numeric"),c.a.createElement("option",null,"Word"),c.a.createElement("option",null,"Directional"),c.a.createElement("option",null,"Contactless"),c.a.createElement("option",null,"Key")))):"eventType"===e?c.a.createElement(re.a,{key:t},c.a.createElement(se.a,null,c.a.createElement(be.a,{for:e},e),c.a.createElement(ge.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange},c.a.createElement("option",null,"Sound Effect"),c.a.createElement("option",null,"New Area"),c.a.createElement("option",null,"Objective Complete"),c.a.createElement("option",null,"Custom")))):"puzzleType"===e?c.a.createElement(re.a,{key:t},c.a.createElement(se.a,null,c.a.createElement(be.a,{for:e},e),c.a.createElement(ge.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange},c.a.createElement("option",null,"Cipher"),c.a.createElement("option",null,"Word"),c.a.createElement("option",null,"Colour"),c.a.createElement("option",null,"Hidden Word"),c.a.createElement("option",null,"Hidden Object"),c.a.createElement("option",null,"Riddle")))):void 0;var a},n.handleOnClick=function(e,t){return function(a){var o=Object(g.a)({},n.props.selected),r={};r._id=o._id,t?r.inputComponents=o.inputComponents.filter(function(t){return t!==e}):r.outputComponents=o.outputComponents.filter(function(t){return t!==e}),n.props.updateComponent(r)}},n.mapIDToP=function(e,t,a){return c.a.createElement(Z.a,{key:t},e,c.a.createElement(H.a,{onClick:n.handleOnClick(e,a),color:"danger",style:{display:"inline",position:"absolute",right:"2px",top:"0.3rem"}},"X"))},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e,t,n,a,o,r,s=this,i=this.props.selected;return void 0===i&&null===i||(t=Object.keys(i).map(this.mapDetailToInput),e=this.props.selected.type,"Area"!==i.type&&void 0!==i.inputComponents&&void 0!==i.outputComponents&&(i.inputComponents.length>0||i.outputComponents.length>0)&&(n=i.inputComponents.map(function(e,t){return s.mapIDToP(e,t,!0)}),a=i.outputComponents.map(function(e,t){return s.mapIDToP(e,t,!1)}),o=c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h4",null,"Inputs"),c.a.createElement(ie.a,null,n))),r=c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h4",null,"Outputs"),c.a.createElement(ie.a,null,a))))),c.a.createElement(oe.a,{style:{"margin-bottom":"5vh"}},c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h3",null,"Details"),c.a.createElement("h4",null,e))),t,o,r)}}]),t}(i.Component),it=n(641),ct=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,n.props.updateAccessibility(t)},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h1",{className:"text-center"},"Visual Accessibility"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h2",null,"Colour Blindness"),c.a.createElement("p",null,"Please select the types of colour blindness your design must take into account")),c.a.createElement(se.a,null,c.a.createElement("h2",null,"Other"),c.a.createElement("p",null,"These are options to indicate restrictions on the design related to visual impairments such as blindness"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(it.a,{type:"checkbox",name:"protanomaly",id:"protanomaly",label:"Protanomaly",checked:this.props.accessibility.protanomaly,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"protanopia",id:"protanopia",label:"Protanopia",checked:this.props.accessibility.protanopia,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"deuteranomaly",id:"deuteranomaly",label:"Deuteranomaly",checked:this.props.accessibility.deuteranomaly,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"deuteranopia",id:"deuteranopia",label:"Deuteranopia",checked:this.props.accessibility.deuteranopia,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"tritanomaly",id:"tritanomaly",label:"Tritanomaly",checked:this.props.accessibility.tritanomaly,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"tritanopia",id:"tritanopia",label:"Tritanopia",checked:this.props.accessibility.tritanopia,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"coneMonochromacy",id:"coneMonochromacy",label:"Cone Monochromacy",checked:this.props.accessibility.coneMonochromacy,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"rodMonochromacy",id:"rodMonochromacy",label:"Rod Monochromacy",checked:this.props.accessibility.rodMonochromacy,onChange:this.handleChange}))),c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(it.a,{type:"checkbox",name:"largeFonts",id:"largeFonts",label:"Large Fonts",value:this.props.accessibility.largeFonts,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"highContrast",id:"highContrast",label:"High Contrast",value:this.props.accessibility.highContrast,onChange:this.handleChange}))))),c.a.createElement(se.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h1",{className:"text-center"},"Physical Accessibility"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("p",null,"These options are to indicate restrictions on the design related to physical impairments for example wheelchair accessibility and motor functions"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(it.a,{type:"checkbox",name:"Wheelchair Accessible",id:"heelchairAccessible",label:"wheelchairAccessible",value:this.props.accessibility.wheelchairAccessible,onChange:this.handleChange}),c.a.createElement(it.a,{type:"checkbox",name:"motorAccessible",id:"motorAccessible",label:"Accessible for players with motor function issues",value:this.props.accessibility.motorAccessible,onChange:this.handleChange})))))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("p",null,"These options are designed to indicate the attempted accessibility of your design. These options will flag puzzles in your design that do not meet these restrictions"))))}}]),t}(i.Component),lt=n(642),pt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleSubmit=function(){var e=Object(L.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.props.authenticateCredentials){e.next=6;break}return e.next=4,n.props.authenticateCredentials({strategy:"local",email:n.state.email,password:n.state.password});case 4:a=e.sent,n.setState({errorMessage:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(me.a)({},e.target.id,e.target.value))},n.handleDismiss=function(e){n.setState({errorMessage:""})},n.state={email:"",password:"",errorMessage:""},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"full-container verticaly-center-content"},c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,{onSubmit:this.handleSubmit},c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"email"},"Email"),c.a.createElement(ge.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"password"},"Password"),c.a.createElement(ge.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(H.a,null,"Login"),c.a.createElement(lt.a,null,"Don't have an account? Sign Up ",c.a.createElement(W.a,{to:"/signup"},"Here")),c.a.createElement(Oe.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(i.Component),ut=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleSubmit=function(){var e=Object(L.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.props.signUp){e.next=6;break}return e.next=4,n.props.signUp({email:n.state.email,password:n.state.password});case 4:a=e.sent,n.setState({errorMessage:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(me.a)({},e.target.id,e.target.value))},n.handleDismiss=function(e){n.setState({errorMessage:""})},n.state={email:"",password:"",errorMessage:""},n}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"full-container verticaly-center-content"},c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,{onSubmit:this.handleSubmit},c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"email"},"Email"),c.a.createElement(ge.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(Ce.a,null,c.a.createElement(be.a,{for:"password"},"Password"),c.a.createElement(ge.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(H.a,null,"Sign Up"),c.a.createElement(lt.a,null,"Have an account? Log In ",c.a.createElement(W.a,{to:"/login"},"Here")),c.a.createElement(Oe.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(i.Component),mt=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("p",null,"This is my honours project for BsC(Hons) Computing: Application Software Development at Robert Gordon University This is a web app for designing an escape room using drag and drop components")),c.a.createElement(se.a,null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"https://github.com/AldoAbdn/Escape-Room-Generator/"},"Github Repo")),c.a.createElement("li",null,c.a.createElement("a",{href:"https://ninjamock.com/s/KCMW2Tx"},"Wireframe"))))))}}]),t}(i.Component),dt=n(262),ht=n.n(dt),ft=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(ht.a,{width:"85%",height:"100%",api_key:Object({NODE_ENV:"production",PUBLIC_URL:""}).youtubeAPIKey,playlist_id:"PLWRRwFEmEuDKX5sobzWeb50xD14cpfkk3",scrolling:!0})}}]),t}(i.Component),Et=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return window.localStorage.getItem("feathers-jwt")?void 0!==this.props.condition?this.props.condition?c.a.createElement($.a,this.props):c.a.createElement(Q.a,{to:this.props.redirect,state:this.props.location}):c.a.createElement($.a,this.props):c.a.createElement(Q.a,{to:"/login",state:this.props.location})}}]),t}(i.Component),vt=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement("h1",null,"404 Page Not Found")))}}]),t}(i.Component),Ct=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),t}(i.Component),bt=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),t}(i.Component),gt=function e(t){Object(k.a)(this,e),this.userId=t,this.details={name:"Unnamed",designers:"",theme:"",minPlayers:"",maxPlayers:"",targetTime:"",difficulty:"3",objective:"",description:""},this.accessibility={protanomaly:!1,protanopia:!1,deuteranomaly:!1,deuteranopia:!1,tritanomaly:!1,tritanopia:!1,coneMonochromacy:!1,rodMonochromacy:!1,largeFonts:!1,highContrast:!1},this.components=[new Le]},Ot=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).authenticateCredentials=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate(n);case 3:return t.next=5,e.props.services.users.find({query:{email:n.email}});case 5:(a=t.sent).action.type.includes("FULFILLED")&&a.value.total>0?((o=a.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(o),e.props.history.push("/dashboard")):e.setState({}),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),e.signUp=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.services.users.create(n);case 3:return t.next=5,e.props.feathersClient.authenticate({strategy:"local",email:n.email,password:n.password});case 5:return t.next=7,e.props.services.users.find({query:{email:n.email}});case 7:(a=t.sent).action.type.includes("FULFILLED")&&((o=a.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(o),e.props.history.push("/dashboard")),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}(),e.editEscapeRoom=function(t){e.props.redux.actions.escapeRoom.setSelectedEscapeRoom(t),e.props.history.push("/designer")},e.newEscapeRoom=Object(L.a)(N.a.mark(function t(){var n,a,o,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.redux.state.user._id,a=new gt(n),t.next=4,e.props.services["escape-rooms"].create(a);case 4:(o=t.sent).action.type.includes("FULFILLED")&&null!==(r=o.value)&&(e.props.redux.actions.escapeRooms.addEscapeRoom(r),e.props.redux.actions.escapeRoom.setSelectedEscapeRoom(r),e.props.history.push("/designer"));case 6:case"end":return t.stop()}},t,this)})),e.deleteEscapeRoom=function(t){e.props.services["escape-rooms"].remove(t._id),e.props.redux.actions.escapeRooms.removeEscapeRoom(t)},e.updateUser=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.props.redux.state.user,t.next=4,e.props.services.users.patch(a._id,n);case 4:return o=t.sent,e.props.redux.actions.user.login(o.value),e.props.history.push("/profile"),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}(),e.saveEscapeRoom=function(){var t=Object(L.a)(N.a.mark(function t(n){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n._id){t.next=5;break}return t.next=3,e.props.services["escape-rooms"].update(n._id,n);case 3:return t.next=5,e.props.redux.actions.escapeRooms.updateEscapeRoom(n);case 5:e.props.history.push("/");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={profile:null},e}return Object(z.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this,t=this.props.redux.state.escapeRooms,n=this.props.redux.state.escapeRoom,a=this.props.redux.actions.escapeRoom,o=this.props.redux.state.user,r=this.props.redux.actions.modal.showModal;return c.a.createElement(X.a,null,c.a.createElement(Q.a,{exact:!0,from:"/",to:"dashboard"}),c.a.createElement(Et,{path:"/dashboard",render:function(n){return c.a.createElement(ue,{escapeRooms:t,showModal:r,editEscapeRoom:e.editEscapeRoom,newEscapeRoom:e.newEscapeRoom,deleteEscapeRoom:e.deleteEscapeRoom})}}),c.a.createElement(Et,{path:"/profile",condition:Object.keys(o).length>0&&void 0!==o,redirect:"/login",render:function(t){return c.a.createElement(ye,{user:o,updateUser:e.updateUser})}}),c.a.createElement(Et,{path:"/designer",condition:Object.keys(n).length>0&&void 0!==n,redirect:"/",render:function(t){return c.a.createElement(Se,{showModal:r,escapeRoom:n,saveEscapeRoom:e.saveEscapeRoom,updateDetails:a.updateDetails,updateAccessibility:a.updateAccessibility,addComponent:a.addComponent,removeComponent:a.removeComponent,updateComponent:a.updateComponent,addRelationship:a.addRelationship,removeRelationship:a.removeRelationship})}}),c.a.createElement($.a,{path:"/login",render:function(t){return c.a.createElement(pt,{authenticateCredentials:e.authenticateCredentials})}}),c.a.createElement($.a,{path:"/signup",render:function(t){return c.a.createElement(ut,{signUp:e.signUp})}}),c.a.createElement($.a,{path:"/about",component:mt}),c.a.createElement($.a,{path:"/tutorials",component:ft}),c.a.createElement($.a,{component:vt}))}}]),t}(i.Component),yt=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).authenticate=Object(L.a)(N.a.mark(function t(){var n,a;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authenticateJWT();case 2:return n=t.sent,t.next=5,e.populateUserFromJWT(n);case 5:if(null==(a=t.sent)){t.next=9;break}return t.next=9,e.populateEscapeRooms(a._id);case 9:case"end":return t.stop()}},t,this)})),e.authenticateJWT=Object(L.a)(N.a.mark(function t(){var n;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate();case 3:return n=t.sent,t.abrupt("return",n.accessToken);case 7:t.prev=7,t.t0=t.catch(0),e.logout();case 10:case"end":return t.stop()}},t,this,[[0,7]])})),e.populateUserFromJWT=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n&&null!==n&&""!==n){t.next=3;break}return e.setProfile(!1),t.abrupt("return",null);case 3:return t.next=5,e.props.feathersClient.passport.verifyJWT(n);case 5:return a=t.sent,t.next=8,e.props.services.users.get(a.userId);case 8:if(a=t.sent,void 0!==(o=a.value).email&&""!==o.email){t.next=13;break}return e.setProfile(!1),t.abrupt("return",null);case 13:return o.token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(o),e.setProfile(!0),t.abrupt("return",o);case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.populateEscapeRooms=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===n||void 0===n){t.next=5;break}return t.next=3,e.props.services["escape-rooms"].find({query:{userId:n}});case 3:(a=t.sent).action.type.includes("FULFILLED")&&(null!==(o=a.value.data)&&void 0!==o&&e.props.redux.actions.escapeRooms.updateEscapeRooms(o),e.setState({loading:!1}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.logout=function(){window.localStorage.removeItem("feathers-jwt"),e.setState({profile:null}),e.props.redux.actions.user.logout(),e.props.history.push("/")},e.state={profile:null,tooltipOpen:!1},e}return Object(z.a)(t,e),Object(U.a)(t,[{key:"componentDidUpdate",value:function(e){e.redux.state.user.email!==this.props.redux.state.user.email&&(this.populateEscapeRooms(this.props.redux.state.user._id),void 0!==this.props.redux.state.user.email?this.setProfile(!0):this.setProfile(!1))}},{key:"componentDidMount",value:function(){window.localStorage.getItem("feathers-jwt")&&void 0!==this.props.redux.state.user.email?this.setProfile(!0):window.localStorage.getItem("feathers-jwt")&&void 0===this.props.redux.state.user.email&&this.authenticate()}},{key:"setProfile",value:function(e){var t;t=e?c.a.createElement("div",{className:"profile"},c.a.createElement(W.a,{to:"/profile"},"Profile"),c.a.createElement(H.a,{onClick:this.logout},"Logout")):null,this.setState({profile:t})}},{key:"render",value:function(){var e=this.state.loading||this.props.redux.state.usersService.isLoading||this.props.redux.state.escapeRoomsService.isLoading,t=this.props.redux.state.modal,n=this.props.redux.actions.modal.hideModal;return c.a.createElement("div",null,c.a.createElement(K.a,{className:"loading-overlay",active:e,spinner:!0},c.a.createElement("header",null,c.a.createElement("h1",{className:"title"},c.a.createElement(W.a,{to:"/"},"Escape Room Generator")),this.state.profile),c.a.createElement("main",null,c.a.createElement(Ot,{history:this.props.history,feathersClient:this.props.feathersClient,redux:this.props.redux,services:this.props.services})),c.a.createElement("footer",null,c.a.createElement(W.a,{to:"/about"},"About"),c.a.createElement(W.a,{to:"/tutorials"},"Tutorials"))),c.a.createElement(B.a,{isOpen:t.isOpen},c.a.createElement(G.a,null,t.header),c.a.createElement(V.a,null,t.body),c.a.createElement(q.a,null,c.a.createElement(H.a,{color:"success",onClick:function(){t.confirm.action(),n()}},t.confirm.text),c.a.createElement(H.a,{color:"danger",onClick:function(){t.cancel.action(),n()}},t.cancel.text))))}}]),t}(i.Component);function jt(e){return{type:"LOGIN",user:e}}function kt(){return{type:"LOGOUT"}}function wt(e){return{type:"ADD_ESCAPE_ROOM",escapeRoom:e}}function xt(e){return{type:"REMOVE_ESCAPE_ROOM",escapeRoom:e}}function Rt(e){return{type:"UPDATE_ESCAPE_ROOM",escapeRoom:e}}function Dt(e){return{type:"UPDATE_ESCAPE_ROOMS",escapeRooms:e}}function Tt(e){return{type:"SET_SELECTED_ESCAPE_ROOM",escapeRoom:e}}function St(e){return{type:"CLEAR_SELECTED_ESCAPE_ROOM",escapeRoom:e}}function It(e){return{type:"UPDATE_DETAILS",details:e}}function _t(e){return{type:"UPDATE_ACCESSIBILITY",accessibility:e}}function Mt(e,t){return{type:"ADD_COMPONENT",component:e,areaId:t}}function Pt(e){return{type:"REMOVE_COMPONENT",componentId:e}}function At(e){return{type:"UPDATE_COMPONENT",component:e}}function Nt(e,t,n){return{type:"ADD_RELATIONSHIP",componentId:e,parentId:t,isInput:n}}function Lt(e,t,n){return{type:"REMOVE_RELATIONSHIP",componentId:e,parentId:t,isInput:n}}function Ut(e){return{type:"SHOW_MODAL",modal:e}}function Ft(){return{type:"HIDE_MODAL"}}var Jt=Object(m.b)(function(e){return{redux:e}},function(e){return{user:Object(h.bindActionCreators)(a,e),escapeRooms:Object(h.bindActionCreators)(o,e),escapeRoom:Object(h.bindActionCreators)(r,e),modal:Object(h.bindActionCreators)(s,e)}},function(e,t,n){return Object(g.a)({},n,{redux:{state:e.redux,actions:t}})})(yt),zt=Object(P.a)(Jt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wt=n(264),Ht=n.n(Wt),Bt=n(265),Gt=n.n(Bt),Vt=n(176),qt=n.n(Vt);n.d(t,"feathersClient",function(){return Xt});var Yt={backends:[{backend:Ht.a},{backend:Gt()({enableMouseEvents:!0}),preview:!0,transition:Vt.TouchTransition}]},Kt=qt()(Yt),Xt=I()().configure(I.a.socketio(T()())).configure(I.a.hooks()).configure(I.a.authentication({storage:window.localStorage})),$t=M()(Xt,["users","escape-rooms"]),Qt=function(e,t){var n=window.devToolsExtension?window.devToolsExtension()(h.createStore):h.createStore;return h.applyMiddleware.apply(void 0,Object(d.a)(C))(n)(R(e),t)}($t,{user:{},escapeRooms:[],escapeRoom:{}}),Zt=Object(_.bindWithDispatch)(Qt.dispatch,$t),en=c.a.createElement(Me.DragDropContextProvider,{backend:Kt},c.a.createElement(m.a,{store:Qt},c.a.createElement(u.a,null,c.a.createElement(zt,{feathersClient:Xt,services:Zt,getServicesStatus:_.getServicesStatus}))));p.a.render(en,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,n){}},[[267,2,1]]]);
//# sourceMappingURL=main.b41ffc57.chunk.js.map