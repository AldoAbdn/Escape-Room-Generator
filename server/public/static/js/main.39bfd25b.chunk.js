(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{264:function(e,t,a){e.exports=a(601)},298:function(e,t){},382:function(e,t,a){},386:function(e,t,a){},395:function(e,t,a){},498:function(e,t,a){},601:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"login",function(){return ht}),a.d(n,"logout",function(){return dt});var r={};a.r(r),a.d(r,"addEscapeRoom",function(){return ft}),a.d(r,"removeEscapeRoom",function(){return Et}),a.d(r,"updateEscapeRoom",function(){return vt}),a.d(r,"updateEscapeRooms",function(){return gt});var o={};a.r(o),a.d(o,"setEscapeRoom",function(){return bt}),a.d(o,"clearEscapeRoom",function(){return Ct});var s=a(1),i=a.n(s),c=a(20),l=a.n(c),p=a(631),u=a(125),m=a(28),h=a(31),d=a(251),f=a(263),E=function(e){return function(t){return function(a){console.groupCollapsed(a.type),console.info("dispatching",a);var n=t(a);return console.log("next state",e.getState()),console.groupEnd(a.type),n}}},v=[d.a,Object(f.a)(),E],g=a(252),b=a(24);var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(b.a)({},t.user);case"LOGOUT":return{}}return e};var O=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_ESCAPE_ROOM":return t.push(a.escapeRoom),t.slice();case"REMOVE_ESCAPE_ROOM":return e=t.indexOf(a.escapeRoom),t.pop(e),t.slice();case"UPDATE_ESCAPE_ROOM":return e=t.findIndex(function(e){return e._id===a.escapeRoom._id}),t[e]=a.escapeRoom,t.slice();case"UPDATE_ESCAPE_ROOMS":return a.escapeRooms.slice();default:return t}};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ESCAPE_ROOM":return Object(b.a)({},t.escapeRoom);case"CLEAR_ESCAPE_ROOM":return{};default:return e}},j=function(e){return Object(h.combineReducers)({usersService:e.users.reducer,escapeRoomsService:e["escape-rooms"].reducer,routing:g.routerReducer,user:C,escapeRooms:O,escapeRoom:y})};var k=a(253),D=a.n(k),w=a(87),x=a.n(w),R=a(126),S=a.n(R),T=(a(382),a(384),a(629)),P=(a(386),a(19)),N=a.n(P),A=a(23),_=a(11),M=a(17),I=a(15),L=a(14),U=a(16),F=a(627),J=a(257),W=a(255),z=a.n(W),B=(a(395),a(628)),G=a(260),H=a(630),q=a(603),V=a(604),X=a(605),K=a(606),$=a(607),Q=a(608),Y=a(609),Z=a(610),ee=a(611),te=a(117),ae=a(118),ne=a.n(ae),re=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(I.a)(this,Object(L.a)(t).call(this,e))).handleToggle=function(e){return function(t){var n=a.state.dropdownOpen;n[e]=!n[e],a.setState({dropdownOpen:n})}},a.handleClick=function(){var e=Object(A.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.newEscapeRoom&&a.props.newEscapeRoom();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleItemClick=function(e,t){return function(n){var r=a.props.escapeRooms[e];switch(t){case"EDIT":a.props.editEscapeRoom&&a.props.editEscapeRoom(r);break;case"JSON":a.saveJSON(r);break;case"PDF":a.savePDF(r);break;case"DELETE":a.props.deleteEscapeRoom&&a.props.deleteEscapeRoom(r);break;default:return}}},a.mapEscapeRoomToList=function(e,t){return i.a.createElement(q.a,{key:t},e.details.name,i.a.createElement(V.a,{style:{display:"inline",position:"absolute",right:"20px"},isOpen:a.state.dropdownOpen[t],toggle:a.handleToggle(t)},i.a.createElement(X.a,{caret:!0}),i.a.createElement(K.a,{right:!0},i.a.createElement($.a,{onClick:a.handleItemClick(t,"EDIT")},"Edit"),i.a.createElement($.a,{onClick:a.handleItemClick(t,"JSON")},"Export as JSON"),i.a.createElement($.a,{onClick:a.handleItemClick(t,"PDF")},"Export as PDF"),i.a.createElement($.a,{onClick:a.handleItemClick(t,"DELETE")},"Delete"))))},a.state={dropdownOpen:[!1,!1]},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(te.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new ne.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"render",value:function(){var e=this.props.escapeRooms;return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(J.a,{block:!0,onClick:this.handleClick},"NEW"))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(ee.a,null,e.map(this.mapEscapeRoomToList)))))}}]),t}(s.Component),oe=a(38),se=a(612),ie=a(613),ce=a(614),le=a(615),pe=a(616),ue=a(617),me=a(618),he=a(619),de=a(632),fe=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).handleSubmit=function(){var t=Object(A.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.props.updateUser&&e.props.updateUser({email:e.state.email,password:e.state.password});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(oe.a)({},t.target.id,t.target.value))},e.handleDismiss=function(t){e.setState({errorMessage:""})},e.handleClick=function(){var t=Object(A.a)(N.a.mark(function t(a){var n;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a.target.id,t.next="editButton"===t.t0?3:"saveButton"===t.t0?5:19;break;case 3:return e.setState({edit:!0}),t.abrupt("break",19);case 5:if(n=e.props.user,""!==e.state.email){t.next=11;break}return e.setState({errorMessage:"Email Required"}),t.abrupt("return");case 11:n.email=e.state.email;case 12:if(""!==e.state.password&&(n.password=e.state.password),void 0===e.props.updateUser){t.next=18;break}return t.next=16,e.props.updateUser(n);case 16:!0===t.sent?e.setState({edit:!1}):e.setState({errorMessage:"Error, Please Try Again Later"});case 18:return t.abrupt("break",19);case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={edit:!1,errorMessage:"",email:"",password:"",_id:""},e}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user;this.setState({email:e.email})}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(e.user.email!==t.user.email){var a=this.props.user;this.setState({email:a.email,_id:a._id})}}},{key:"render",value:function(){return this.profile=i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(se.a,null,i.a.createElement(ie.a,{height:"50%",src:this.props.user.avatar,alt:"Profile Image"}),i.a.createElement(ce.a,null,i.a.createElement(le.a,{className:"text-center"},this.props.user.email),i.a.createElement(J.a,{id:"editButton",block:!0,className:"text-center",onClick:this.handleClick},"Edit Profile")))))),this.editProfile=i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(pe.a,{onSubmit:this.handleSubmit},i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"email"},"Email"),i.a.createElement(he.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"password"},"Password"),i.a.createElement(he.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),i.a.createElement(J.a,{id:"saveButton",onClick:this.handleClick},"Save"),i.a.createElement(de.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))),this.state.edit?this.editProfile:this.profile}}]),t}(s.Component),Ee=a(620),ve=a(621),ge=a(622),be=a(623),Ce=a(624),Oe=a(2),ye=a.n(Oe),je=a(258),ke=a.n(je),De=function e(){Object(_.a)(this,e),this._id=ke()(),this.name="",this.description="",this.inputComponents=[],this.outputComponents=[],this.type="Component",this.position={top:0,left:0}},we=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).type="Area",e}return Object(U.a)(t,e),t}(De),xe=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).puzzleType="",e.type="Puzzle",e}return Object(U.a)(t,e),t}(De),Re=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).type="Prop",e}return Object(U.a)(t,e),t}(De),Se=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).lockType="",e.type="Lock",e}return Object(U.a)(t,e),t}(De),Te=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).eventType="",e.type="Event",e}return Object(U.a)(t,e),t}(De),Pe=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).startTime="",e.endTime="",e.type="Music",e}return Object(U.a)(t,e),t}(De),Ne=function e(t){Object(_.a)(this,e),this.userId=t,this.details={name:"Unnamed",designers:"",theme:"",minPlayers:"",maxPlayers:"",targetTime:"",difficulty:"3",objective:"",description:""},this.accessibility={protanomaly:!1,protanopia:!1,deuteranomaly:!1,deuteranopia:!1,tritanomaly:!1,tritanopia:!1,coneMonochromacy:!1,rodMonochromacy:!1,largeFonts:!1,highContrast:!1},this.components=[new we]},Ae=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).handleClick=function(t){return function(a){switch(t){case"EXIT":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.state.escapeRoom);break;case"JSON":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.state.escapeRoom),e.saveJSON(e.state.escapeRoom);break;case"PDF":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.state.escapeRoom),e.savePDF(e.state.escapeRoom);break;default:return}}},e.handleChange=function(t){e.setState(Object(oe.a)({},t.target.id,t.target.value))},e.handleDetailsChange=function(t){var a=Object(b.a)({},e.state.escapeRoom),n=Object(b.a)({},a.details,t);a.details=n,e.setState({escapeRoom:a})},e.handleAccessibilityChange=function(t){var a=Object(b.a)({},e.state.escapeRoom),n=Object(b.a)({},e.state.escapeRoom.accessibility,t);a.accessibility=n,e.setState({escapeRoom:a})},e.handleDesignChange=function(t){var a=Object(b.a)({},e.state.escapeRoom),n=Object(m.a)(t);a.components=n,e.setState({escapeRoom:a})},e.handleToggle=function(t){e.setState({dropdownOpen:!e.state.dropdownOpen})},e.handleNav=function(t){return function(a){e.state.activeTab!==t&&e.setState({activeTab:t})}},e.state={activeTab:"details",dropdownOpen:!1,escapeRoom:new Ne},e}return Object(U.a)(t,e),Object(M.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(te.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new ne.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"componentDidMount",value:function(){var e=this.props.escapeRoom;void 0===e&&this.props.history.push("/"),this.setState({escapeRoom:e},function(){})}},{key:"render",value:function(){return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,{xs:"3"},i.a.createElement(J.a,{onClick:this.handleClick("EXIT")},"Save and Exit")),i.a.createElement(Z.a,{xs:"3"},i.a.createElement(V.a,{isOpen:this.state.dropdownOpen,toggle:this.handleToggle},i.a.createElement(X.a,{caret:!0},"Save and Export"),i.a.createElement(K.a,{right:!0},i.a.createElement($.a,{onClick:this.handleClick("JSON")},"Export as JSON"),i.a.createElement($.a,{onClick:this.handleClick("PDF")},"Export as PDF")))),i.a.createElement(Z.a,{xs:"6"})),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(Ee.a,{tabs:!0},i.a.createElement(ve.a,null,i.a.createElement(ge.a,{className:ye()({active:"details"===this.state.activeTab}),onClick:this.handleNav("details")},"Details")),i.a.createElement(ve.a,null,i.a.createElement(ge.a,{className:ye()({active:"accessibility"===this.state.activeTab}),onClick:this.handleNav("accessibility")},"Accessibility")),i.a.createElement(ve.a,null,i.a.createElement(ge.a,{className:ye()({active:"design"===this.state.activeTab}),onClick:this.handleNav("design")},"Design"))))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(be.a,{activeTab:this.state.activeTab},i.a.createElement(Ce.a,{tabId:"details"},i.a.createElement(_e,{state:this.state.escapeRoom.details,handleChange:this.handleDetailsChange})),i.a.createElement(Ce.a,{tabId:"accessibility"},i.a.createElement(tt,{state:this.state.escapeRoom.accessibility,handleChange:this.handleAccessibilityChange})),i.a.createElement(Ce.a,{tabId:"design"},i.a.createElement(Me,{state:{components:this.state.escapeRoom.components},handleChange:this.handleDesignChange}))))))}}]),t}(s.Component),_e=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,a.props.handleChange(t)},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(pe.a,null,i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"name"},"Room Name"),i.a.createElement(he.a,{type:"text",name:"name",id:"name",placeholder:"Room Name",value:this.props.state.name,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"designers"},"Designers"),i.a.createElement(he.a,{type:"text",name:"designers",id:"designers",placeholder:"Designer(s)",value:this.props.state.designers,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"theme"},"Theme"),i.a.createElement(he.a,{type:"text",name:"theme",id:"theme",placeholder:"theme",value:this.props.state.theme,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,null,"Players"),i.a.createElement(he.a,{type:"text",name:"minPlayers",id:"minPlayers",placeholder:"Min",value:this.props.state.minPlayers,onChange:this.handleChange}),i.a.createElement(he.a,{type:"text",name:"maxPlayers",id:"maxPlayers",placeholder:"Max",value:this.props.state.maxPlayers,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"targetTime"},"Target Time"),i.a.createElement(he.a,{type:"text",name:"targetTime",id:"targetTime",placeholder:"Time",value:this.props.state.targetTime,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"difficulty"},"Difficulty"),i.a.createElement(he.a,{type:"range",min:"1",max:"5",name:"difficulty",id:"difficulty",value:this.props.state.difficulty,onChange:this.handleChange})))),i.a.createElement(Z.a,null,i.a.createElement(pe.a,null,i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"objective"},"Objective"),i.a.createElement(he.a,{type:"text",name:"objective",id:"objective",placeholder:"Main Objective",value:this.props.state.objective,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"description"},"Description"),i.a.createElement(he.a,{type:"textarea",name:"description",id:"description",placeholder:"Description",value:this.props.state.description,onChange:this.handleChange}))))))}}]),t}(s.Component),Me=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(I.a)(this,Object(L.a)(t).call(this,e))).handlePalletItemClick=function(e){switch(e){case"Area":var t=a.props.state.components;t.push(new we),a.props.handleChange(t);break;default:return}},a.handleComponentClick=function(e,t){return function(n){n.stopPropagation(),a.setState({selected:e}),null!=t&&t()}},a.handleComponentDrop=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(m.a)(a.props.state.components),o=a.findComponent(e._id);if(null!=t){if(r=a.addRelationship(e._id,t,n),null==o){if("Area"!==a.findComponent(t).type){var s=r.find(function(e){return"Area"===e.type&&e.outputComponents.find(function(e){return e===t})});void 0!==s&&(r=a.addRelationship(e._id,s._id,!1))}r.push(e)}else r=a.updateComponent(e);a.props.handleChange(r)}else r.push(e),a.props.handleChange(r)},a.handleDidNotDrop=function(e){var t=a.removeComponent(e._id);a.props.handleChange(t)},a.handleComponentDetailsChange=function(e){var t=Object(b.a)({},a.state.selected,e),n=Object(m.a)(a.props.state.components);n=a.updateComponent(t),a.props.handleChange(n),a.setState({selected:t})},a.updateComponent=function(e){var t=e._id,n=Object(m.a)(a.props.state.components);return n.forEach(function(a,n,r){a._id===t&&(r[n]=e)}),n},a.findComponent=function(e){var t=Object(m.a)(a.props.state.components),n=null;return t.forEach(function(t,a,r){if(t._id===e)return n=t}),n},a.removeComponent=function(e){var t=Object(m.a)(a.props.state.components);return t.forEach(function(t,a,n){t._id===e?n.pop(a):[t.inputComponents,t.outputComponents].forEach(function(t,a,n){t.forEach(function(t,a,n){t===e&&n.pop(a)})})}),t},a.removeRelationship=function(e,t,n){var r=Object(m.a)(a.props.state.components);return r.forEach(function(a,r,o){a._id===t&&(n?a.inputComponents.forEach(function(t,a,n){t===e&&n.pop(a)}):a.outputComponents.forEach(function(t,a,n){t===e&&n.pop(a)}))}),r},a.addRelationship=function(e,t,n){var r=Object(m.a)(a.props.state.components);return r.forEach(function(a,r,o){a._id===t&&(n?-1===a.inputComponents.indexOf(e)&&a.inputComponents.push(e):-1===a.outputComponents.indexOf(e)&&a.outputComponents.push(e))}),r},a.state={selected:{}},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,{md:"2"},i.a.createElement(Ke,{handleClick:this.handlePalletItemClick})),i.a.createElement(Z.a,{md:"8"},i.a.createElement(Ye,{findComponent:this.findComponent,handleDidNotDrop:this.handleDidNotDrop,handleComponentDrop:this.handleComponentDrop,handleComponentClick:this.handleComponentClick,components:this.props.state.components})),i.a.createElement(Z.a,{md:"2"},i.a.createElement(Ze,{selected:this.state.selected,handleChange:this.handleComponentDetailsChange}))))}}]),t}(s.Component),Ie=a(33);a(83);var Le=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).handleDidNotDrop=function(e){a.props.handleDidNotDrop(e)},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"handleComponentDrop",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=null;if(void 0!==e.id)switch(e.id){case"Puzzle":a=new xe;break;case"Lock":a=new Se;break;case"Event":a=new Te;break;case"Music":a=new Pe;break;default:return}else a=e;this.props.handleComponentDrop(a,this.props.component._id,t)}},{key:"render",value:function(){var e;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(i.a.createElement("div",{className:e,key:this.props.component._id},i.a.createElement(se.a,{onClick:this.props.handleComponentClick(this.props.component)},i.a.createElement(ce.a,null))))}}]),t}(s.Component),Ue=Object(Ie.DropTarget)("COMPONENT",{drop:function(e,t,a){if(!t.didDrop()){var n=t.getItem(),r=e.isInput;return a.handleComponentDrop(n,r),{moved:!0}}}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(Le),Fe=a(120),Je={canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,a){return void 0===e.component?{id:e.id}:Object(b.a)({},e.component)},endDrag:function(e,t,a){t.didDrop()||void 0===e.component&&null===e.component||a.handleDidNotDrop(e.component)}};var We=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).handleDidNotDrop=function(e){void 0!==a.props.handleDidNotDrop&&a.props.handleDidNotDrop(e)},a.mapRelationships=function(e,t){var a,n="";switch(t){case"input":a={strokeColor:"blue"},n="input";break;case"output":a={strokeColor:"green"},n="output";break;default:a={}}return{targetId:e,targetAnchor:"top",sourceAnchor:"bottom",style:a,label:n}},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"findComponent",value:function(e){return void 0!==this.props.findComponent?this.props.findComponent(e):null}},{key:"render",value:function(){var e,t=this;this.props.isTarget&&(e=i.a.createElement(Y.a,null,i.a.createElement(Z.a,{xs:"6"},i.a.createElement(Ue,{isInput:!0,component:this.props.component,handleDidNotDrop:this.props.handleDidNotDrop,handleComponentDrop:this.props.handleComponentDrop,handleComponentClick:this.props.handleComponentClick})),i.a.createElement(Z.a,{xs:"6"},i.a.createElement(Ue,{isInput:!1,component:this.props.component,handleDidNotDrop:this.props.handleDidNotDrop,handleComponentDrop:this.props.handleComponentDrop,handleComponentClick:this.props.handleComponentClick}))));var a,n,r,o={},s="",c="component";return void 0!==this.props.component&&(o.top=this.props.component.position.top,o.left=this.props.component.position.left,o.position="relative",c+=" "+this.props.component.type+" "+this.props.component._id,s=this.props.component._id,a=this.props.component.inputComponents.map(function(e){return t.mapRelationships(e,"input")}),n=this.props.component.outputComponents.map(function(e){return t.mapRelationships(e,"output")}),r=i.a.createElement(Fe.ArcherElement,{id:s,relations:[].concat(Object(m.a)(n),Object(m.a)(a))},i.a.createElement("span",null,s))),this.props.connectDragSource(i.a.createElement("div",{className:c,style:o,onClick:this.props.handleComponentClick(this.props.component)},i.a.createElement("span",null,this.props.id),e,r))}}]),t}(s.Component),ze=Object(Ie.DragSource)("COMPONENT",Je,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(We),Be={drop:function(e,t,a){if(!t.didDrop()&&a&&void 0!==typeof e.component){var n=t.getItem();if(void 0===n.position){var r=t.getClientOffset(),o=l.a.findDOMNode(a).getBoundingClientRect();console.log(r),console.log(o),n.position={top:r.y-o.y-.2*o.height,left:r.x-o.x-.1*o.width},console.log(n)}else{var s=t.getDifferenceFromInitialOffset();n.position.left=Math.round(n.position.left+s.x),n.position.top=Math.round(n.position.top+s.y)}return a.handleComponentDrop(n),{moved:!0}}}};var Ge=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"handleComponentDrop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=null;if(void 0!==e.id&&void 0===e._id)switch(e.id){case"Puzzle":(a=new xe).position=e.position;break;case"Prop":(a=new Re).position=e.position;break;case"Lock":(a=new Se).position=e.position;break;case"Event":(a=new Te).position=e.position;break;case"Music":(a=new Pe).position=e.position;break;default:return}else a=e;this.props.handleComponentDrop(a,this.props.component._id,t)}},{key:"render",value:function(){var e,t=this;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(i.a.createElement("div",{className:e,key:this.props.component._id},i.a.createElement(se.a,{className:this.props.component.type,onClick:this.props.handleComponentClick(this.props.component)},i.a.createElement(ce.a,null,i.a.createElement(le.a,null,this.props.component.type),i.a.createElement(Fe.ArcherContainer,null,this.props.outputComponents.map(function(e,a){return i.a.createElement(ze,{key:e._id,isTarget:!0,handleComponentDrop:t.props.handleComponentDrop,handleComponentClick:t.props.handleComponentClick,handleDidNotDrop:t.props.handleDidNotDrop,component:e,findComponent:t.props.findComponent,id:e.type})}))))))}}]),t}(s.Component),He=Object(Ie.DropTarget)("COMPONENT",Be,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver(),canDrop:t.canDrop(),itemType:t.getItemType()}})(Ge),qe={canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,a){return void 0!==e.id?{id:e.id}:{component:e.component}},endDrag:function(e,t,a){t.didDrop()||e.handleDidNotDrop&&e.handleDidNotDrop(e.component)}};var Ve=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e;return this.props.isTarget&&(e=i.a.createElement(He,{findComponent:this.props.findComponent,outputComponents:this.props.outputComponents,component:this.props.component,handleDidNotDrop:this.props.handleDidNotDrop,handleComponentDrop:this.props.handleComponentDrop,handleComponentClick:this.props.handleComponentClick})),this.props.connectDragSource(i.a.createElement("div",{onClick:this.props.handleComponentClick(this.props.component)},i.a.createElement(se.a,{className:"component"},this.props.id,e)))}}]),t}(s.Component),Xe=Object(Ie.DragSource)("AREA",qe,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Ve),Ke=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).handleComponentClick=function(e){},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("h3",null,"Pallet"))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(Xe,{id:"Area",handleComponentClick:this.handleComponentClick}))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(ze,{id:"Puzzle",handleComponentClick:this.handleComponentClick}))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(ze,{id:"Prop",handleComponentClick:this.handleComponentClick}))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(ze,{id:"Lock",handleComponentClick:this.handleComponentClick}))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(ze,{id:"Event",handleComponentClick:this.handleComponentClick}))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(ze,{id:"Music",handleComponentClick:this.handleComponentClick}))))}}]),t}(s.Component),$e=(a(498),{drop:function(e,t,a){var n=t.getItem();void 0!==n.component&&null!==n.component||a.props.handleComponentDrop(new we)}});var Qe=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).mapAreas=function(e,t){if("Area"===e.type){var n=e.outputComponents.map(function(e,t){return a.props.findComponent(e)});return i.a.createElement(Z.a,{key:t,xs:"12"},i.a.createElement(Xe,{isTarget:!0,findComponent:a.props.findComponent,component:e,outputComponents:n,handleDidNotDrop:a.props.handleDidNotDrop,handleComponentDrop:a.props.handleComponentDrop,handleComponentClick:a.props.handleComponentClick}))}},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.components)!==JSON.stringify(e.components)&&this.setState({render:!0})}},{key:"render",value:function(){var e;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(i.a.createElement("div",{className:e},i.a.createElement(Q.a,{className:"component-arranger"},i.a.createElement(Y.a,null,this.props.components.map(this.mapAreas)))))}}]),t}(s.Component),Ye=Object(Ie.DropTarget)("AREA",$e,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(Qe),Ze=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,t._id=a.props.selected._id,a.props.handleChange(t)},a.mapDetailToInput=function(e,t){return"string"===typeof a.props.selected[e]&&"_id"!==e?i.a.createElement(Y.a,{key:t},i.a.createElement(Z.a,null,i.a.createElement(me.a,{for:e},e),i.a.createElement(he.a,{type:"text",name:e,id:e,placeholder:e,value:a.props.selected[e],onChange:a.handleChange}))):void 0},a.handleOnClick=function(e,t){return function(n){var r=Object(b.a)({},a.props.selected),o={};o._id=r._id,t?o.inputComponents=r.inputComponents.filter(function(t){return t!==e}):o.outputComponents=r.outputComponents.filter(function(t){return t!==e}),a.props.handleChange(o)}},a.mapIDToP=function(e,t,n){return i.a.createElement(q.a,{key:t},e,i.a.createElement(J.a,{onClick:a.handleOnClick(e,n),color:"danger",style:{display:"inline",position:"absolute",right:"2px",top:"0.3rem"}},"X"))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e,t,a,n,r,o,s=this,c=this.props.selected;return void 0===c&&null===c||(t=Object.keys(c).map(this.mapDetailToInput),e=this.props.selected.type,"Area"!==c.type&&void 0!==c.inputComponents&&void 0!==c.outputComponents&&(c.inputComponents.length>0||c.outputComponents.length>0)&&(a=c.inputComponents.map(function(e,t){return s.mapIDToP(e,t,!0)}),n=c.outputComponents.map(function(e,t){return s.mapIDToP(e,t,!1)}),r=i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("h4",null,"Inputs"),i.a.createElement(ee.a,null,a))),o=i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("h4",null,"Outputs"),i.a.createElement(ee.a,null,n))))),i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("h3",null,"Details"),i.a.createElement("h4",null,e))),t,r,o)}}]),t}(s.Component),et=a(625),tt=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(I.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,a.props.handleChange(t)},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("h1",{className:"text-center"},"Visual Accessibility"))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("h2",null,"Colour Blindness"),i.a.createElement("p",null,"Please select the types of colour blindness your design must take into account")),i.a.createElement(Z.a,null,i.a.createElement("h2",null,"Other"),i.a.createElement("p",null,"These are options to indicate restrictions on the design related to visual impairments such as blindness"))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(se.a,null,i.a.createElement(et.a,{type:"checkbox",name:"protanomaly",id:"protanomaly",label:"Protanomaly",checked:this.props.state.protanomaly,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"protanopia",id:"protanopia",label:"Protanopia",checked:this.props.state.protanopia,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"deuteranomaly",id:"deuteranomaly",label:"Deuteranomaly",checked:this.props.state.deuteranomaly,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"deuteranopia",id:"deuteranopia",label:"Deuteranopia",checked:this.props.state.deuteranopia,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"tritanomaly",id:"tritanomaly",label:"Tritanomaly",checked:this.props.state.tritanomaly,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"tritanopia",id:"tritanopia",label:"Tritanopia",checked:this.props.state.tritanopia,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"coneMonochromacy",id:"coneMonochromacy",label:"Cone Monochromacy",checked:this.props.state.coneMonochromacy,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"rodMonochromacy",id:"rodMonochromacy",label:"Rod Monochromacy",checked:this.props.state.rodMonochromacy,onChange:this.handleChange}))),i.a.createElement(Z.a,null,i.a.createElement(se.a,null,i.a.createElement(et.a,{type:"checkbox",name:"largeFonts",id:"largeFonts",label:"Large Fonts",value:this.props.state.largeFonts,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"highContrast",id:"highContrast",label:"High Contrast",value:this.props.state.highContrast,onChange:this.handleChange}))))),i.a.createElement(Z.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("h1",{className:"text-center"},"Physical Accessibility"))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("p",null,"These options are to indicate restrictions on the design related to physical impairments for example wheelchair accessibility and motor functions"))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(se.a,null,i.a.createElement(et.a,{type:"checkbox",name:"Wheelchair Accessible",id:"heelchairAccessible",label:"wheelchairAccessible",value:this.props.state.wheelchairAccessible,onChange:this.handleChange}),i.a.createElement(et.a,{type:"checkbox",name:"motorAccessible",id:"motorAccessible",label:"Accessible for players with motor function issues",value:this.props.state.motorAccessible,onChange:this.handleChange})))))),i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("p",null,"These options are designed to indicate the attempted accessibility of your design. These options will flag puzzles in your design that do not meet these restrictions"))))}}]),t}(s.Component),at=a(626),nt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(I.a)(this,Object(L.a)(t).call(this,e))).handleSubmit=function(){var e=Object(A.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.props.authenticateCredentials){e.next=6;break}return e.next=4,a.props.authenticateCredentials({strategy:"local",email:a.state.email,password:a.state.password});case 4:n=e.sent,a.setState({errorMessage:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState(Object(oe.a)({},e.target.id,e.target.value))},a.handleDismiss=function(e){a.setState({errorMessage:""})},a.state={email:"",password:"",errorMessage:""},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"full-container verticaly-center-content"},i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(pe.a,{onSubmit:this.handleSubmit},i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"email"},"Email"),i.a.createElement(he.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"password"},"Password"),i.a.createElement(he.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),i.a.createElement(J.a,null,"Login"),i.a.createElement(at.a,null,"Don't have an account? Sign Up ",i.a.createElement(F.a,{to:"/signup"},"Here")),i.a.createElement(de.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(s.Component),rt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(I.a)(this,Object(L.a)(t).call(this,e))).handleSubmit=function(){var e=Object(A.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.props.signUp){e.next=6;break}return e.next=4,a.props.signUp({email:a.state.email,password:a.state.password});case 4:n=e.sent,a.setState({errorMessage:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState(Object(oe.a)({},e.target.id,e.target.value))},a.handleDismiss=function(e){a.setState({errorMessage:""})},a.state={email:"",password:"",errorMessage:""},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"full-container verticaly-center-content"},i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement(pe.a,{onSubmit:this.handleSubmit},i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"email"},"Email"),i.a.createElement(he.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement(ue.a,null,i.a.createElement(me.a,{for:"password"},"Password"),i.a.createElement(he.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),i.a.createElement(J.a,null,"Sign Up"),i.a.createElement(at.a,null,"Have an account? Log In ",i.a.createElement(F.a,{to:"/login"},"Here")),i.a.createElement(de.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(s.Component),ot=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement(Z.a,null,i.a.createElement("p",null,"This is my honours project for BsC(Hons) Computing: Application Software Development at Robert Gordon University This is a web app for designing an escape room using drag and drop components")),i.a.createElement(Z.a,null,i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{href:"https://github.com/AldoAbdn/Escape-Room-Generator/"},"Github Repo")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://ninjamock.com/s/KCMW2Tx"},"Wireframe"))))))}}]),t}(s.Component),st=a(259),it=a.n(st),ct=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement(it.a,{width:"85%",height:"100%",api_key:Object({NODE_ENV:"production",PUBLIC_URL:""}).youtubeAPIKey,playlist_id:"PLWRRwFEmEuDKX5sobzWeb50xD14cpfkk3",scrolling:!0})}}]),t}(s.Component),lt=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return window.localStorage.getItem("feathers-jwt")?void 0!==this.props.condition?this.props.condition?i.a.createElement(G.a,this.props):i.a.createElement(H.a,{to:this.props.redirect,state:this.props.location}):i.a.createElement(G.a,this.props):i.a.createElement(H.a,{to:"/login",state:this.props.location})}}]),t}(s.Component),pt=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return i.a.createElement(Q.a,null,i.a.createElement(Y.a,null,i.a.createElement("h1",null,"404 Page Not Found")))}}]),t}(s.Component),ut=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).authenticateCredentials=function(){var t=Object(A.a)(N.a.mark(function t(a){var n,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate(a);case 3:return t.next=5,e.props.services.users.find({query:{email:a.email}});case 5:(n=t.sent).action.type.includes("FULFILLED")&&n.value.total>0?((r=n.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.login(r),e.props.history.push("/dashboard")):e.setState({}),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),e.signUp=function(){var t=Object(A.a)(N.a.mark(function t(a){var n,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.services.users.create(a);case 3:return t.next=5,e.props.feathersClient.authenticate({strategy:"local",email:a.email,password:a.password});case 5:return t.next=7,e.props.services.users.find({query:{email:a.email}});case 7:(n=t.sent).action.type.includes("FULFILLED")&&((r=n.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.login(r),e.props.history.push("/dashboard")),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}(),e.editEscapeRoom=function(t){e.props.redux.actions.setEscapeRoom(t),e.props.history.push("/designer")},e.newEscapeRoom=Object(A.a)(N.a.mark(function t(){var a,n,r,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.redux.state.user._id,n=new Ne(a),t.next=4,e.props.services["escape-rooms"].create(n);case 4:(r=t.sent).action.type.includes("FULFILLED")&&null!==(o=r.value)&&(e.props.redux.actions.addEscapeRoom(o),e.props.redux.actions.setEscapeRoom(o),e.props.history.push("/designer"));case 6:case"end":return t.stop()}},t,this)})),e.deleteEscapeRoom=function(t){e.props.services["escape-rooms"].remove(t._id),e.props.redux.actions.removeEscapeRoom(t)},e.updateUser=function(){var t=Object(A.a)(N.a.mark(function t(a){var n,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.props.redux.state.user,t.next=4,e.props.services.users.patch(n._id,a);case 4:return r=t.sent,e.props.redux.actions.login(r.value),e.props.history.push("/profile"),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}(),e.saveEscapeRoom=function(){var t=Object(A.a)(N.a.mark(function t(a){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a._id){t.next=5;break}return t.next=3,e.props.services["escape-rooms"].update(a._id,a);case 3:return t.next=5,e.props.redux.actions.updateEscapeRoom(a);case 5:e.props.history.push("/");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={profile:null},e}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.props.redux.state.escapeRooms,a=this.props.redux.state.escapeRoom,n=this.props.redux.state.user;return i.a.createElement(B.a,null,i.a.createElement(H.a,{exact:!0,from:"/",to:"dashboard"}),i.a.createElement(lt,{path:"/dashboard",render:function(a){return i.a.createElement(re,{escapeRooms:t,editEscapeRoom:e.editEscapeRoom,newEscapeRoom:e.newEscapeRoom,deleteEscapeRoom:e.deleteEscapeRoom})}}),i.a.createElement(lt,{path:"/profile",condition:Object.keys(n).length>0&&void 0!==n,redirect:"/login",render:function(t){return i.a.createElement(fe,{user:n,updateUser:e.updateUser})}}),i.a.createElement(lt,{path:"/designer",condition:Object.keys(a).length>0&&void 0!==a,redirect:"/",render:function(t){return i.a.createElement(Ae,{escapeRoom:a,saveEscapeRoom:e.saveEscapeRoom})}}),i.a.createElement(G.a,{path:"/login",render:function(t){return i.a.createElement(nt,{authenticateCredentials:e.authenticateCredentials})}}),i.a.createElement(G.a,{path:"/signup",render:function(t){return i.a.createElement(rt,{signUp:e.signUp})}}),i.a.createElement(G.a,{path:"/about",component:ot}),i.a.createElement(G.a,{path:"/tutorials",component:ct}),i.a.createElement(G.a,{component:pt}))}}]),t}(s.Component),mt=function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(I.a)(this,Object(L.a)(t).call(this))).authenticate=Object(A.a)(N.a.mark(function t(){var a,n;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authenticateJWT();case 2:return a=t.sent,t.next=5,e.populateUserFromJWT(a);case 5:if(null==(n=t.sent)){t.next=9;break}return t.next=9,e.populateEscapeRooms(n._id);case 9:case"end":return t.stop()}},t,this)})),e.authenticateJWT=Object(A.a)(N.a.mark(function t(){var a;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate();case 3:return a=t.sent,t.abrupt("return",a.accessToken);case 7:t.prev=7,t.t0=t.catch(0),e.logout();case 10:case"end":return t.stop()}},t,this,[[0,7]])})),e.populateUserFromJWT=function(){var t=Object(A.a)(N.a.mark(function t(a){var n,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a&&""!==a){t.next=3;break}return e.setProfile(!1),t.abrupt("return",null);case 3:return t.next=5,e.props.feathersClient.passport.verifyJWT(a);case 5:return n=t.sent,t.next=8,e.props.services.users.get(n.userId);case 8:if(n=t.sent,void 0!==(r=n.value).email&&""!==r.email){t.next=13;break}return e.setProfile(!1),t.abrupt("return",null);case 13:return r.token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.login(r),e.setProfile(!0),t.abrupt("return",r);case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.populateEscapeRooms=function(){var t=Object(A.a)(N.a.mark(function t(a){var n,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a||void 0===a){t.next=5;break}return t.next=3,e.props.services["escape-rooms"].find({query:{userId:a}});case 3:(n=t.sent).action.type.includes("FULFILLED")&&(null!==(r=n.value.data)&&void 0!==r&&e.props.redux.actions.updateEscapeRooms(r),e.setState({loading:!1}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.logout=function(){window.localStorage.removeItem("feathers-jwt"),e.setState({profile:null}),e.props.redux.actions.logout(),e.props.history.push("/")},e.state={profile:null},e}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidUpdate",value:function(e){e.redux.state.user.email!==this.props.redux.state.user.email&&(this.populateEscapeRooms(this.props.redux.state.user._id),void 0!==this.props.redux.state.user.email?this.setProfile(!0):this.setProfile(!1))}},{key:"componentDidMount",value:function(){window.localStorage.getItem("feathers-jwt")&&void 0!==this.props.redux.state.user.email?this.setProfile(!0):window.localStorage.getItem("feathers-jwt")&&void 0===this.props.redux.state.user.email&&this.authenticate()}},{key:"setProfile",value:function(e){var t;t=e?i.a.createElement("div",{className:"profile"},i.a.createElement(F.a,{to:"/profile"},"Profile"),i.a.createElement(J.a,{onClick:this.logout},"Logout")):null,this.setState({profile:t})}},{key:"render",value:function(){var e=this.state.loading||this.props.redux.state.usersService.isLoading||this.props.redux.state.escapeRoomsService.isLoading;return i.a.createElement("div",null,i.a.createElement(z.a,{className:"loading-overlay",active:e,spinner:!0},i.a.createElement("header",null,i.a.createElement("h1",{className:"title"},i.a.createElement(F.a,{to:"/"},"Escape Room Generator")),this.state.profile),i.a.createElement("main",null,i.a.createElement(ut,{history:this.props.history,feathersClient:this.props.feathersClient,redux:this.props.redux,services:this.props.services})),i.a.createElement("footer",null,i.a.createElement(F.a,{to:"/about"},"About"),i.a.createElement(F.a,{to:"/tutorials"},"Tutorials"))))}}]),t}(s.Component);function ht(e){return{type:"LOGIN",user:e}}function dt(){return{type:"LOGOUT"}}function ft(e){return{type:"ADD_ESCAPE_ROOM",escapeRoom:e}}function Et(e){return{type:"REMOVE_ESCAPE_ROOM",escapeRoom:e}}function vt(e){return{type:"UPDATE_ESCAPE_ROOM",escapeRoom:e}}function gt(e){return{type:"UPDATE_ESCAPE_ROOMS",escapeRooms:e}}function bt(e){return{type:"SET_ESCAPE_ROOM",escapeRoom:e}}function Ct(e){return{type:"CLEAR_ESCAPE_ROOM",escapeRoom:e}}var Ot=Object(u.b)(function(e){return{redux:e}},function(e){var t=Object(h.bindActionCreators)(n,e),a=Object(h.bindActionCreators)(r,e),s=Object(h.bindActionCreators)(o,e);return Object(b.a)({},t,a,s)},function(e,t,a){return Object(b.a)({},a,{redux:{state:e.redux,actions:t}})})(mt),yt=Object(T.a)(Ot);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var jt=a(262),kt=a.n(jt);a.d(t,"feathersClient",function(){return Dt});var Dt=x()().configure(x.a.socketio(D()())).configure(x.a.hooks()).configure(x.a.authentication({storage:window.localStorage})),wt=S()(Dt,["users","escape-rooms"]),xt=function(e,t){var a=window.devToolsExtension?window.devToolsExtension()(h.createStore):h.createStore;return h.applyMiddleware.apply(void 0,Object(m.a)(v))(a)(j(e),t)}(wt,{user:{},escapeRooms:[],escapeRoom:{}}),Rt=Object(R.bindWithDispatch)(xt.dispatch,wt),St=i.a.createElement(Ie.DragDropContextProvider,{backend:kt.a},i.a.createElement(u.a,{store:xt},i.a.createElement(p.a,null,i.a.createElement(yt,{feathersClient:Dt,services:Rt,getServicesStatus:R.getServicesStatus}))));l.a.render(St,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},83:function(e,t,a){}},[[264,2,1]]]);
//# sourceMappingURL=main.39bfd25b.chunk.js.map