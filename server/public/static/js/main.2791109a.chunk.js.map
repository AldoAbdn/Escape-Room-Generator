{"version":3,"sources":["middleware/logger.js","middleware/index.js","reducers/user.js","reducers/escapeRooms.js","models/Component.js","models/Area.js","models/Puzzle.js","models/Prop.js","models/Lock.js","models/Event.js","models/Music.js","models/Details.js","models/Visual.js","models/Physical.js","models/Accessibility.js","models/EscapeRoom.js","reducers/escapeRoom.js","models/Modal.js","reducers/modal.js","reducers/index.js","components/Profile.js","pdf/pdf.js","components/Dashboard.js","components/EscapeRoomDesigner.js","components/Details.js","components/Accessibility.js","components/Design.js","components/AreaPalletItem.js","components/PalletItem.js","components/Pallet.js","components/ComponentDnDTarget.js","components/ComponentDnDSource.js","components/AreaDnDTarget.js","components/AreaDnDSource.js","components/ComponentArranger.js","components/ComponentDetails.js","components/Login.js","components/PasswordStrengthMeter.js","components/SignUp.js","components/About.js","components/Tutorials.js","components/ConditionalRoute.js","components/NotFound.js","generators/LockGenerator.js","components/LockGenerator.js","puzzles/Puzzle.js","puzzles/Colour.js","puzzles/Crossword.js","puzzles/HiddenWord.js","puzzles/Riddle.js","puzzles/Cipher.js","generators/PuzzleGenerator.js","components/ListCreator.js","components/PuzzleGenerator.js","components/Verify.js","components/Reset.js","components/BusinessLogic.js","components/Main.js","actions/user.js","actions/escapeRooms.js","actions/escapeRoom.js","actions/modal.js","components/App.js","serviceWorker.js","index.js","stores/store.js"],"names":["logger","store","next","action","console","groupCollapsed","type","info","result","log","getState","groupEnd","reduxThunk","reduxPromiseMiddleware","user","state","escapeRooms","i","push","escapeRoom","slice","findIndex","_id","Component","this","uniqid","version","name","description","output","inputComponents","outputComponents","position","top","left","estimatedCost","resources","Area","Puzzle","puzzle","puzzleType","Prop","Lock","lockType","Event","eventType","Music","startTime","endTime","Details","designers","theme","minPlayers","maxPlayers","targetTime","difficulty","objective","Visual","protanomaly","protanopia","deuteranomaly","deuteranopia","tritanomaly","tritanopia","coneMonochromacy","rodMonochromacy","largeFonts","highContrast","Physical","wheelchairAccessible","motorAccessible","Accessibility","visual","physical","EscapeRoom","userId","details","accessibility","components","cost","isNaN","parseFloat","parseInt","id","find","component","findComponent","outputs","string","undefined","join","length","reduce","sum","newState","areaId","calculateCost","componentId","forEach","index","filter","inputId","outputId","indexOf","parentId","isInput","Modal","header","body","confirmText","confirmCallback","cancelText","cancelCallback","isOpen","confirm","text","cancel","modal","reduxifiedServices","combineReducers","usersService","users","reducer","escapeRoomsService","authManagementService","routing","routerReducer","Profile","handleSubmit","e","a","preventDefault","props","updateUser","email","password","handleChange","setState","target","value","handleDismiss","message","handleClick","edit","color","identityChange","sendPasswordReset","oldProps","newProps","Container","fluid","Row","Col","Form","onSubmit","FormGroup","Label","for","Input","onChange","Button","onClick","block","Alert","toggle","className","src","avatar","alt","blockedKeys","startHeight","startIndent","endHeight","newLineHeight","indentWidth","escapeRoomToPDF","doc","jsPDF","x","y","addImage","images","logo","convertObject","Object","keys","key","includes","addPage","drawTitle","constructor","Array","childObject","capitaliseFirstLetter","save","setTextColor","line","replace","c","toUpperCase","Dashboard","handleToggle","dropdownOpen","newEscapeRoom","handleItemClick","editEscapeRoom","saveJSON","savePDF","deleteEscapeRoom","showModal","mapEscapeRoomToList","ListGroupItem","Dropdown","style","display","right","DropdownToggle","caret","DropdownMenu","DropdownItem","disabled","blob","Blob","JSON","stringify","saveAs","ListGroup","map","EscapeRoomDesigner","saveEscapeRoom","handleNav","tab","activeTab","toggleSvgs","lines","document","querySelectorAll","calculateOutput","calculateComponentOutput","history","prevProps","prevState","xs","md","lg","Nav","tabs","NavItem","NavLink","classnames","active","TabContent","TabPane","tabId","updateDetails","updateAccessibility","addComponent","removeComponent","updateComponent","addRelationship","removeRelationship","event","aria-hidden","placeholder","UncontrolledTooltip","min","max","handleVisualChange","handlePhysicalChange","Card","CustomInput","label","Design","handleComponentClick","stopPropagation","selected","renderTrigger","AreaPalletItem","connectDragSource","DragSource","beginDrag","monitor","connect","dragSource","isDragging","PalletItem","descriptions","classNames","Pallet","ComponentDnDTarget","item","tooltip","isOver","canDrop","connectDropTarget","CardBody","DropTarget","drop","didDrop","getItem","handleComponentDrop","moved","dropTarget","isOverCurrent","shallow","itemType","getItemType","componentSource","canDrag","endDrag","ComponentDnDSource","update","forceUpdate","window","addEventListener","removeEventListener","isTarget","componentTarget","clientOffset","getClientOffset","targetRect","ReactDOM","findDOMNode","getBoundingClientRect","offset","width","height","AreaDnDTarget","updateScreenDimensions","innerWidth","innerHeight","title","CardTitle","areaSource","AreaDnDSource","render","areaArrangerTarget","AreaModel","ComponentArranger","mapAreas","area","setTimeout","inputComponent","from","to","borderColor","outputComponent","ComponentDetails","handleOutputChange","handlePuzzleChange","generateFromInputs","mapDetailToInput","generator","convertCamelCase","property","array","detail","handleOnClick","oldId","mapIDToP","visualWarning","physicalWarning","toString","str","properties","inputs","inputRelationships","outputRelationships","visualKeys","physicalKeys","class","Login","recaptcha","authenticateCredentials","strategy","err","sendReset","handleReCAPTCHA","sitekey","process","FormText","Link","padding","fontSize","PasswordStrengthMeter","convertScoreToLabel","score","Signup","password2","signUp","zxcvbn","composemessage","messages","testResult","handleTestResult","noValidate","required","About","href","Tutorials","api_key","playlist_id","scrolling","ConditionalRoute","condition","Route","Redirect","redirect","NotFound","LockGenerator","number","Math","floor","random","amount","wordsPerString","words","RandomWords","exactly","sequence","directions","handleNumericClick","lockGenerator","generateNumericCombination","handleWordClick","generateWords","handleDirectionalClick","generateDirectionSequence","lockGen","step","Colour","numbers","generateNumbers","num1","num2","num3","num4","answer","colour","Crossword","hints","answers","crossword","CrosswordGenerator","HiddenWord","word","hiddenWord","generateHiddenWord","matrix","Riddle","riddle","generateRandomRiddle","riddles","Cipher","cipherType","encoder","encoders","decoder","decoders","encoderDATA","decoderDATA","PuzzleGenerator","options","ListCreator","items","addItem","removeItem","mapItemsToInputs","InputGroup","InputGroupAddon","addonType","InputGroupText","handleListChange","list","generateWord","handleRiddleClick","handleCipherClick","generateCipher","cipher","puzzleGenerator","Verify","verify","token","sendVerify","Reset","reset","BusinessLogic","populateEscapeRooms","services","query","data","redux","actions","updateEscapeRooms","loading","credentials","feathersClient","authenticate","localStorage","verified","login","create","setSelectedEscapeRoom","response","addEscapeRoom","remove","removeEscapeRoom","updateEscapeRoom","notifierOptions","escapeRoomActions","loggedIn","Switch","exact","path","isVerified","routeProps","match","params","Main","toggleProfile","isProfileOpen","reAuthenticate","logout","profile","changes","include","tooltipOpen","isLoading","hideModal","nav","inNavbar","spinner","Navbar","light","expand","NavbarBrand","NavbarToggler","Collapse","navbar","ModalHeader","ModalBody","ModalFooter","clearSelectedEscapeRoom","App","dispatch","bindActionCreators","userActionCreators","escapeRoomsActionCreators","escapeRoomActionCreators","modalActionCreators","stateProps","dispatchProps","ownProps","withRouter","Boolean","location","hostname","pipline","backends","backend","HTML5Backend","TouchBackend","enableMouseEvents","preview","transition","TouchTransition","MultiBackend","feathers","configure","socketio","io","authentication","rawServices","reduxifyServices","initialState","createStoreWithDevTools","devToolsExtension","createStore","applyMiddleware","middlewares","createStoreWithMiddlewares","rootReducer","configureStore","bindWithDispatch","router","HashRouter","getServicesStatus","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2791109a.chunk.js","sourcesContent":["/**\r\n * A basic middleware logger\r\n * See http://redux.js.org/docs/advanced/Middleware.html\r\n * @module Middleware/logger\r\n */\r\n\r\n /** Logger */\r\nconst logger = store => next => action => {\r\n    console.groupCollapsed(action.type); // eslint-disable-line no-console\r\n    console.info('dispatching', action); // eslint-disable-line no-console\r\n    const result = next(action);\r\n    console.log('next state', store.getState()); // eslint-disable-line no-console\r\n    console.groupEnd(action.type); // eslint-disable-line no-console\r\n    return result;\r\n  };\r\n  \r\n  export default logger;","import reduxThunk from 'redux-thunk';\r\nimport reduxPromiseMiddleware from 'redux-promise-middleware';\r\nimport logger from './logger'; \r\n\r\n/**\r\n * Middleware\r\n * @module Middleware/index\r\n * @author Alistair Quinn\r\n */\r\n\r\n/** Middleware */\r\nexport default [\r\n  reduxThunk, // Thunk middleware for Redux\r\n  reduxPromiseMiddleware(), // Resolve, reject promises with conditional optimistic updates\r\n  // routerMiddleware(browserHistory), // !! IMPORTANT for location.href changes\r\n  logger, // A basic middleware logger\r\n];","/**\r\n * Reducer for User state\r\n * @param {User} state \r\n * @param {Action} action \r\n */\r\nfunction user(state={},action){\r\n    switch(action.type){\r\n        case 'LOGIN':\r\n            return {...action.user};\r\n            \r\n        case 'LOGOUT':\r\n            return {};\r\n            \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default user;","/**\r\n * Reducer for Escape Rooms state\r\n * @param {Array<EscapeRoom>} state \r\n * @param {Action} action \r\n * @returns {Array<EscapeRoom>}\r\n */\r\nfunction escapeRooms(state=[],action){\r\n    let i;\r\n    switch(action.type){\r\n        case 'ADD_ESCAPE_ROOM':\r\n            state.push(action.escapeRoom);\r\n            return state.slice();\r\n            \r\n        case 'REMOVE_ESCAPE_ROOM':\r\n            i = state.findIndex(escapeRoom => escapeRoom._id === action.escapeRoom._id);\r\n            return [...state.slice(0,i),...state.slice(i+1)];\r\n            \r\n        case 'UPDATE_ESCAPE_ROOM':\r\n            i = state.findIndex(escapeRoom=>escapeRoom._id === action.escapeRoom._id);\r\n            state[i] = action.escapeRoom;\r\n            return state.slice(); \r\n            \r\n        case 'UPDATE_ESCAPE_ROOMS':\r\n            return action.escapeRooms.slice();\r\n            \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default escapeRooms;","import uniqid from 'uniqid';\r\n\r\n/**\r\n * Base Class for Component\r\n * @author Alistair Quinn\r\n */\r\nclass Component {\r\n    constructor(){\r\n        this._id = uniqid();\r\n        this.version = \"1\";\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.output = \"\";\r\n        this.inputComponents = [];\r\n        this.outputComponents = [];\r\n        this.type = \"Component\";\r\n        this.position = {top:0,left:0};\r\n        this.estimatedCost = \"\";\r\n        this.resources = [];\r\n    }\r\n}\r\n\r\nexport default Component;","import Component from './Component';\r\n\r\n/**\r\n * Class for Area\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Area extends Component {\r\n    constructor(){\r\n        super();\r\n        this.type=\"Area\";\r\n    }   \r\n}\r\n\r\nexport default Area;","import Component from './Component';\r\n\r\n/**\r\n * Class for Puzzle\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Puzzle extends Component {\r\n    constructor(){\r\n        super();\r\n        this.puzzle = {};\r\n        this.puzzleType=\"Cipher\";\r\n        this.type=\"Puzzle\";\r\n    }   \r\n}\r\n\r\nexport default Puzzle;","import Component from './Component';\r\n\r\n/**\r\n * Class for Prop\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Prop extends Component {\r\n    constructor(){\r\n        super();\r\n        this.type=\"Prop\";\r\n    }   \r\n}\r\n\r\nexport default Prop;","import Component from './Component';\r\n\r\n/**\r\n * Class for Lock\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Lock extends Component {\r\n    constructor(){\r\n        super();\r\n        this.lockType=\"Numeric\";\r\n        this.type=\"Lock\";\r\n    }   \r\n}\r\n\r\nexport default Lock;","import Component from './Component';\r\n\r\n/**\r\n * Class for Event\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Event extends Component {\r\n    constructor(){\r\n        super();\r\n        this.eventType=\"Sound Effect\";\r\n        this.type=\"Event\";\r\n    }   \r\n}\r\n\r\nexport default Event;","import Component from './Component';\r\n\r\n/**\r\n * Class for Music\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Music extends Component {\r\n    constructor(){\r\n        super();\r\n        this.startTime=\"\";\r\n        this.endTime=\"\"\r\n        this.type=\"Music\";\r\n    }   \r\n}\r\n\r\nexport default Music;","/**\r\n * Class for Details\r\n * @author Alistair Quinn\r\n */\r\nclass Details {\r\n    constructor(){\r\n        this.name = \"Unnamed\";\r\n        this.designers= \"\";\r\n        this.theme = \"\";\r\n        this.minPlayers = \"\";\r\n        this.maxPlayers = \"\";\r\n        this.targetTime = \"\";\r\n        this.difficulty = \"3\";\r\n        this.objective = \"\";\r\n        this.description = \"\";\r\n        this.estimatedCost = \"\";\r\n    }  \r\n}\r\n\r\nexport default Details;","/**\r\n * Class for Visual\r\n * @author Alistair Quinn\r\n */\r\nclass Visual {\r\n    constructor(){\r\n        this.protanomaly = false;\r\n        this.protanopia = false;\r\n        this.deuteranomaly = false;\r\n        this.deuteranopia = false;\r\n        this.tritanomaly = false;\r\n        this.tritanopia = false;\r\n        this.coneMonochromacy = false;\r\n        this.rodMonochromacy = false;\r\n        this.largeFonts = false;\r\n        this.highContrast = false;\r\n    }  \r\n}\r\n\r\nexport default Visual;","/**\r\n * Class for Physical\r\n * @author Alistair Quinn\r\n */\r\nclass Physical {\r\n    constructor(){\r\n        this.wheelchairAccessible = false;\r\n        this.motorAccessible = false;\r\n    }  \r\n}\r\n\r\nexport default Physical;","import Visual from './Visual';\r\nimport Physical from './Physical';\r\n\r\n/**\r\n * Class for Accessibility\r\n * @author Alistair Quinn\r\n */\r\nclass Accessibility {\r\n    constructor(){\r\n        this.visual = new Visual();\r\n        this.physical = new Physical();\r\n    }  \r\n}\r\n\r\nexport default Accessibility;","import { Area } from \".\";\r\nimport Details from './Details';\r\nimport Accessibility from './Accessibility';\r\n\r\n/**\r\n * Class for EscapeRoom\r\n * @author Alistair Quinn\r\n */\r\nclass EscapeRoom {\r\n    constructor(userId){\r\n        this.userId = userId;\r\n        this.details = new Details();\r\n        this.accessibility = new Accessibility();\r\n        this.components = [new Area()];\r\n    }  \r\n\r\n    static calculateCost(escapeRoom){\r\n        let components = escapeRoom.components;\r\n        let cost = 0;\r\n        for (let component of components){\r\n            let estimatedCost = component.estimatedCost;\r\n            if(!isNaN(parseFloat(estimatedCost))){\r\n                cost += parseFloat(estimatedCost);\r\n            } else if (!isNaN(parseFloat(estimatedCost))){\r\n                cost += parseInt(estimatedCost);\r\n            }\r\n        }\r\n        return cost;\r\n    }\r\n\r\n    static findComponent(escapeRoom,id){\r\n        return escapeRoom.components.find((component)=>{return component._id===id})\r\n    }\r\n\r\n    static calculateComponentOutput(escapeRoom,id){\r\n        let component = EscapeRoom.findComponent(escapeRoom,id);\r\n        if(component!=null){\r\n            let outputs = [];\r\n            for(let id of component.inputComponents){\r\n                let component = EscapeRoom.findComponent(escapeRoom,id);\r\n                outputs.push(component.output);\r\n            }\r\n            let string = outputs.find((output)=>parseFloat(output));\r\n            if(string!==null||string!==undefined){\r\n                return outputs.join(\" \");\r\n            } else {\r\n                if(outputs.length>1)\r\n                    return outputs.reduce((sum,output)=>parseFloat(sum)+parseFloat(output));\r\n                else \r\n                    return \"\";\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default EscapeRoom;","import EscapeRoom from '../models/EscapeRoom';\r\n\r\n/**\r\n * Reducer for Escape Room State\r\n * @param {EscapeRoom} state \r\n * @param {Action} action \r\n * @returns {EscapeRoom}\r\n */\r\nfunction escapeRoom(state={},action){\r\n    let newState = {};\r\n    let i;\r\n    switch(action.type){\r\n        case 'SET_SELECTED_ESCAPE_ROOM':\r\n            return {...action.escapeRoom};\r\n        case 'CLEAR_SELECTED_ESCAPE_ROOM':\r\n            return {}\r\n        case 'UPDATE_DETAILS':\r\n            newState = {...state};\r\n            newState.details = {...newState.details, ...action.details};\r\n            return newState;\r\n        case 'UPDATE_ACCESSIBILITY':\r\n            newState = {...state};\r\n            newState.accessibility = {...newState.accessibility, ...action.accessibility};\r\n            return newState;\r\n        case 'ADD_COMPONENT':\r\n            newState = {...state};\r\n            newState.components.push(action.component);\r\n            if(action.areaId!==undefined){\r\n                i = newState.components.findIndex(component=>component._id===action.areaId);\r\n                newState.components[i].outputComponents.push(action.component._id);\r\n            }\r\n            newState.details.estimatedCost = EscapeRoom.calculateCost(newState);\r\n            return newState;\r\n        case 'REMOVE_COMPONENT':\r\n            newState = {...state};\r\n            i = newState.components.findIndex(component=>component._id===action.componentId);\r\n            newState.components = [...newState.components.slice(0,i),...newState.components.slice(i+1)]\r\n            newState.components.forEach((component,index,components)=>{\r\n                components[index].inputComponents = component.inputComponents.filter(inputId=>inputId!==action.componentId);\r\n                components[index].outputComponents = component.outputComponents.filter(outputId=>outputId!==action.componentId);\r\n            })\r\n            newState.details.estimatedCost = EscapeRoom.calculateCost(newState);\r\n            return newState;\r\n        case 'UPDATE_COMPONENT':\r\n            newState = {...state};\r\n            i = newState.components.findIndex(component=>component._id===action.component._id);\r\n            newState.components[i] = {...newState.components[i],...action.component};\r\n            if(action.areaId!=null){\r\n                newState.components.forEach((component,index,components)=>{\r\n                    if(component.type===\"Area\")\r\n                        components[index].outputComponents = component.outputComponents.filter(outputId=>outputId!==action.component._id);\r\n                });\r\n                i = newState.components.findIndex(component=>component._id===action.areaId);\r\n                if(newState.components[i].outputComponents.indexOf(action.component._id)===-1)\r\n                    newState.components[i].outputComponents.push(action.component._id);\r\n            }\r\n            newState.details.estimatedCost = EscapeRoom.calculateCost(newState);\r\n            return newState;\r\n        case 'ADD_RELATIONSHIP':\r\n            newState = {...state};\r\n            newState.components.forEach((component,index,components)=>{\r\n                if(component._id===action.parentId){\r\n                    if(action.isInput){\r\n                        if(component.inputComponents.indexOf(action.componentId)===-1)\r\n                            component.inputComponents.push(action.componentId);\r\n                    } else {\r\n                        if(component.outputComponents.indexOf(action.componentId)===-1)\r\n                            component.outputComponents.push(action.componentId);\r\n                    }\r\n                }\r\n            });\r\n            return newState;\r\n        case 'REMOVE_RELATIONSHIP':\r\n            newState = {...state};\r\n            newState.components.forEach((component,index,components)=>{\r\n                if(component._id===action.parentId){\r\n                    if(action.isInput){\r\n                        if(component.inputComponents.indexOf(action.componentId)===-1)\r\n                            component.inputComponents = component.inputComponents.filter(id=>id!==action.componentId);\r\n                    } else {\r\n                        if(component.outputComponents.indexOf(action.componentId)===-1)\r\n                            component.outputComponents = component.outputComponents.filter(id=>id!==action.componentId);\r\n                    }\r\n                }\r\n            });\r\n            return newState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default escapeRoom;","/**\r\n * Class for Modal\r\n * @author Alistair Quinn\r\n */\r\nclass Modal {\r\n    constructor(header,body,confirmText,confirmCallback,cancelText,cancelCallback,isOpen=true){\r\n        this.header = header;\r\n        this.body = body;\r\n        this.confirm = {text:confirmText,action:confirmCallback}; //Converts callback to a string, because redux can't store funcs\r\n        this.cancel = {text:cancelText,action:cancelCallback};\r\n        this.isOpen = isOpen;\r\n    }\r\n}\r\n\r\nexport default Modal;","import Modal from \"../models/Modal\";\r\n\r\n/**\r\n * Reducer for Modal State\r\n * @param {Modal} state \r\n * @param {Action} action \r\n * @returns {Modal}\r\n */\r\nfunction modal(state=new Modal(\"\",\"\",\"\",()=>{},\"\",()=>{},false),action){\r\n    switch(action.type){\r\n        case 'SHOW_MODAL':\r\n            return {...action.modal,isOpen:true};\r\n        case 'HIDE_MODAL':\r\n            return new Modal(\"\",\"\",\"\",()=>{},\"\",()=>{},false)\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default modal;","import { combineReducers } from 'redux';\r\nimport { routerReducer } from 'react-router-redux';\r\nimport user from './user';\r\nimport escapeRooms from './escapeRooms';\r\nimport escapeRoom from './escapeRoom';\r\nimport modal from './modal';\r\n\r\n/**\r\n * Combines Reducers\r\n * @param {Array<Service>} reduxifiedServices \r\n * @returns {Array<Service>}\r\n */\r\nexport default function(reduxifiedServices){\r\n    return combineReducers({\r\n        usersService: reduxifiedServices.users.reducer,\r\n        escapeRoomsService: reduxifiedServices['escape-rooms'].reducer,\r\n        authManagementService: reduxifiedServices['auth-management'].reducer,\r\n        routing: routerReducer,\r\n        user,\r\n        escapeRooms,\r\n        escapeRoom,\r\n        modal\r\n    })\r\n}\r\n","import React, {Component}  from 'react';\r\nimport { Container, Row, Col, Alert, Button, Form, FormGroup, Label, Input } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for Profile\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Profile extends Component {\r\n    /** Creates Profile */\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            edit: false,\r\n            message: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            color: \"success\"\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Handles form submit\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if(this.props.updateUser)\r\n            this.props.updateUser({email:this.state.email,password:this.state.password});\r\n    }\r\n\r\n    /**\r\n     * Handles input change\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles Alert Dismiss\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleDismiss = (e) => {\r\n        this.setState({message: \"\"});\r\n    }\r\n\r\n    /**\r\n     * Handles button clicks\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleClick = async (e) => {\r\n        e.preventDefault();\r\n        switch (e.target.id) {\r\n            case 'editButton':\r\n                this.setState({edit:true});\r\n                break;\r\n            case 'saveButton':\r\n                let user = this.props.user;\r\n                if(this.state.email===\"\")\r\n                    this.setState({message:\"Email Required\",color:\"danger\"});\r\n                else if(this.state.password===\"\")\r\n                    this.setState({message:\"Your current password is required for authentication\",color:\"danger\"})\r\n                else if(this.props.identityChange){\r\n                    let result;\r\n                    try{\r\n                        result = await this.props.identityChange({email:user.email}, this.state.password, {email:this.state.email});\r\n                    } catch(error) {\r\n                        result = \"An error occured, your email may have been changed\"\r\n                    }\r\n                    this.setState(result);\r\n                }\r\n                break;\r\n            case 'cancelButton':\r\n                this.setState({edit:false});\r\n                break;\r\n            case 'passwordButton':\r\n                let result;\r\n                try{\r\n                    result = await this.props.sendPasswordReset();\r\n                }catch(error){\r\n                    result = {color:\"warning\", message:\"An error occured, a password reset email may have been sent\"}\r\n                }\r\n                this.setState(result);\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n\r\n    /**\r\n     * React Lifecycle Method\r\n     * Component Mounted\r\n     */\r\n    componentDidMount(){\r\n        const user = this.props.user;\r\n        this.setState({\r\n            email: user.email\r\n        })\r\n    }\r\n\r\n    /**\r\n     * React Lifecycle Method\r\n     * Component Updated\r\n     * @param {Object} oldProps \r\n     */\r\n    componentDidUpdate(oldProps){\r\n        const newProps = this.props;\r\n        if(oldProps.user.email !== newProps.user.email){\r\n            const user = this.props.user;\r\n            this.setState({\r\n                email: user.email,\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * React Lifecycle Method\r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        if(this.state.edit)\r\n            // Edit Profile\r\n            return (\r\n            <Container fluid>\r\n                <Row>\r\n                    <Col>\r\n                        <Form onSubmit={this.handleSubmit}>\r\n                            <FormGroup>\r\n                                <Label for=\"email\">Email</Label>\r\n                                <Input type=\"email\" name=\"email\" id=\"email\" value={this.state.email} onChange={this.handleChange}/>\r\n                            </FormGroup>\r\n                            <FormGroup>\r\n                                <Label for=\"password\">Confirm Password</Label>\r\n                                <Input type=\"password\" name=\"password\" id=\"password\" value={this.state.password} onChange={this.handleChange}/>\r\n                            </FormGroup>\r\n                            <Button id=\"cancelButton\" onClick={this.handleClick} block>Cancel</Button>\r\n                            <Button id=\"saveButton\" onClick={this.handleClick} block>Save</Button>\r\n                            <Alert isOpen={this.state.message !== \"\"} toggle={this.handleDismiss} color={this.state.color}>{this.state.message}</Alert>\r\n                        </Form>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n            );\r\n        else \r\n            // Profile\r\n            return (\r\n            <Container fluid>\r\n                <Row>\r\n                    <Col>\r\n                        <img id=\"ProfileImage\" className=\"img-fluid\" src={this.props.user.avatar} alt=\"Profile\" />\r\n                        <p className=\"text-center\">{this.props.user.email}</p>\r\n                        <Button id=\"editButton\" block className=\"text-center\" onClick={this.handleClick}>Edit Email</Button>\r\n                        <Button id=\"passwordButton\" block className=\"text-center\" onClick={this.handleClick}>Password Reset</Button>\r\n                        <Alert isOpen={this.state.message !== \"\"} toggle={this.handleDismiss} color={this.state.color}>{this.state.message}</Alert>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n            );\r\n    }\r\n};\r\n\r\nProfile.propTypes = {\r\n    user: PropTypes.object,\r\n    identityChange: PropTypes.func,\r\n    sendPasswordReset: PropTypes.func,\r\n}\r\n\r\nexport default Profile;","import jsPDF from 'jspdf';\r\nimport images from '../data/images.json';\r\n/**\r\n * PDF Module\r\n * @module PDF\r\n */\r\n\r\n // Parameters \r\n var blockedKeys = [\"userId\"];\r\n var startHeight = 25;\r\n var startIndent = 35;\r\n var endHeight = 275;\r\n var newLineHeight = 10;\r\n var indentWidth = 3;\r\n\r\n/**\r\n * Converts an Escape Room to PDF\r\n * @param {EscapeRoom} escapeRoom \r\n */\r\nfunction escapeRoomToPDF(escapeRoom){\r\n    let doc = jsPDF('p','mm','a4');\r\n    let x = startIndent; let y = startHeight;\r\n    doc.addImage(images.logo,'PNG',x + 55,y);\r\n    y+=newLineHeight;\r\n    let convertedObject = convertObject(escapeRoom,doc,x,y);\r\n    convertedObject.doc.save(escapeRoom.details.name+\".pdf\");\r\n}\r\n\r\n/**\r\n * Converts a JS object to a PDF Document\r\n * @param {EscapeRoom} escapeRoom \r\n * @param {jsPDF} doc \r\n * @param {int} x \r\n * @param {int} y \r\n * @returns {jsPDF} doc\r\n */\r\nfunction convertObject(escapeRoom,doc,x,y){\r\n    console.log(escapeRoom);\r\n    for(let key of Object.keys(escapeRoom)){\r\n        // Page Control \r\n        // Blocked Keys\r\n        if(blockedKeys.includes(key)){\r\n            continue;\r\n        }\r\n        else if(key.includes('DATA')){\r\n            //Add Images from DATA url\r\n            doc.addPage();\r\n            y=startHeight;\r\n            doc = drawTitle(doc, key, x, y);\r\n            doc.addImage(escapeRoom[key],'JPEG',x,y);\r\n            y=endHeight;\r\n            continue;\r\n        }else if(y >= 275){\r\n            // Page height exceeded\r\n            doc.addPage();\r\n            y=startHeight;\r\n        } else {\r\n            // New Line\r\n            y+=newLineHeight;\r\n        }\r\n        // Object Rendering \r\n        // Draw Array\r\n        if(typeof escapeRoom[key]==='object'&&escapeRoom[key].constructor===Array){\r\n            // Object Array \r\n            if (escapeRoom[key].length > 0 && typeof escapeRoom[key][0]===\"object\"){\r\n                doc = drawTitle(doc, key, x, y);\r\n                x+=indentWidth;\r\n                for(let childObject of escapeRoom[key]){\r\n                    y+=newLineHeight;\r\n                    doc = drawTitle(doc, `${childObject.name} (${childObject._id})`, x, y);\r\n                    x+=indentWidth;\r\n                    ({doc, x, y} = convertObject(childObject,doc,x,y));\r\n                    x-=indentWidth;\r\n                }\r\n                x-=indentWidth;\r\n            } else if(escapeRoom[key].length > 0 && typeof escapeRoom[key][0]===\"string\"){\r\n                doc.text(capitaliseFirstLetter(key)+\":\",x,y);\r\n                for(let id of escapeRoom[key]){\r\n                    y+=newLineHeight;\r\n                    x+=indentWidth;\r\n                    doc.text(id,x,y);\r\n                    x-=indentWidth;\r\n                }   \r\n            } else if(escapeRoom[key].length === 0){\r\n                doc.text(capitaliseFirstLetter(key)+\":\",x,y);\r\n            }\r\n        }\r\n        // Draw Object\r\n        else if(typeof escapeRoom[key]==='object'){\r\n            doc = drawTitle(doc, key, x, y);\r\n            x+=indentWidth;\r\n            ({doc, x, y} = convertObject(escapeRoom[key],doc,x,y));\r\n            x-=indentWidth;\r\n        }\r\n        // Draw Key\r\n        else{\r\n            doc.text(capitaliseFirstLetter(key)+\": \"+escapeRoom[key],x,y);\r\n        }   \r\n    }\r\n    return {doc, x, y}\r\n}\r\n\r\n/**\r\n * Draws an underlined title\r\n * @param {jsPDF} doc \r\n * @param {string} text \r\n * @param {int} x \r\n * @param {int} y \r\n * @returns {jsPDF} doc\r\n */\r\nfunction drawTitle(doc, text, x, y){\r\n    text = capitaliseFirstLetter(text);\r\n    doc.setTextColor(255,0,0);\r\n    doc.text(text,x,y);\r\n    doc.line(x, y + 3, x + 140, y + 3);\r\n    doc.setTextColor(0,0,0);\r\n    return doc;\r\n}\r\n\r\n/**\r\n * Capitalizes first character of a string\r\n * @param {string} text \r\n */\r\nfunction capitaliseFirstLetter(text){\r\n    return text.replace(/^\\w/, c => c.toUpperCase());\r\n}\r\n\r\nexport {escapeRoomToPDF};\r\n","import React, {Component} from 'react';\r\nimport { Container, Row, Col, Dropdown, DropdownToggle, DropdownMenu, DropdownItem , ListGroup, ListGroupItem , Button } from 'reactstrap';\r\nimport { saveAs } from 'file-saver';\r\nimport Modal from '../models/Modal';\r\nimport {escapeRoomToPDF} from '../pdf/pdf';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for Dashboard that shows users escape rooms \r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Dashboard extends Component {\r\n    /** Creates Dashboard */\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            dropdownOpen: [false,false]\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles Toggle\r\n     * @function\r\n     * @param {int} i index\r\n     * @param {Event} e \r\n     */\r\n    handleToggle = (i) => (e) => {\r\n        var dropdownOpen = this.state.dropdownOpen;\r\n        dropdownOpen[i] = !dropdownOpen[i];\r\n        this.setState({dropdownOpen});\r\n    }\r\n\r\n    /**\r\n     * Handles Add Escape Room Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleClick = async (e) => {\r\n        if(this.props.newEscapeRoom)\r\n            this.props.newEscapeRoom();\r\n    }\r\n\r\n    /**\r\n     * Saves an Escape Room as JSON \r\n     * @param {EscapeRoom} escapeRoom \r\n     */\r\n    saveJSON(escapeRoom) {\r\n        const blob = new Blob([JSON.stringify(escapeRoom)],{type:'text/plain;charset=utf-8'});\r\n        saveAs(blob, escapeRoom.details.name+\".json\");\r\n    }\r\n\r\n    /**\r\n     * Saves an Escape Room as PDF\r\n     * @param {EscapeRoom} escapeRoom \r\n     */\r\n    savePDF(escapeRoom) {\r\n        escapeRoomToPDF(escapeRoom);\r\n    }\r\n\r\n    /**\r\n     * Handles Dropdown Menu Item Click\r\n     * @function\r\n     * @param {int} i index\r\n     * @param {string} action \r\n     * @param {Event} e\r\n     */\r\n    handleItemClick = (i, action) => (e) => {\r\n        const escapeRoom = this.props.escapeRooms[i];\r\n        switch(action){\r\n            case 'EDIT':\r\n                if(this.props.editEscapeRoom)   \r\n                    this.props.editEscapeRoom(escapeRoom);\r\n                break;\r\n            case 'JSON':\r\n                this.saveJSON(escapeRoom);\r\n                break;\r\n            case 'PDF':\r\n                this.savePDF(escapeRoom);\r\n                break;\r\n            case 'DELETE':\r\n                if(this.props.deleteEscapeRoom)\r\n                    this.props.showModal(new Modal(\"Warning\",\"Are you sure you want to delete \"+escapeRoom.details.name+\"?\",\"Yes\",()=>{this.props.deleteEscapeRoom(escapeRoom)},\"No\",()=>{}));\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Maps Escape Rooms to List Item\r\n     * @function\r\n     * @param {EscapeRoom} escapeRoom\r\n     * @param {int} i index\r\n     */\r\n    mapEscapeRoomToList = (escapeRoom,i) => {\r\n        return (\r\n        <ListGroupItem key={i}>{escapeRoom.details.name}\r\n            <Dropdown style={{display:'inline', position: 'absolute', right:'20px'}} isOpen={this.state.dropdownOpen[i]} toggle={this.handleToggle(i)}>\r\n                <DropdownToggle caret/>\r\n                <DropdownMenu right>\r\n                    <DropdownItem onClick={this.handleItemClick(i,'EDIT')} disabled={this.props.escapeRooms[i].components[0].version!==undefined?false:true}>Edit</DropdownItem>\r\n                    <DropdownItem onClick={this.handleItemClick(i,'JSON')}>Export as JSON</DropdownItem>\r\n                    <DropdownItem onClick={this.handleItemClick(i,'PDF')}>Export as PDF</DropdownItem>\r\n                    <DropdownItem onClick={this.handleItemClick(i,'DELETE')}>Delete</DropdownItem>\r\n                </DropdownMenu>\r\n            </Dropdown>\r\n        </ListGroupItem>)\r\n    };\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        const escapeRooms = this.props.escapeRooms;\r\n        return (\r\n            <Container>\r\n                <Row>\r\n                    <Col>\r\n                        <Button block onClick={this.handleClick}>NEW</Button>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <ListGroup>\r\n                            {escapeRooms.map(this.mapEscapeRoomToList)}\r\n                        </ListGroup>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n};\r\n\r\nDashboard.propTypes = {\r\n    newEscapeRoom: PropTypes.func,\r\n    escapeRooms: PropTypes.array,\r\n    editEscapeRoom: PropTypes.func,\r\n    deleteEscapeRoom: PropTypes.func,\r\n    showModal: PropTypes.func,\r\n}\r\n\r\nexport default Dashboard;","import React, {Component}  from 'react';\r\nimport { Container, Dropdown, DropdownToggle , DropdownMenu , DropdownItem , Row, Col, Nav, NavItem, NavLink, TabContent, TabPane , Button } from 'reactstrap';\r\nimport { Details, Accessibility, Design } from './index';\r\nimport classnames from 'classnames';\r\nimport { saveAs } from 'file-saver';\r\nimport {escapeRoomToPDF} from '../pdf/pdf';\r\nimport EscapeRoom from '../models/EscapeRoom';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/EscapeRoomDesigner.css';\r\n\r\n/**\r\n * Class for Designing an Escape Room, Manages tabs\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass EscapeRoomDesigner extends Component {\r\n    /** Creates EscapeRoom Designer */\r\n    constructor(){\r\n        super();\r\n        this.state = {activeTab:'design', dropdownOpen: false};\r\n    }\r\n\r\n    /**\r\n     * Saves an EscapeRoom as JSON\r\n     * @param {EscapeRoom} escapeRoom \r\n     */\r\n    saveJSON(escapeRoom) {\r\n        const blob = new Blob([JSON.stringify(escapeRoom)],{type:'text/plain;charset=utf-8'});\r\n        saveAs(blob, escapeRoom.details.name+\".json\");\r\n    }\r\n\r\n    /**\r\n     * Saves Escape Room as PDF\r\n     * @param {EscapeRoom} escapeRoom \r\n     */\r\n    savePDF(escapeRoom) {\r\n        escapeRoomToPDF(escapeRoom);\r\n    }\r\n\r\n    /**\r\n     * Handles Button Clicks\r\n     * @function\r\n     * @param {string} action\r\n     * @param {Event} e\r\n     */\r\n    handleClick = (action) => (e) => {\r\n        switch(action){\r\n            case 'EXIT':\r\n                if(this.props.saveEscapeRoom)\r\n                    this.props.saveEscapeRoom(this.props.escapeRoom);\r\n                break;\r\n            case 'JSON':\r\n                if(this.props.saveEscapeRoom)\r\n                    this.props.saveEscapeRoom(this.props.escapeRoom);\r\n                this.saveJSON(this.props.escapeRoom);\r\n                break;\r\n            case 'PDF':\r\n                if(this.props.saveEscapeRoom)\r\n                    this.props.saveEscapeRoom(this.props.escapeRoom);\r\n                this.savePDF(this.props.escapeRoom);\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggles Bool\r\n     * @param {Event} e\r\n     */\r\n    handleToggle = (e) => {\r\n        this.setState({dropdownOpen: !this.state.dropdownOpen});\r\n    }\r\n\r\n    /**\r\n     * Toggles Active Tab\r\n     * @param {string} tab\r\n     * @param {Event} e \r\n     */\r\n    handleNav = (tab) => (e) => {\r\n        if (this.state.activeTab !== tab) {\r\n            this.setState({\r\n                activeTab: tab\r\n            })\r\n        }\r\n    }\r\n\r\n    /** React Lifecycle Called when Component Mounts */\r\n    componentDidMount(){\r\n        const escapeRoom = this.props.escapeRoom;\r\n        if(escapeRoom===undefined){\r\n            this.props.history.push('/');\r\n        }\r\n    }\r\n\r\n    /** React Lifecycle Called when Components Updates */\r\n    componentDidUpdate(prevProps,prevState){\r\n        if(prevState.activeTab!==this.state.activeTab){\r\n            this.toggleSvgs();\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Hides SVGs when design not current tab\r\n     * @function \r\n     */\r\n    toggleSvgs=()=>{\r\n        let lines = document.querySelectorAll(\"body > div:not(#root)\");\r\n        if(this.state.activeTab!==\"design\"){\r\n            for (let i = 0; i < lines.length;i++){\r\n                lines[i].style.display = 'none';\r\n            }\r\n        } else {\r\n            for (let i = 0; i < lines.length;i++){\r\n                lines[i].style.display = 'block';\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calculates Output of Component\r\n     */\r\n    calculateOutput=(id)=>{\r\n        return EscapeRoom.calculateComponentOutput(this.props.escapeRoom,id);\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <Container fluid>\r\n                <Row className=\"save-options\">\r\n                    <Col xs=\"6\" md=\"3\" lg=\"3\"><Button block onClick={this.handleClick('EXIT')}>Save and Exit</Button></Col>\r\n                    <Col xs=\"6\" md=\"3\" lg=\"3\">\r\n                        <Dropdown isOpen={this.state.dropdownOpen} toggle={this.handleToggle}>\r\n                            <DropdownToggle  className=\"full-width\" caret>Save and Export</DropdownToggle>\r\n                            <DropdownMenu right>\r\n                                <DropdownItem onClick={this.handleClick('JSON')}>Export as JSON</DropdownItem>\r\n                                <DropdownItem onClick={this.handleClick('PDF')}>Export as PDF</DropdownItem>\r\n                            </DropdownMenu>\r\n                        </Dropdown>\r\n                    </Col>\r\n                    <Col xs=\"6\"/>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <Nav tabs>\r\n                            <NavItem>\r\n                                <NavLink\r\n                                    className={classnames({active: this.state.activeTab === 'details'})}\r\n                                    onClick={this.handleNav('details')}    \r\n                                >\r\n                                    Details\r\n                                </NavLink>\r\n                            </NavItem>\r\n                            <NavItem>\r\n                                <NavLink\r\n                                    className={classnames({active: this.state.activeTab === 'accessibility'})}\r\n                                    onClick={this.handleNav('accessibility')}    \r\n                                >\r\n                                    Accessibility\r\n                                </NavLink>\r\n                            </NavItem>\r\n                            <NavItem>\r\n                                <NavLink\r\n                                    className={classnames({active: this.state.activeTab === 'design'})}\r\n                                    onClick={this.handleNav('design')}    \r\n                                >\r\n                                    Design\r\n                                </NavLink>\r\n                            </NavItem>\r\n                        </Nav>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <TabContent activeTab={this.state.activeTab}>\r\n                            <TabPane tabId=\"details\">\r\n                                <Details details={this.props.escapeRoom.details} updateDetails={this.props.updateDetails}/>\r\n                            </TabPane>\r\n                            <TabPane tabId=\"accessibility\">\r\n                                <Accessibility accessibility={this.props.escapeRoom.accessibility} updateAccessibility={this.props.updateAccessibility}/>\r\n                            </TabPane>\r\n                            <TabPane tabId=\"design\">\r\n                                <Design calculateOutput={this.calculateOutput} components={{components:this.props.escapeRoom.components}} showModal={this.props.showModal} accessibility={this.props.escapeRoom.accessibility} addComponent={this.props.addComponent} removeComponent={this.props.removeComponent} updateComponent={this.props.updateComponent} addRelationship={this.props.addRelationship} removeRelationship={this.props.removeRelationship}/>\r\n                            </TabPane>\r\n                        </TabContent>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n};\r\n\r\nEscapeRoomDesigner.propTypes = {\r\n    saveEscapeRoom: PropTypes.func,\r\n    escapeRoom: PropTypes.instanceOf(EscapeRoom),\r\n    history: PropTypes.object,\r\n    updateDetails: PropTypes.func,\r\n    updateAccessibility: PropTypes.func,\r\n    addComponent: PropTypes.func,\r\n    removeComponent: PropTypes.func,\r\n    updateComponent: PropTypes.func,\r\n    addRelationship: PropTypes.func,\r\n    removeRelationship: PropTypes.func,\r\n}\r\n\r\nexport default EscapeRoomDesigner;","import React, {Component} from 'react';\r\nimport { Container, Row, Col, Form, FormGroup, Label, Input, UncontrolledTooltip} from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for Editing Escape Room Details\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Details extends Component {\r\n    /**\r\n     * Handles Input Change\r\n     * @param {Event} event\r\n     */\r\n    handleChange = (event) => { \r\n        var state = {};\r\n        state[event.target.id] = event.target.value;    \r\n        this.props.updateDetails(state);\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render(){\r\n        return (\r\n        <Container fluid>\r\n            <Row>\r\n                <Col>\r\n                    <Form>\r\n                        <FormGroup>\r\n                            <Label for=\"name\">Room Name <span id=\"nameTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"text\" name=\"name\" id=\"name\" placeholder=\"Room Name\" value={this.props.details.name} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"nameTooltip\">The name of your design</UncontrolledTooltip>\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label for=\"designers\">Designers <span id=\"designersTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"text\" name=\"designers\" id=\"designers\" placeholder=\"Designer(s)\" value={this.props.details.designers} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"designersTooltip\">Names of the designers</UncontrolledTooltip>\r\n                        </FormGroup>                        \r\n                        <FormGroup>\r\n                            <Label for=\"theme\">Theme <span id=\"themeTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"text\" name=\"theme\" id=\"theme\" placeholder=\"theme\" value={this.props.details.theme} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"themeTooltip\">The theme of the room: Noir, Medieval, Heist ect.</UncontrolledTooltip>\r\n                        </FormGroup>                        \r\n                        <FormGroup>\r\n                            <Label>Players <span id=\"playersTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"text\" name=\"minPlayers\" id=\"minPlayers\" placeholder=\"Min\" value={this.props.details.minPlayers} onChange={this.handleChange}/>\r\n                            <Input type=\"text\" name=\"maxPlayers\" id=\"maxPlayers\" placeholder=\"Max\" value={this.props.details.maxPlayers} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"playersTooltip\">The maximum and minimum amount of players your room is designed for</UncontrolledTooltip>\r\n                        </FormGroup>                        \r\n                        <FormGroup>\r\n                            <Label for=\"targetTime\">Target Time <span id=\"targetTimeTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"text\" name=\"targetTime\" id=\"targetTime\" placeholder=\"Time\" value={this.props.details.targetTime} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"targetTimeTooltip\">Can be the time players have to try and escape by, or the estimated time it will take players to complete the room</UncontrolledTooltip>\r\n                        </FormGroup>                        \r\n                        <FormGroup>\r\n                            <Label for=\"difficulty\">Difficulty <span id=\"difficultyTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"range\" min=\"1\" max=\"5\" name=\"difficulty\" id=\"difficulty\" value={this.props.details.difficulty} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"difficultyTooltip\">How difficult the room is rated out of 5. It is up to the designer to gauge difficulty</UncontrolledTooltip>\r\n                        </FormGroup>\r\n                    </Form>\r\n                </Col>\r\n                <Col>\r\n                    <Form>\r\n                        <FormGroup>\r\n                            <Label for=\"objective\">Objective <span id=\"objectiveTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"text\" name=\"objective\" id=\"objective\" placeholder=\"Main Objective\" value={this.props.details.objective} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"objectiveTooltip\">The objective of the room, for example: retrieve the diamond, foil the mad scientists evil plans ect.</UncontrolledTooltip>\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label for=\"description\">Description <span id=\"descriptionTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <Input type=\"textarea\" name=\"description\" id=\"description\" placeholder=\"Description\" value={this.props.details.description} onChange={this.handleChange}/>\r\n                            <UncontrolledTooltip target=\"descriptionTooltip\">A descriptive paragraph of the room, you can define the overall story here or any extra details that may be needed to set it up</UncontrolledTooltip>\r\n                        </FormGroup>       \r\n                        <FormGroup>\r\n                            <Label for=\"estimatedCost\">Estimated Cost <span id=\"estimatedCostTooltip\"><i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i></span></Label>\r\n                            <p>{this.props.details.estimatedCost}</p>    \r\n                            <UncontrolledTooltip target=\"estimatedCostTooltip\">When you set estimated cost values on components in the design they will be totalled up and the total will be displayed here</UncontrolledTooltip>\r\n                        </FormGroup>             \r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n        </Container>)\r\n    }\r\n}\r\n\r\nDetails.propTypes = {\r\n    updateDetails: PropTypes.func,\r\n    details: PropTypes.instanceOf(Details)\r\n}\r\n\r\nexport default Details;","import React, {Component} from 'react';\r\nimport { Container, Row, Col, Card, CustomInput, UncontrolledTooltip } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/Accessibility.css';\r\n\r\n/** \r\n * Class for Editing an EscapeRoom's Accessibility \r\n * @extends Component \r\n * @author Alistair Quinn\r\n */\r\nclass Accessibility extends Component {\r\n    /** \r\n     * Updates visual changes \r\n     * @function\r\n     * @param {Event} event\r\n     */\r\n    handleVisualChange = (event) => {\r\n        var state = {...this.props.accessibility};\r\n        state.visual[event.target.id] = event.target.value===true?false:true;\r\n        this.props.updateAccessibility(state);\r\n    }\r\n\r\n    /** \r\n     * Updates physical change \r\n     * @function\r\n     * @param {Event} event\r\n     */\r\n    handlePhysicalChange = (event) => {\r\n        var state = {...this.props.accessibility};\r\n        state.physical[event.target.id] = event.target.value===true?false:true;\r\n        this.props.updateAccessibility(state);\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render(){\r\n        return (\r\n            <Container fluid className=\"accessibility\">\r\n                <Row>\r\n                    <Col>\r\n                        <Row>\r\n                            <Col>\r\n                                <h1 className=\"text-center text-success\">Visual Accessibility</h1>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <h2>Colour Blindness</h2>\r\n                                <p>\r\n                                    Please select the types of colour blindness your design must take into account\r\n                                </p>\r\n                            </Col>\r\n                            <Col>\r\n                                <h2>Other</h2>\r\n                                <p>\r\n                                    These are options to indicate restrictions on the design related to visual impairments such as blindness \r\n                                </p>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <Card>\r\n                                    <h6 className=\"text-success\">Red-Green Colour Blindness</h6>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"protanomaly\" id=\"protanomaly\" label=\"Protanomaly\" value={this.props.accessibility.visual.protanomaly} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"protanomalyTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"protanomalyTooltip\">Protanomaly: In males with protanomaly, the red cone photopigment is abnormal. Red, orange, and yellow appear greener and colors are not as bright. This condition is mild and doesn’t usually interfere with daily living. Protanomaly is an X-linked disorder estimated to affect 1 percent of males.</UncontrolledTooltip>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"protanopia\" id=\"protanopia\" label=\"Protanopia\" value={this.props.accessibility.visual.protanopia} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"protanopiaTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"protanopiaTooltip\">Protanopia: In males with protanopia, there are no working red cone cells. Red appears as black. Certain shades of orange, yellow, and green all appear as yellow. Protanopia is an X-linked disorder that is estimated to affect 1 percent of males.</UncontrolledTooltip>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"deuteranomaly\" id=\"deuteranomaly\" label=\"Deuteranomaly\" value={this.props.accessibility.visual.deuteranomaly} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"deuteranomalyTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"deuteranomalyTooltip\">Deuteranomaly: In males with deuteranomaly, the green cone photopigment is abnormal. Yellow and green appear redder and it is difficult to tell violet from blue. This condition is mild and doesn’t interfere with daily living. Deuteranomaly is the most common form of color blindness and is an X-linked disorder affecting 5 percent of males.</UncontrolledTooltip>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"deuteranopia\" id=\"deuteranopia\" label=\"Deuteranopia\" value={this.props.accessibility.visual.deuteranopia} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"deuteranopiaTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"deuteranopiaTooltip\">Deuteranopia: In males with deuteranopia, there are no working green cone cells. They tend to see reds as brownish-yellow and greens as beige. Deuteranopia is an X-linked disorder that affects about 1 percent of males.</UncontrolledTooltip>\r\n                                    </Row>\r\n\r\n                                    <h6 className=\"text-success\">Blue-Yellow Colour Blindness</h6>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"tritanomaly\" id=\"tritanomaly\" label=\"Tritanomaly\" value={this.props.accessibility.visual.tritanomaly} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"tritanomalyTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"tritanomalyTooltip\">Tritanomaly: People with tritanomaly have functionally limited blue cone cells. Blue appears greener and it can be difficult to tell yellow and red from pink. Tritanomaly is extremely rare. It is an autosomal dominant disorder affecting males and females equally.</UncontrolledTooltip>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"tritanopia\" id=\"tritanopia\" label=\"Tritanopia\" value={this.props.accessibility.visual.tritanopia} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"tritanopiaTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"tritanopiaTooltip\">Tritanopia: People with tritanopia, also known as blue-yellow color blindness, lack blue cone cells. Blue appears green and yellow appears violet or light grey. Tritanopia is an extremely rare autosomal recessive disorder affecting males and females equally.</UncontrolledTooltip>\r\n                                    </Row>\r\n            \r\n                                    <h6 className=\"text-success\">Complete Colour Blindness</h6>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"coneMonochromacy\" id=\"coneMonochromacy\" label=\"Cone Monochromacy\" value={this.props.accessibility.visual.coneMonochromacy} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"coneMonochromacyTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"coneMonochromacyTooltip\">Cone Monochromacy: This rare form of color blindness results from a failure of two of the three cone cell photopigments to work. There is red cone monochromacy, green cone monochromacy, and blue cone monochromacy. People with cone monochromacy have trouble distinguishing colors because the brain needs to compare the signals from different types of cones in order to see color. When only one type of cone works, this comparison isn’t possible. People with blue cone monochromacy, may also have reduced visual acuity, near-sightedness, and uncontrollable eye movements, a condition known as nystagmus. Cone monochromacy is an autosomal recessive disorder.</UncontrolledTooltip>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"rodMonochromacy\" id=\"rodMonochromacy\" label=\"Rod Monochromacy\" value={this.props.accessibility.visual.rodMonochromacy} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"rodMonochromacyTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"rodMonochromacyTooltip\">Rod Monochromacy: This type of monochromacy is rare and is the most severe form of color blindness. It is present at birth. None of the cone cells have functional photopigments. Lacking all cone vision, people with rod monochromacy see the world in black, white, and gray. And since rods respond to dim light, people with rod monochromacy tend to be photophobic – very uncomfortable in bright environments. They also experience nystagmus. Rod monochromacy is an autosomal recessive disorder.</UncontrolledTooltip>\r\n                                    </Row>\r\n                                </Card>\r\n                            </Col>\r\n                            <Col>\r\n                                <Card>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"largeFonts\" id=\"largeFonts\" label=\"Large Fonts\" value={this.props.accessibility.visual.largeFonts} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"largeFontsTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"largeFontsTooltip\">If your design requires larger fonts as you are expecting players with issues with short sightedness, this is a suitable option to select</UncontrolledTooltip>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"highContrast\" id=\"highContrast\" label=\"High Contrast\" value={this.props.accessibility.visual.highContrast} onChange={this.handleVisualChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"highContrastTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"highContrastTooltip\">If your design requires a contrasting colour scheme to be used to make text more readable, select this option</UncontrolledTooltip>\r\n                                    </Row>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                    <Col>\r\n                        <Row>\r\n                            <Col>\r\n                                <h1 className=\"text-center text-primary\">Physical Accessibility</h1>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <p>\r\n                                    These options are to indicate restrictions on the design related to physical impairments for example wheelchair accessibility and motor functions\r\n                                </p>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                <Card>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"> <CustomInput type=\"checkbox\" name=\"wheelchairAccessible\" id=\"wheelchairAccessible\" label=\"Wheelchair Accessible\" value={this.props.accessibility.physical.wheelchairAccessible} onChange={this.handlePhysicalChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"wheelchairAccessibleTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"wheelchairAccessibleTooltip\">If your design is required to be wheelchair accessible select this option</UncontrolledTooltip>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col xs=\"8\"><CustomInput type=\"checkbox\" name=\"motorAccessible\" id=\"motorAccessible\" label=\"Accessible for players with motor function issues\" value={this.props.accessibility.physical.motorAccessible} onChange={this.handlePhysicalChange}/></Col>\r\n                                        <Col xs=\"4\" id=\"motorAccessibleTooltip\"><i className=\"fa fa-question-circle full-width-right\" aria-hidden=\"true\"></i></Col>\r\n                                        <UncontrolledTooltip target=\"motorAccessibleTooltip\">If your design is required to be wheelchair accessible select this option</UncontrolledTooltip>\r\n                                    </Row>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <p>\r\n                            These options are designed to indicate the attempted accessibility of your design. These options will flag puzzles in your design that do not meet these restrictions\r\n                        </p>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nAccessibility.propTypes = {\r\n    accessibility: PropTypes.instanceOf(Accessibility)\r\n}\r\n\r\nexport default Accessibility;","import React, {Component} from 'react';\r\nimport { Container, Row, Col } from 'reactstrap';\r\nimport { Pallet, ComponentArranger, ComponentDetails } from './index';\r\nimport PropTypes from 'prop-types';\r\nimport Accessibility from './Accessibility';\r\n\r\n/**\r\n * Class for Desinging an Escape Room\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Design extends Component {\r\n    /** Creates Design */\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {selected: {}};\r\n    }\r\n\r\n    /**\r\n     * Handles Component Click \r\n     * @function\r\n     * @param {Component} component\r\n     * @param {Event} e\r\n     */\r\n    handleComponentClick = (component) => (e) => {\r\n        e.stopPropagation();\r\n        this.setState({selected:component});\r\n    }\r\n\r\n    /**\r\n     * Updates Selected Component \r\n     * @function\r\n     * @param {Component} component\r\n     */\r\n    updateComponent = (component) => {\r\n        this.props.updateComponent(component);\r\n        this.setState({selected:{...this.state.selected,...component}});\r\n    }\r\n\r\n    /**\r\n     * Finds a component by ID\r\n     * @param {string} id\r\n     * @returns {Component}\r\n     */\r\n    findComponent = (id) => {\r\n        return this.props.components.components.find(component=>component._id===id);\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render(){\r\n        return (\r\n            <Container fluid>\r\n                <Row>\r\n                    <Col md=\"2\">\r\n                        <Pallet/>\r\n                    </Col>\r\n                    <Col md=\"8\">\r\n                        <ComponentArranger renderTrigger={JSON.stringify(this.props.components.components)} findComponent={this.findComponent} showModal={this.props.showModal} handleComponentClick={this.handleComponentClick} updateComponent={this.props.updateComponent} addComponent={this.props.addComponent} removeComponent={this.props.removeComponent} addRelationship={this.props.addRelationship} components={this.props.components.components}/>            \r\n                    </Col>\r\n                    <Col md=\"2\">\r\n                        <ComponentDetails calculateOutput={this.props.calculateOutput} accessibility={this.props.accessibility} selected={this.state.selected} updateComponent={this.updateComponent}/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nDesign.propTypes = {\r\n    updateComponent: PropTypes.func,\r\n    components: PropTypes.array,\r\n    findComponent: PropTypes.func,\r\n    showModal: PropTypes.func,\r\n    handleComponentClick: PropTypes.func,\r\n    addComponent: PropTypes.func,\r\n    removeComponent: PropTypes.func,\r\n    addRelationship: PropTypes.func,\r\n    calculateOutput: PropTypes.func,\r\n    accessibility: PropTypes.instanceOf(Accessibility)\r\n}\r\n\r\nexport default Design;","import React, {Component} from 'react';\r\nimport { UncontrolledTooltip } from 'reactstrap';\r\nimport { DragSource } from 'react-dnd';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/Component.css';\r\n\r\n// Drag sources and drop targets only interact\r\n// if they have the same string type.\r\n// You want to keep types in a separate file with\r\n// the rest of your app's constants.\r\nconst Types = {\r\n  AREA: \"AREA\"\r\n};\r\n\r\n/**\r\n * Specifies the drag source contract.\r\n * Only `beginDrag` function is required.\r\n */\r\nconst componentSource = {\r\n  /**\r\n   * Return the data describing the dragged item\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @param {Component} component\r\n   * @returns {object} \r\n   */\r\n  beginDrag(props, monitor, component) {\r\n    // Return the data describing the dragged item\r\n    var item = {id: props.id}\r\n    return item;\r\n  }\r\n};\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n * @param {Connect} connect\r\n * @param {Monitor} monitor\r\n * @returns {object} Props\r\n */\r\nfunction collect(connect, monitor) {\r\n  return {\r\n    // Call this function inside render()\r\n    // to let React DnD handle the drag events:\r\n    connectDragSource: connect.dragSource(),\r\n    // You can ask the monitor about the current drag state:\r\n    isDragging: monitor.isDragging()\r\n  };\r\n}\r\n\r\n/** \r\n * Class for AreaPalletItem\r\n * @extends Component\r\n * @author Alistair Quinn \r\n */\r\nclass AreaPalletItem extends Component{\r\n  /** \r\n   * React Lifecycle Render\r\n   * Renders Layout\r\n   * @returns {JSX}\r\n   */\r\n  render() {\r\n      let id=\"Area\";\r\n      let classNames = id + \" component pallet-item\"\r\n      return this.props.connectDragSource(\r\n          <div className={classNames} id={id} >\r\n            <p>{id}</p>     \r\n            <UncontrolledTooltip target={id}>Represents a collection of components. Can be used to represent physical areas such as two seperate rooms or logical areas</UncontrolledTooltip>\r\n          </div>\r\n      )\r\n  }\r\n};\r\n\r\nAreaPalletItem.propTypes = {\r\n  id: PropTypes.string,\r\n}\r\n\r\nexport default DragSource(Types.AREA, componentSource, collect)(AreaPalletItem);","import React, {Component} from 'react';\r\nimport { UncontrolledTooltip } from 'reactstrap';\r\nimport { DragSource } from 'react-dnd';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/Component.css';\r\n\r\n// Drag sources and drop targets only interact\r\n// if they have the same string type.\r\n// You want to keep types in a separate file with\r\n// the rest of your app's constants.\r\nconst Types = {\r\n  COMPONENT: 'COMPONENT'\r\n};\r\n\r\n/**\r\n * Specifies the drag source contract.\r\n * Only `beginDrag` function is required.\r\n */\r\nconst componentSource = {\r\n  /**\r\n   * Return the data describing the dragged item\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @param {Component} component\r\n   * @returns {object} \r\n   */\r\n  beginDrag(props, monitor, component) {\r\n    // Return the data describing the dragged item\r\n    var item = {id: props.id}\r\n    return item;\r\n  }\r\n};\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n * @param {Connect} connect\r\n * @param {Monitor} monitor\r\n * @returns {object} Props\r\n */\r\nfunction collect(connect, monitor) {\r\n  return {\r\n    // Call this function inside render()\r\n    // to let React DnD handle the drag events:\r\n    connectDragSource: connect.dragSource(),\r\n    // You can ask the monitor about the current drag state:\r\n    isDragging: monitor.isDragging()\r\n  };\r\n}\r\n\r\n/** \r\n * Class for PalletItem\r\n * @extends Component\r\n * @author Alistair Quinn \r\n */\r\nclass PalletItem extends Component{\r\n  descriptions = {\r\n    Puzzle:\"Represents a puzzle, or any type of component that accepts and combines inputs\",\r\n    Prop:\"Can represent any prop in the escape room such as a key, ornament, book, poster ect. It is up to the designer what constitutes a prop\",\r\n    Lock:\"Represents a lock, supports multiple types\",\r\n    Event:\"Represents an event in the escape room such as a new room being unlocked\",\r\n    Music:\"Represents music played in the room can be linked together to create a playlist\"\r\n  }\r\n\r\n  /** \r\n   * React Lifecycle Render\r\n   * Renders Layout\r\n   * @returns {JSX}\r\n   */\r\n  render() {\r\n      let id=this.props.id || \"\";\r\n      let classNames = id + \" component pallet-item\";\r\n      return this.props.connectDragSource(\r\n          <div className={classNames} id={id} >\r\n            <p>{id}</p>     \r\n            <UncontrolledTooltip target={id}>{this.descriptions[id]}</UncontrolledTooltip>\r\n          </div>\r\n      )\r\n  }\r\n};\r\n\r\nPalletItem.propTypes = {\r\n  id: PropTypes.string,\r\n}\r\n\r\nexport default DragSource(Types.COMPONENT, componentSource, collect)(PalletItem);","import React, {Component}  from 'react';\r\nimport { Row, Col } from 'reactstrap';\r\nimport AreaPalletItem from './AreaPalletItem';\r\nimport PalletItem from './PalletItem';\r\nimport '../styles/Pallet.css';\r\n\r\n/** \r\n * Class for Pallet \r\n * @extends Component\r\n * @author Alistair Quinn \r\n */\r\nclass Pallet extends Component {\r\n    /**\r\n     * React lifecycle method \r\n     * Renders layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"container-fluid pallet\">\r\n                <Row>\r\n                    <Col className=\"col text-center\">\r\n                        <h3>Pallet</h3>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col xs=\"6\" md=\"12\" lg=\"12\">\r\n                        <AreaPalletItem/>\r\n                    </Col>\r\n                    <Col xs=\"6\" md=\"12\" lg=\"12\">\r\n                        <PalletItem id=\"Puzzle\"/>\r\n                    </Col>\r\n                    <Col xs=\"6\" md=\"12\" lg=\"12\">\r\n                        <PalletItem id=\"Prop\"/>\r\n                    </Col>\r\n                    <Col xs=\"6\" md=\"12\" lg=\"12\">\r\n                        <PalletItem id=\"Lock\"/>\r\n                    </Col>\r\n                    <Col xs=\"6\" md=\"12\" lg=\"12\">\r\n                        <PalletItem id=\"Event\"/>\r\n                    </Col>\r\n                    <Col xs=\"6\" md=\"12\" lg=\"12\">\r\n                        <PalletItem id=\"Music\"/>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nexport default Pallet;","import React, {Component}  from 'react';\r\nimport { Card, CardBody, UncontrolledTooltip } from 'reactstrap';\r\nimport { DropTarget } from 'react-dnd';\r\nimport { Area, Puzzle, Event, Music, Lock, Prop } from '../models/index';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/Component.css';\r\n\r\n/**\r\n * Drag sources and drop targets only interact\r\n * if they have the same string type.\r\n * You want to keep types in a separate file with\r\n * the rest of your app's constants.\r\n */\r\nconst Types = {\r\n    COMPONENT: 'COMPONENT'\r\n}\r\n\r\n/**\r\n * Specifies the drop target contract.\r\n * All methods are optional.\r\n */\r\nconst componentTarget = {\r\n    drop(props,monitor,component){\r\n        if (monitor.didDrop()){\r\n            return;\r\n        }\r\n        const item = monitor.getItem();\r\n        const isInput = props.isInput;\r\n        component.handleComponentDrop(item,isInput);\r\n        return {moved:true};\r\n    }\r\n}\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n * @param {Connect} connect\r\n * @param {Monitor} monitor\r\n * @returns {object} Props\r\n */\r\nfunction collect(connect, monitor) {\r\n    return {\r\n        connectDropTarget: connect.dropTarget(),\r\n        isOver: monitor.isOver(),\r\n        isOverCurrent: monitor.isOver({shallow:true}),\r\n        canDrop: monitor.canDrop(),\r\n        itemType: monitor.getItemType()\r\n    }\r\n}\r\n\r\n/**\r\n * Class for Component drag and drop target for components \r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass ComponentDnDTarget extends Component {\r\n    /**\r\n     * Handles Component Drop\r\n     * @param {Component} item \r\n     * @param {bool} isInput \r\n     */\r\n    handleComponentDrop(item,isInput=true){\r\n        var component = null;\r\n        if (item.id!==undefined){\r\n            switch(item.id){\r\n                case 'Puzzle':\r\n                    component = new Puzzle();\r\n                    break;\r\n                case 'Lock':\r\n                    component = new Lock();\r\n                    break;\r\n                case 'Event':\r\n                    component = new Event();\r\n                    break;\r\n                case 'Music':\r\n                    component = new Music();\r\n                    break;\r\n                case 'Prop':\r\n                    component = new Prop();\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            this.props.addComponent(component,this.props.component._id);\r\n        }else {\r\n            component = item;\r\n            if(component._id!==this.props.component._id)\r\n                this.props.addRelationship(component._id,this.props.component._id,isInput);\r\n        }\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        let id=this.props.component._id;\r\n        var classNames = \"hide-border\";\r\n        if(this.props.isOver && this.props.canDrop){\r\n            classNames+=\" canDrop\";\r\n        } else if(this.props.isOver && !this.props.canDrop){\r\n            classNames+=\" cantDrop\";\r\n        } else if(this.props.canDrop){\r\n            classNames+=\" couldDrop\";\r\n        }\r\n        let tooltip;\r\n        if(this.props.isInput){\r\n            id+=\"-input\"\r\n            classNames+=\" isInput\";\r\n            tooltip = \"Drag another component to this blue square to add it as an input to this component\"\r\n        }\r\n        else {\r\n            id+=\"-output\"\r\n            classNames+=\" isOutput\";\r\n            tooltip = \"Drag another component to this green square to add it as an output of this component\"\r\n        }\r\n        return this.props.connectDropTarget(\r\n            <div key={this.props.component._id} id={id}>\r\n                <Card className={classNames} onClick={this.props.handleComponentClick(this.props.component)}>\r\n                    <CardBody>\r\n\r\n                    </CardBody>\r\n                </Card>\r\n                <UncontrolledTooltip target={id}>{tooltip}</UncontrolledTooltip>\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nComponentDnDTarget.propTypes = {\r\n    addComponent: PropTypes.func,\r\n    component: PropTypes.instanceOf(Area),\r\n    addRelationship: PropTypes.func,\r\n    isOver: PropTypes.bool,\r\n    canDrop: PropTypes.bool,\r\n    isInput: PropTypes.bool,\r\n    handleComponentClick: PropTypes.func\r\n}\r\n\r\nexport default DropTarget(Types.COMPONENT, componentTarget, collect)(ComponentDnDTarget);","import React, {Component} from 'react';\r\nimport { DragSource } from 'react-dnd';\r\nimport ComponentDnDTarget from './ComponentDnDTarget';\r\nimport { Row, Col } from 'reactstrap'\r\nimport '../styles/Component.css';\r\nimport Modal from '../models/Modal';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Drag sources and drop targets only interact\r\n * if they have the same string type.\r\n * You want to keep types in a separate file with\r\n * the rest of your app's constants.\r\n */\r\nconst Types = {\r\n  COMPONENT: 'COMPONENT'\r\n};\r\n\r\n/**\r\n * Specifies the drag source contract.\r\n * Only `beginDrag` function is required.\r\n */\r\nconst componentSource = {\r\n  /**\r\n   * Determins if object can be dragged based on props\r\n   * @param {object} props \r\n   * @returns {bool}\r\n   */\r\n  canDrag(props) {\r\n    return true;\r\n  },\r\n\r\n  /**\r\n   * If your component gets unmounted while dragged\r\n   * (like a card in Kanban board dragged between lists)\r\n   * you can implement something like this to keep its\r\n   * appearance dragged:\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @returns {bool} \r\n   */\r\n  isDragging(props, monitor) {\r\n    return monitor.getItem().id === props.id;\r\n  },\r\n\r\n  /**\r\n   * Return the data describing the dragged item\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @param {Component} component\r\n   * @returns {object} \r\n   */\r\n  beginDrag(props, monitor, component) {\r\n    // Return the data describing the dragged item\r\n    var item = {...props.component};\r\n    return item;\r\n  },\r\n\r\n  /**\r\n   * Checks if component was dragged and didn't drop, check if user wants to delete\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @param {Component} component \r\n   */\r\n  endDrag(props, monitor, component) {\r\n    if (!monitor.didDrop()) {\r\n      if((props.component!==undefined||props.component!==null)&&props.showModal)\r\n        props.showModal(new Modal(\"Warning\", \"Are you sure you want to delete this component?\",\"Yes\",component.removeComponent,\"No\",()=>{}));\r\n        return;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n * @param {Connect} connect\r\n * @param {Monitor} monitor\r\n * @returns {object} Props\r\n */\r\nfunction collect(connect, monitor) {\r\n  return {\r\n    // Call this function inside render()\r\n    // to let React DnD handle the drag events:\r\n    connectDragSource: connect.dragSource(),\r\n    // You can ask the monitor about the current drag state:\r\n    isDragging: monitor.isDragging()\r\n  };\r\n}\r\n\r\n/**\r\n * Class for Component drag and drop source\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass ComponentDnDSource extends Component{\r\n  /** Removes a component */\r\n  removeComponent = ()=>{\r\n    this.props.removeComponent(this.props.component._id);\r\n  }\r\n\r\n  /**\r\n   * React Lifecycle called after component udpates\r\n   * @param {object} prevProps \r\n   */\r\n  componentDidUpdate(prevProps){\r\n    if(this.props.renderTrigger!==prevProps.renderTrigger)\r\n      this.forceUpdate();\r\n  }\r\n\r\n  /**\r\n   * Finds a component \r\n   * @param {Component} component \r\n   */\r\n  findComponent(component){\r\n    if(this.props.findComponent!==undefined){\r\n      return this.props.findComponent(component);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /** Calls forceUpdate */\r\n  update = () => this.forceUpdate()\r\n\r\n  /** React Lifecycle called when Component did Mount */\r\n  componentDidMount() {\r\n    window.addEventListener('click', this.update, true);\r\n    window.addEventListener('scroll', this.update, true);\r\n    window.addEventListener('resize', this.update);\r\n  }\r\n  \r\n  /** React Lifecycle called when Component did Mount */\r\n  componentWillUnmount() {\r\n    window.removeEventListener('click', this.update);\r\n    window.removeEventListener('scroll', this.update);\r\n    window.removeEventListener('resize', this.update)\r\n  }\r\n\r\n  /** \r\n   * React Lifecycle Render\r\n   * @returns {JSX}\r\n   */\r\n  render() {\r\n      var target;\r\n      if (this.props.isTarget){\r\n        target = (\r\n            <Row>\r\n                <Col xs=\"6\"><ComponentDnDTarget isInput={true} component={this.props.component} handleComponentClick={this.props.handleComponentClick} showModal={this.props.showModal} addComponent={this.props.addComponent} removeComponent={this.props.removeComponent} addRelationship={this.props.addRelationship}/></Col>\r\n                <Col xs=\"6\"><ComponentDnDTarget isInput={false} component={this.props.component} handleComponentClick={this.props.handleComponentClick} showModal={this.props.showModal} addComponent={this.props.addComponent} removeComponent={this.props.removeComponent} addRelationship={this.props.addRelationship}/></Col>\r\n            </Row>\r\n        );\r\n      }\r\n      var style = {};\r\n      let classNames = \"component container-fluid\";\r\n      if(this.props.component!==undefined){\r\n        style.top = this.props.component.position.top;\r\n        style.left = this.props.component.position.left;\r\n        classNames += \" \" + this.props.component.type + \" \" + this.props.component._id;\r\n      } \r\n      return this.props.connectDragSource(\r\n          <div className={classNames} id={this.props.component._id} style={style} onClick={this.props.handleComponentClick(this.props.component)}>\r\n            <Row>\r\n              <Col>\r\n                <p>{this.props.component.type}</p>\r\n                <p>{this.props.component._id}</p>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n              <p>{this.props.component.name}</p>\r\n              </Col>\r\n            </Row>\r\n            {target}\r\n          </div>\r\n      )\r\n  }\r\n};\r\n\r\nComponentDnDSource.propTypes = {\r\n  removeComponent: PropTypes.func,\r\n  renderTrigger: PropTypes.string,\r\n  component: PropTypes.instanceOf(Component),\r\n  findComponent: PropTypes.func,\r\n  isTarget: PropTypes.bool,\r\n  handleComponentClick: PropTypes.func,\r\n  showModal: PropTypes.func,\r\n  addComponent: PropTypes.func,\r\n  addRelationship: PropTypes.func,\r\n}\r\n\r\nexport default DragSource(Types.COMPONENT, componentSource, collect)(ComponentDnDSource);","import React, {Component}  from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Card, CardBody ,CardTitle } from 'reactstrap';\r\nimport '../styles/Component.css';\r\nimport { DropTarget } from 'react-dnd';\r\nimport ComponentDnDSource from './ComponentDnDSource';\r\nimport { Puzzle, Prop, Lock, Music, Event } from '../models/index.js';\r\nimport Area from '../models/Area';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Drag sources and drop targets only interact\r\n * if they have the same string type.\r\n * You want to keep types in a separate file with\r\n * the rest of your app's constants.\r\n */\r\nconst Types = {\r\n    COMPONENT: 'COMPONENT'\r\n}\r\n\r\n/**\r\n * Specifies the drop target contract.\r\n * All methods are optional.\r\n */\r\nconst componentTarget = {\r\n    drop(props,monitor,component){\r\n        if (monitor.didDrop() || !component || typeof props.component===undefined){\r\n            return;\r\n        }\r\n        const item = monitor.getItem();\r\n        let clientOffset = monitor.getClientOffset();\r\n        let targetRect = ReactDOM.findDOMNode(component).getBoundingClientRect();\r\n        let offset = component.state.width * 0.025;\r\n        item.position = {top:(((clientOffset.y-targetRect.y-offset)/targetRect.height)*100)+\"%\",left:(((clientOffset.x-targetRect.x-offset)/targetRect.width)*100)+\"%\"};\r\n        component.handleComponentDrop(item);\r\n        return {moved:true};\r\n    }\r\n}\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n * @param {Connect} connect\r\n * @param {Monitor} monitor\r\n * @returns {object} Props\r\n */\r\nfunction collect(connect, monitor) {\r\n    return {\r\n        connectDropTarget: connect.dropTarget(),\r\n        isOver: monitor.isOver(),\r\n        isOverCurrent: monitor.isOver(),\r\n        canDrop: monitor.canDrop(),\r\n        itemType: monitor.getItemType()\r\n    }\r\n}\r\n\r\n/**\r\n * Class for Area drag and drop target for components \r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass AreaDnDTarget extends Component {\r\n    /** Creates AreaDnDTarget */\r\n    constructor(){\r\n        super();\r\n        this.state = { width: 0, height: 0};\r\n    }\r\n\r\n    /**\r\n     * React Lifecycle Method\r\n     * Called when compoent mounts\r\n     */\r\n    componentDidMount() {\r\n        this.updateScreenDimensions();\r\n        window.addEventListener(\"resize\", this.updateScreenDimensions);\r\n    }\r\n\r\n    /**\r\n     * React Lifecycle Method\r\n     * Called when component will unmount\r\n     */\r\n    componentWillUnmount(){\r\n        window.removeEventListener(\"resize\", this.updateScreenDimensions);\r\n    }\r\n\r\n    updateScreenDimensions = () => {\r\n        this.setState({ width: window.innerWidth, height: window.innerHeight });\r\n    }\r\n\r\n    /** \r\n     * Adds new components and updates existing\r\n     * @param {Component} item\r\n     * @param {bool} isInput \r\n     */\r\n    handleComponentDrop(item,isInput=false){\r\n        var component = null;\r\n        if (item.id!==undefined && item._id === undefined){\r\n            switch(item.id){\r\n                case 'Puzzle':\r\n                    component = new Puzzle();\r\n                    component.position = item.position;\r\n                    break;\r\n                case 'Prop':\r\n                    component = new Prop();\r\n                    component.position = item.position;\r\n                    break;\r\n                case 'Lock':\r\n                    component = new Lock();\r\n                    component.position = item.position;\r\n                    break;\r\n                case 'Event':\r\n                    component = new Event();\r\n                    component.position = item.position;\r\n                    break;\r\n                case 'Music':\r\n                    component = new Music();\r\n                    component.position = item.position;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            this.props.addComponent(component,this.props.component._id);\r\n        } else {\r\n            component = item;\r\n            this.props.updateComponent(component,this.props.component._id);\r\n        }\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        var classNames = \"Area\";\r\n        if(this.props.isOver && this.props.canDrop){\r\n            classNames+=\" canDrop\";\r\n        } else if(this.props.isOver && !this.props.canDrop){\r\n            classNames+=\" cantDrop\";\r\n        } else if(this.props.canDrop){\r\n            classNames+=\" couldDrop\"\r\n        }\r\n        let title = this.props.component.type + \" (\" + this.props.component._id + \") \" + this.props.component.name;\r\n        return this.props.connectDropTarget(\r\n            <div className={this.props.component.type} key={this.props.component._id}>                \r\n                <Card className={classNames} onClick={this.props.handleComponentClick(this.props.component)}>\r\n                    <CardBody>\r\n                        <CardTitle>{title}</CardTitle>  \r\n                            {this.props.outputComponents.map((component,i)=>{\r\n                                component = this.props.findComponent(component._id);\r\n                                return(<ComponentDnDSource key={component._id} update={this.update} isTarget handleComponentClick={this.props.handleComponentClick}  component={component} findComponent={this.props.findComponent} id={component.type} showModal={this.props.showModal} addComponent={this.props.addComponent} removeComponent={this.props.removeComponent} addRelationship={this.props.addRelationship}/>)\r\n                            })}\r\n                    </CardBody>\r\n                </Card>   \r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nAreaDnDTarget.propTypes = {\r\n    component: PropTypes.instanceOf(Area),\r\n    outputComponents: PropTypes.array,\r\n    isOver: PropTypes.bool,\r\n    canDrop: PropTypes.bool,\r\n    addComponent: PropTypes.func,\r\n    removeComponent: PropTypes.func,\r\n    updateComponent: PropTypes.func,\r\n    addRelationship: PropTypes.func,\r\n    findComponent: PropTypes.func,\r\n    showModal: PropTypes.func,\r\n    handleComponentClick: PropTypes.func,\r\n}\r\n\r\nexport default DropTarget(Types.COMPONENT, componentTarget, collect)(AreaDnDTarget);","import React, {Component} from 'react';\r\nimport { DragSource } from 'react-dnd';\r\nimport AreaDnDTarget from './AreaDnDTarget';\r\nimport '../styles/Component.css';\r\nimport { Card } from 'reactstrap';\r\nimport Area from '../models/Area';\r\nimport Modal from '../models/Modal';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Drag sources and drop targets only interact\r\n * if they have the same string type.\r\n * You want to keep types in a separate file with\r\n * the rest of your app's constants.\r\n */\r\nconst Types = {\r\n  AREA: 'AREA'\r\n};\r\n\r\n/**\r\n * Specifies the drag source contract.\r\n * Only `beginDrag` function is required.\r\n */\r\nconst areaSource = {\r\n  /**\r\n   * Determins if object can be draged based on props\r\n   * @param {object} props \r\n   * @returns {bool} \r\n   */\r\n  canDrag(props) {\r\n    return true;\r\n  },\r\n\r\n  /**\r\n   * If your component gets unmounted while dragged\r\n   * (like a card in Kanban board dragged between lists)\r\n   * you can implement something like this to keep its\r\n   * appearance dragged:\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @returns {bool} \r\n   */\r\n  isDragging(props, monitor) {\r\n    return monitor.getItem().id === props.id;\r\n  },\r\n\r\n  /**\r\n   * Return the data describing the dragged item\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @param {Component} component\r\n   * @returns {object} \r\n   */\r\n  beginDrag(props, monitor, component) {\r\n    var item = null;\r\n    if (props.id!==undefined){\r\n       item = { id: props.id };\r\n    } else {\r\n       item = { component: props.component };\r\n    }\r\n    return item;\r\n  },\r\n\r\n  /**\r\n   * Checks if component was dragged and didn't drop, check if user wants to delete\r\n   * @param {object} props \r\n   * @param {Monitor} monitor \r\n   * @param {Component} component \r\n   */\r\n  endDrag(props, monitor, component) {\r\n    if (!monitor.didDrop() && component!=null) {\r\n      props.showModal(new Modal(\"Warning\", \"Are you sure you want to delete this component?\",\"Yes\",component.removeComponent,\"No\",()=>{}));\r\n      return;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n * @param {Connect} connect\r\n * @param {Monitor} monitor\r\n * @returns {object} Props\r\n */\r\nfunction collect(connect, monitor) {\r\n  return {\r\n    // Call this function inside render()\r\n    // to let React DnD handle the drag events:\r\n    connectDragSource: connect.dragSource(),\r\n    // You can ask the monitor about the current drag state:\r\n    isDragging: monitor.isDragging()\r\n  };\r\n}\r\n\r\n/**\r\n * Class for Area drag and drop source \r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass AreaDnDSource extends Component{\r\n  /** Creates AreaDnDSource */\r\n  constructor(){\r\n    super();\r\n    this.state={render:true};\r\n  }\r\n\r\n  /** \r\n   * Removes a component \r\n   * @function \r\n   */\r\n  removeComponent = ()=>{\r\n    this.props.removeComponent(this.props.component._id);\r\n  }\r\n\r\n  /** \r\n   * Adds a component \r\n   * @function \r\n   * @param {Component} component\r\n   * @param {string} parentId\r\n   */\r\n  addComponent = (component,parentId)=>{\r\n    this.props.addComponent(component,this.props.component._id);\r\n    this.props.addRelationship(component._id,parentId);\r\n  }  \r\n\r\n  /**\r\n   * React Lifecycle called when updated\r\n   * @function\r\n   * @param {object} prevProps\r\n   */\r\n  componentDidUpdate(prevProps){\r\n    if(this.props.renderTrigger!==prevProps.renderTrigger)\r\n      this.forceUpdate();\r\n  }\r\n\r\n  /** \r\n   * React Lifecycle Method\r\n   * Renders Layout\r\n   * @returns {JSX}\r\n   */\r\n  render() {\r\n    let target;\r\n    if (this.props.isTarget){\r\n      target = (\r\n        <AreaDnDTarget findComponent={this.props.findComponent} handleComponentClick={this.props.handleComponentClick} outputComponents={this.props.outputComponents} component={this.props.component} showModal={this.props.showModal} addComponent={this.addComponent} updateComponent={this.props.updateComponent} removeComponent={this.props.removeComponent} addRelationship={this.props.addRelationship}/>\r\n      );\r\n    }\r\n    let classNames;\r\n    return this.props.connectDragSource(\r\n        <div onClick={this.props.handleComponentClick(this.props.component)}>\r\n          <Card className={classNames}>\r\n            {target}\r\n          </Card>\r\n        </div>\r\n    )\r\n  }\r\n};\r\n\r\nAreaDnDSource.propTypes = {\r\n  component: PropTypes.instanceOf(Area),\r\n  isTarget: PropTypes.bool,\r\n  removeComponent: PropTypes.func,\r\n  addComponent: PropTypes.func,\r\n  addRelationship: PropTypes.func,\r\n  renderTrigger: PropTypes.string,\r\n  findComponent: PropTypes.func,\r\n  handleComponentClick: PropTypes.func,\r\n  outputComponents: PropTypes.array,\r\n  showModal: PropTypes.func,\r\n  updateComponent: PropTypes.func,\r\n  connectDragSource: PropTypes.func,\r\n}\r\n\r\nexport default DragSource(Types.AREA, areaSource, collect)(AreaDnDSource);","import React, {Component}  from 'react';\r\nimport { Row, Col } from 'reactstrap';\r\nimport '../styles/Component.css';\r\nimport '../styles/ComponentArranger.css';\r\nimport Area from './AreaDnDSource';\r\nimport AreaModel from '../models/Area';\r\nimport { DropTarget } from 'react-dnd';\r\nimport LineTo from 'react-lineto';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Drag sources and drop targets only interact\r\n * if they have the same string type.\r\n * You want to keep types in a separate file with\r\n * the rest of your app's constants.\r\n */\r\nconst Types = {\r\n    AREA: 'AREA'\r\n}\r\n\r\n/**\r\n * Specifies the drop target contract.\r\n * All methods are optional.\r\n */\r\nconst areaArrangerTarget = {\r\n    drop(props, monitor, component){\r\n        const item = monitor.getItem();\r\n        if(item.component===undefined || item.component===null){\r\n            component.props.addComponent(new AreaModel());\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Specifies which props to inject into your component.\r\n * @param {Connect} connect\r\n * @param {Monitor} monitor\r\n * @returns {object} Props\r\n */\r\nfunction collect(connect, monitor) {\r\n    return {\r\n      // Call this function inside render()\r\n      // to let React DnD handle the drag events:\r\n      connectDropTarget: connect.dropTarget(),\r\n      // You can ask the monitor about the current drag state:\r\n      isOver: monitor.isOver(),\r\n      isOverCurrent: monitor.isOver({ shallow: true }),\r\n      canDrop: monitor.canDrop(),\r\n      itemType: monitor.getItemType()\r\n    };\r\n}\r\n\r\n/**\r\n * Class for ComponentAranger, Drop target for Area's\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass ComponentArranger extends Component {\r\n    /** Creates ComponentArranger */\r\n    constructor(){\r\n        super()\r\n        this.state = {lines:[]}\r\n    }\r\n\r\n    /**\r\n     * Maps Area to a Row\r\n     * @function\r\n     * @param {Area} area\r\n     * @param {int} i Index\r\n     * @returns {JSX} Row\r\n     */\r\n    mapAreas = (area,i)=>{\r\n        if(area.type==='Area'){\r\n            let outputComponents = this.props.components.filter((component)=>{\r\n                return area.outputComponents.includes(component._id);\r\n            });\r\n            return (\r\n                <Row key={area._id}>\r\n                    <Col xs=\"12\"> \r\n                        <Area renderTrigger={JSON.stringify(area)} isTarget findComponent={this.props.findComponent} handleComponentClick={this.props.handleComponentClick} component={area} outputComponents={outputComponents} showModal={this.props.showModal} addComponent={this.props.addComponent} removeComponent={this.props.removeComponent} updateComponent={this.props.updateComponent} addRelationship={this.props.addRelationship}/>\r\n                    </Col>\r\n                </Row>\r\n            )  \r\n        }\r\n    }\r\n\r\n    /**\r\n     * React Lifecycle called on Update\r\n     * @param {object} props \r\n     * @param {object} state \r\n     */\r\n    componentDidUpdate(props,state) {\r\n        if(JSON.stringify(this.props.components)!==JSON.stringify(props.components)){\r\n            this.forceUpdate();\r\n        }\r\n    }\r\n\r\n    /** Calls force update */\r\n    update = () => this.forceUpdate()\r\n\r\n    /** React Lifecycle called when component Mounts */\r\n    componentDidMount() {\r\n        setTimeout(()=>{\r\n            this.forceUpdate();\r\n        },100)\r\n        window.addEventListener('scroll', this.update, true);\r\n        window.addEventListener('resize', this.update);\r\n    }\r\n    \r\n    /** React Lifecycle called when component unmounts */\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.update);\r\n        window.removeEventListener('resize', this.update);\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        var classNames = \"row component-arranger\";\r\n        if(this.props.isOver && this.props.canDrop){\r\n            classNames+=\" canDrop\"\r\n        } else if (this.props.isOver){\r\n            classNames+=\" cantDrop\"\r\n        }\r\n        let lines = [];\r\n        for(let component of this.props.components){\r\n            if(component!==undefined && component.inputComponents!==undefined && component.type!==\"Area\"){\r\n                let inputComponents = component.inputComponents;\r\n                let outputComponents = component.outputComponents;\r\n                for(let inputComponent of inputComponents){\r\n                    inputComponent = this.props.findComponent(inputComponent);\r\n                    lines.push(<LineTo key={component._id+inputComponent._id+'input'} from={component._id} to={inputComponent._id} borderColor={\"#007bff\"}/>);\r\n                };\r\n                for(let outputComponent of outputComponents){\r\n                    outputComponent = this.props.findComponent(outputComponent);\r\n                    lines.push(<LineTo key={component._id+outputComponent._id+'output'} from={component._id} to={outputComponent._id} borderColor={\"#28a745\"}/>)\r\n                };\r\n            }\r\n        };\r\n        return this.props.connectDropTarget(\r\n            <div className={classNames}>\r\n                {lines}\r\n                    <Col xs=\"12\">\r\n                        <Row>\r\n                            <Col className=\"col text-center\">\r\n                                <h3>Components</h3>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col>\r\n                                {this.props.components.map(this.mapAreas)}\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nComponentArranger.propTypes = {\r\n    renderTrigger: PropTypes.string,\r\n    components: PropTypes.array,\r\n    isOver: PropTypes.bool,\r\n    canDrop: PropTypes.bool,\r\n    findComponent: PropTypes.func,\r\n    showModal: PropTypes.func,\r\n    handleComponentClick: PropTypes.func,\r\n    updateComponent: PropTypes.func,\r\n    addComponent: PropTypes.func,\r\n    removeComponent: PropTypes.func,\r\n    addRelationship: PropTypes.func\r\n}\r\n\r\nexport default DropTarget(Types.AREA, areaArrangerTarget,collect)(ComponentArranger);","import React, {Component}  from 'react';\r\nimport { Container, Row, Col, Input, Label, UncontrolledTooltip, ListGroupItem, Button, ListGroup } from 'reactstrap';\r\nimport {LockGenerator,PuzzleGenerator} from './index';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/ComponentDetails.css';\r\nimport Accessibility from './Accessibility';\r\n\r\n/** \r\n * Class for Component Details allows editing of a components details\r\n * @extends Component \r\n * @author Alistair Quinn\r\n */\r\nclass ComponentDetails extends Component {\r\n    /** Creates ComponentDetails */\r\n    constructor(){\r\n        super();\r\n        this.state={visualWarning:false,physicalWarning:false}\r\n    }\r\n\r\n    /**\r\n     * Converts a string to Camel Case\r\n     * @param {string} string \r\n     * @returns {string} \r\n     */\r\n    convertCamelCase(string){\r\n        if(typeof string !== 'string')\r\n            string = string.toString();\r\n        return string.replace(/([A-Z])/g, ' $1').replace(/^./,(str)=>{ return str.toUpperCase(); })\r\n    }\r\n\r\n    /** \r\n     * Handles input change \r\n     * @param {Event} event\r\n     * */\r\n    handleChange = (event) => { \r\n        let state = {};\r\n        state[event.target.id] = event.target.value;  \r\n        if(event.target.id===\"puzzleType\")\r\n            state.puzzle = {}\r\n        if(event.target.id===\"lockType\")\r\n            state.output = \"\"\r\n        state._id = this.props.selected._id;  \r\n        this.props.updateComponent(state);\r\n    }\r\n\r\n    /**\r\n     * Handles Output change\r\n     * @param {string} event\r\n     */\r\n    handleOutputChange = (output)=>{\r\n        this.props.updateComponent({output});\r\n    }\r\n\r\n    /**\r\n     * Handles Puzzle change\r\n     * @param {Puzzle} puzzle\r\n     */\r\n    handlePuzzleChange = (puzzle)=>{\r\n        if(puzzle.output===undefined){\r\n            puzzle.output = \"\";\r\n        } \r\n        this.props.updateComponent({_id:this.props.selected._id,puzzle,output:puzzle.output});\r\n        this.forceUpdate();\r\n    }\r\n\r\n    /** Generates Output from Inputs */\r\n    generateFromInputs=()=>{\r\n        this.props.updateComponent({_id:this.props.selected._id,output:this.props.calculateOutput(this.props.selected._id)})\r\n    }\r\n\r\n    /**\r\n     * Maps Details to Inputs\r\n     * @param {string} key\r\n     * @param {int} i index\r\n     * @returns {JSX}\r\n     */\r\n    mapDetailToInput = (key,i) => {\r\n        if(key==='output') {\r\n            let generator;\r\n            if(this.props.selected.type==='Lock')\r\n                generator = <LockGenerator lockType={this.props.selected.lockType} handleOutputChange={this.handleOutputChange}></LockGenerator>\r\n            else if(this.props.selected.type==='Puzzle') {\r\n                generator = <PuzzleGenerator puzzleType={this.props.selected.puzzleType} handlePuzzleChange={this.handlePuzzleChange}></PuzzleGenerator>\r\n            }\r\n            return (<Row key={i}>\r\n                <Col>\r\n                    <Label for={key}>{this.convertCamelCase(key)}</Label>\r\n                    <Input type=\"text\" name={key} id={key} placeholder={this.convertCamelCase(key)} value={this.props.selected[key]} onChange={this.handleChange}/>\r\n                    <Button block color=\"primary\" onClick={this.generateFromInputs}>Generate From Inputs</Button>\r\n                    <br/>\r\n                    {generator}\r\n                    <br/>\r\n                </Col>\r\n            </Row>)\r\n        } else if (key==='lockType'){\r\n            return (\r\n                <Row key={i}>\r\n                    <Col>\r\n                        <Label for={key}>{this.convertCamelCase(key)}</Label>\r\n                        <Input type=\"select\" name={key} id={key} placeholder={this.convertCamelCase(key)} value={this.props.selected[key]} onChange={this.handleChange}>\r\n                            <option>Numeric</option>\r\n                            <option>Word</option>\r\n                            <option>Directional</option>\r\n                            <option>Contactless</option>\r\n                            <option>Key</option>\r\n                        </Input>\r\n                    </Col>\r\n                </Row>\r\n            )\r\n        } else if (key==='eventType'){\r\n            return (\r\n                <Row key={i}>\r\n                    <Col>\r\n                        <Label for={key}>{this.convertCamelCase(key)}</Label>\r\n                        <Input type=\"select\" name={key} id={key} placeholder={this.convertCamelCase(key)} value={this.props.selected[key]} onChange={this.handleChange}>\r\n                            <option>Sound Effect</option>\r\n                            <option>New Area</option>\r\n                            <option>Objective Complete</option>\r\n                            <option>Custom</option>\r\n                        </Input>\r\n                    </Col>\r\n                </Row>\r\n            )\r\n        } else if (key==='puzzleType'){\r\n            return (\r\n                <Row key={i}>\r\n                    <Col>\r\n                        <Label for={key}>{this.convertCamelCase(key)}</Label>\r\n                        <Input type=\"select\" name={key} id={key} placeholder={this.convertCamelCase(key)} value={this.props.selected[key]} onChange={this.handleChange}>\r\n                            <option>Cipher</option>\r\n                            <option>Word</option>\r\n                            <option>Colour</option>\r\n                            <option>Hidden Word</option>\r\n                            <option>Hidden Object</option>\r\n                            <option>Riddle</option>\r\n                            <option>Custom</option>\r\n                        </Input>\r\n                    </Col>\r\n                </Row>\r\n            )\r\n        } else if (key==='puzzle'){\r\n            let component = this.props.selected;\r\n            let details = Object.keys(component[key]).map((property,index,array)=>{\r\n                let detail;\r\n                if(property.includes('DATA')){\r\n                    detail = \"Export as PDF to View\";\r\n                }else if(typeof component[key][property] === 'object')\r\n                    detail = JSON.stringify(component[key][property]);\r\n                else{\r\n                    detail = component[key][property];\r\n                } \r\n                return(\r\n                <Row key={property} id={key}>\r\n                    <Col>\r\n                        <p>{\" \" + this.convertCamelCase(property) + \": \"+this.convertCamelCase(detail)}</p>\r\n                    </Col>\r\n                </Row>\r\n                )\r\n            });\r\n            if(Object.keys(component[key]).length>0){\r\n                return (\r\n                    <Row key={i}>\r\n                        <Col>\r\n                            <Label>{this.convertCamelCase(key)}</Label>\r\n                            {details}\r\n                        </Col>\r\n                    </Row>\r\n                )\r\n            }else{\r\n                return null;\r\n            } \r\n        }else if(typeof this.props.selected[key] === \"string\" && key!==\"_id\" && key!==\"type\" && key!==\"version\"){\r\n            return (\r\n                <Row key={i}>\r\n                    <Col>\r\n                        <Label for={key}>{this.convertCamelCase(key)}</Label>\r\n                        <Input type=\"text\" name={key} id={key} placeholder={this.convertCamelCase(key)} value={this.props.selected[key]} onChange={this.handleChange}/>\r\n                    </Col>\r\n                </Row>)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Deletes a relationship\r\n     * @param {string} id\r\n     * @param {bool} isInput\r\n     */\r\n    handleOnClick = (id,isInput)=> (e) => {\r\n        let component = {...this.props.selected};\r\n        let state = {};\r\n        state._id = component._id;\r\n        if(isInput){\r\n            state.inputComponents = component.inputComponents.filter(oldId => oldId!==id);\r\n        } else {\r\n            state.outputComponents = component.outputComponents.filter(oldId => oldId!==id);\r\n        }\r\n        this.props.updateComponent(state);\r\n    }\r\n\r\n    /**\r\n     * Maps Relationship to List Group Item\r\n     * @param {string} id\r\n     * @param {int} i\r\n     * @param {bool} isInput\r\n     * @returns {JSX}\r\n     */\r\n    mapIDToP = (id,i,isInput) => {\r\n        return (\r\n            <ListGroupItem key={i}>\r\n                {id}\r\n                <Button onClick={this.handleOnClick(id,isInput)} color=\"danger\" style={{display:'inline', position: 'absolute', right:'2px', top:'0.3rem'}}>\r\n                    X\r\n                </Button>\r\n            </ListGroupItem>\r\n        )\r\n    }\r\n    \r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        let component = this.props.selected;\r\n        let id=\"\";\r\n        let type=\"\";\r\n        let properties;\r\n        let inputs;\r\n        let outputs;\r\n        let inputRelationships;\r\n        let outputRelationships;\r\n        let visualWarning;\r\n        let physicalWarning;\r\n        if(component!==undefined || component!==null){\r\n            if(component._id!==undefined)\r\n                id = \" (\"+component._id+\")\";\r\n            else \r\n                id=\"\";\r\n            properties = Object.keys(component).map(this.mapDetailToInput)\r\n            type = component.type||\"\";\r\n            if(component.type!=='Area'&&component.inputComponents!==undefined&&component.outputComponents!==undefined&&(component.inputComponents.length>0||component.outputComponents.length>0)){\r\n                inputs = component.inputComponents.map((id,i)=>this.mapIDToP(id,i,true));\r\n                outputs = component.outputComponents.map((id,i)=>this.mapIDToP(id,i,false));\r\n                inputRelationships = (\r\n                    <Row>\r\n                        <Col>\r\n                            <h4>Inputs</h4>\r\n                            <ListGroup>\r\n                                {inputs}\r\n                            </ListGroup>\r\n                        </Col>\r\n                    </Row>\r\n                );\r\n                outputRelationships = (\r\n                    <Row>\r\n                        <Col>\r\n                            <h4>Outputs</h4>\r\n                            <ListGroup>\r\n                                {outputs}\r\n                            </ListGroup>\r\n                        </Col>\r\n                    </Row>\r\n                );\r\n            }\r\n            //Accessibility\r\n            let visualKeys = [];\r\n            Object.keys(this.props.accessibility.visual).forEach((key)=>{\r\n                if(this.props.accessibility.visual[key]===true)\r\n                    visualKeys.push(key);\r\n            });\r\n            if(visualKeys.length>0)\r\n                visualWarning = (                \r\n                <Col className=\"col text-center\">\r\n                    <p id=\"visualWarning\"><i className=\"fa fa-wheelchair text-success\"  aria-hidden=\"true\"></i></p>  \r\n                    <UncontrolledTooltip id=\"visual\" target=\"visualWarning\">\r\n                    You selected: {visualKeys.join(',')} be careful with colour choices\r\n                    </UncontrolledTooltip>\r\n                </Col>\r\n                )\r\n            let physicalKeys = [];\r\n            Object.keys(this.props.accessibility.physical).forEach((key)=>{\r\n                if(this.props.accessibility.physical[key]===true)\r\n                    physicalKeys.push(key);\r\n            });\r\n            if(physicalKeys.length>0)\r\n                physicalWarning = (\r\n                <Col className=\"col text-center\">\r\n                    <p id=\"physicalWarning\"><i class=\"fa fa-wheelchair text-primary\" id=\"physicalWarning\" aria-hidden=\"true\"></i></p>\r\n                    <UncontrolledTooltip id=\"physical\" target=\"physicalWarning\">\r\n                    You selected: {physicalKeys.join(',')} ensure plenty of room around puzzles and check how difficult puzzle is to handle\r\n                    </UncontrolledTooltip>\r\n                </Col>\r\n                )\r\n        }\r\n        return (\r\n            <Container fluid className=\"container-fluid component-details\">\r\n                <Row>\r\n                    <Col className=\"col text-center\">\r\n                        <h3>Details</h3>\r\n                        <h4>{type + id}</h4>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    {visualWarning}\r\n                    {physicalWarning}\r\n                </Row>\r\n                {properties}\r\n                {inputRelationships}\r\n                {outputRelationships}\r\n            </Container>\r\n        )\r\n    }\r\n};\r\n\r\nComponentDetails.propTypes = {\r\n    calculateOutput: PropTypes.func,\r\n    accessibility: PropTypes.instanceOf(Accessibility),\r\n    selected: PropTypes.instanceOf(Component),\r\n    updateComponent: PropTypes.func\r\n}\r\n\r\nexport default ComponentDetails;","import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container, Row, Col, Alert, Button, Form, FormGroup, Label, Input, FormText} from 'reactstrap';\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for Login\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Login extends Component {\r\n    /** Creates Login */\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email:\"\",\r\n            password:\"\",\r\n            message: \"\",\r\n            color: \"success\",\r\n            recaptcha: false\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles form submit\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        //Authenticate credentials \r\n        if(this.state.email!==\"\" && this.state.password!==\"\" && this.state.recaptcha && this.props.authenticateCredentials){\r\n            var err = await this.props.authenticateCredentials({strategy:'local',email:this.state.email,password:this.state.password});\r\n            this.setState({message:err, color:\"danger\"});\r\n        } else {\r\n            this.setState({message:\"Error\"})\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles Input Change\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles Alert Dismiss\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleDismiss = (e) => {\r\n        this.setState({message: \"\", color:\"success\"});\r\n    }\r\n\r\n    /**\r\n     * Handles Reset Password Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleClick = async (e) => {\r\n        e.preventDefault();\r\n        if(this.props.sendReset){\r\n            let result;\r\n            try {\r\n                result = await this.props.sendReset(this.state.email);\r\n            } catch (error) {\r\n                result = {color:\"warning\", message:\"An error occured, a password reset email may have been sent\"};\r\n            }\r\n            this.setState(result);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles ReCAPTCHA\r\n     * @function\r\n     * @param {bool} value\r\n     */\r\n    handleReCAPTCHA = (value) => {\r\n        this.setState({recaptcha:value})\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"login full-container verticaly-center-content\">\r\n                <Container>\r\n                    <Row>\r\n                        <Col>\r\n                            <Form onSubmit={this.handleSubmit}>\r\n                                <FormGroup>\r\n                                    <Label for=\"email\">Email</Label>\r\n                                    <Input type=\"email\" name=\"email\" id=\"email\" value={this.state.email} onChange={this.handleChange}/>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <Label for=\"password\">Password</Label>\r\n                                    <Input type=\"password\" name=\"password\" id=\"password\" value={this.state.password} onChange={this.handleChange}/>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <div style={{\"width\":\"fit-content\",\"margin\":\"auto\"}}>\r\n                                        <ReCAPTCHA\r\n                                            sitekey={process.env.REACT_APP_RECAPTCHA}\r\n                                            onChange={this.handleReCAPTCHA}\r\n                                        />\r\n                                    </div>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <Button block disabled={this.state.email===\"\" || this.state.password===\"\" || this.state.message!==\"\" || !this.state.recaptcha}>Login</Button>\r\n                                </FormGroup>\r\n                                <FormText>\r\n                                    Don't have an account? Sign Up <Link to=\"/signup\">Here</Link>\r\n                                </FormText>\r\n                                <FormText>\r\n                                    Forgotten Password? Enter your email above and then <button onClick={this.handleClick} className=\"btn btn-link\" style={{padding:0,fontSize:'inherit'}}>Click Here</button>\r\n                                </FormText>\r\n                                <Alert isOpen={this.state.message !== \"\"} toggle={this.handleDismiss} color=\"danger\">{this.state.message}</Alert>\r\n                            </Form>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nLogin.propTypes = {\r\n    authenticateCredentials: PropTypes.func,\r\n}\r\n\r\nexport default Login;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/PasswordStrengthMeter.css';\r\n\r\n/** \r\n * Class for PasswordStrengthMeter \r\n * @extends Component\r\n * @author Alistair Quinn \r\n */\r\nclass PasswordStrengthMeter extends Component {\r\n  /**\r\n   * Converts Strength Score to String\r\n   * @function\r\n   * @param {int} score\r\n   */\r\n  convertScoreToLabel = (score) => {\r\n      switch(score) {\r\n          case 0:\r\n            return 'Weak';\r\n          case 1:\r\n            return 'Weak';\r\n          case 2:\r\n            return 'Fair';\r\n          case 3:\r\n            return 'Good';\r\n          case 4:\r\n            return 'Strong';\r\n          default:\r\n            return 'Weak';\r\n      }\r\n  }\r\n\r\n  /** \r\n   * React Lifecycle Render\r\n   * Renders Layout\r\n   * @returns {JSX}\r\n   */\r\n  render() {\r\n      const { score } = this.props; \r\n      return (\r\n          <div className=\"password-strength-meter\">\r\n              <progress className={`password-strength-meter-progress strength-${this.convertScoreToLabel(score)}`} value={score} max=\"4\"/>\r\n              <label className=\"password-strength-meter-label\">\r\n                <strong>Password Strength:</strong> {this.convertScoreToLabel(score)}\r\n              </label>\r\n          </div>\r\n      )\r\n  }\r\n};\r\n\r\nPasswordStrengthMeter.propTypes = {\r\n  score: PropTypes.number\r\n}\r\n\r\nexport default PasswordStrengthMeter;","import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container, Row, Col, Alert, Button, Form, FormGroup, Label, Input, FormText} from 'reactstrap';\r\nimport PasswordStrengthMeter from './PasswordStrengthMeter'\r\nimport zxcvbn from 'zxcvbn';\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for Signup\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Signup extends Component {\r\n    /** Creates Signup */\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email:\"\",\r\n            password:\"\",\r\n            password2:\"\",\r\n            message: \"\",\r\n            testResult: {}\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles Form Submit\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if(this.state.email!==\"\" && this.state.password!==\"\" && this.state.password2!==\"\" && this.state.password===this.state.password2 && this.state.recaptcha && this.props.signUp){\r\n            let err = await this.props.signUp({email:this.state.email,password:this.state.password});\r\n            this.setState({message:err});\r\n        } else {\r\n            this.setState({message:\"Error\"});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles Input Change\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleChange = (e) => {\r\n        if(e.target.id === \"password\"){\r\n            this.setState({\r\n                [e.target.id]: e.target.value,\r\n                testResult: zxcvbn(e.target.value)\r\n            },()=>this.setState({message:this.composemessage()}));\r\n        } else {\r\n            this.setState({\r\n                [e.target.id]: e.target.value,\r\n            },()=>this.setState({message:this.composemessage()}));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Composes Error Message\r\n     * @function\r\n     * @returns {String}\r\n     */\r\n    composemessage = () => {\r\n        let messages = [];\r\n        if(this.state.password!==\"\"&&this.state.password!==this.state.password2)\r\n            messages.push(\"Passwords Must Match\");\r\n        if(this.state.testResult.score<4)\r\n            messages.push(\"Password Not Strong Enough\");\r\n        if(this.state.password.length < 8)\r\n            messages.push(\"Password Too Short\");\r\n        if(this.state.email.includes(\" \") || this.state.email.includes(\"$\") || !this.state.email.includes(\"@\"))\r\n            messages.push(\"Invalid Email\");\r\n        return messages.join(\", \");   \r\n    }\r\n\r\n    /**\r\n     * Handles Alert Dismiss\r\n     * @function\r\n     */\r\n    handleDismiss = () => {\r\n        this.setState({message: \"\"});\r\n    }\r\n\r\n    /**\r\n     * Handles Test Result\r\n     * @function\r\n     */\r\n    handleTestResult = (testResult) => {\r\n        this.setState({testResult:testResult});\r\n    }\r\n\r\n    /**\r\n     * Handles ReCAPTCHA\r\n     * @function\r\n     * @param {bool} value\r\n     */\r\n    handleReCAPTCHA = (value) => {\r\n        this.setState({recaptcha:value})\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Method\r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"sign-up full-container verticaly-center-content\">\r\n                <Container>\r\n                    <Row>\r\n                        <Col>\r\n                            <Form noValidate onSubmit={this.handleSubmit}>\r\n                                <FormGroup>\r\n                                    <Label for=\"email\">Email</Label>\r\n                                    <Input required type=\"email\" name=\"email\" id=\"email\" value={this.state.email} onChange={this.handleChange}/>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <Label for=\"password\">Password</Label>\r\n                                    <Input required type=\"password\" name=\"password\" id=\"password\" value={this.state.password} onChange={this.handleChange}/>\r\n                                    <PasswordStrengthMeter score={this.state.testResult.score}/>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <Label for=\"password2\">Re-Type Password</Label>\r\n                                    <Input required type=\"password\" name=\"password2\" id=\"password2\" value={this.state.password2} onChange={this.handleChange}/>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <div style={{\"width\":\"fit-content\",\"margin\":\"auto\"}}>\r\n                                        <ReCAPTCHA\r\n                                            sitekey={process.env.REACT_APP_RECAPTCHA}\r\n                                            onChange={this.handleReCAPTCHA}\r\n                                        />\r\n                                    </div>\r\n                                </FormGroup>\r\n                                <FormGroup>\r\n                                    <Button block disabled={this.state.email===\"\" || this.state.password===\"\" || this.state.message!==\"\" || !this.state.recaptcha}>Sign Up</Button>\r\n                                </FormGroup>\r\n                                <FormText>\r\n                                    Passwords must be strong and 8 characters in length or more\r\n                                </FormText>\r\n                                <FormText>\r\n                                    Have an account? Log In <Link to=\"/login\">Here</Link>\r\n                                </FormText>\r\n                                <Alert isOpen={this.state.message !== \"\"} toggle={this.handleDismiss} color=\"danger\">{this.state.message}</Alert>\r\n                            </Form>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nSignup.propTypes = {\r\n    signUp: PropTypes.func\r\n}\r\n\r\nexport default Signup;","import React, {Component}  from 'react';\r\nimport { Container, Row, Col } from 'reactstrap';\r\n\r\n/** \r\n * Class for About Page \r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass About extends Component {\r\n    /** \r\n     * React Lifecycle Render\r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"full-container verticaly-center-content\">\r\n                <Container>\r\n                    <Row>\r\n                        <Col>\r\n                            <p>\r\n                                The Escape Room Generator is a web app for designing an escape room, that allows you to export your design in either JSON or PDF format. This project originally started as my honours project and I have continued its development.\r\n                                The main goals of the project are: \r\n                            </p>       \r\n                            <ul>\r\n                                <li>To allow Escape Room designs to be 'portable'</li>\r\n                                <li>To help designers create puzzles by providing tools to generate puzzles, answers and materials</li>\r\n                                <li>To highlight the accessibility needs of potential players, an aspect of Escape Room design that is often ignored</li>\r\n                            </ul>\r\n                            <p>\r\n                                For more information click the GitHub link at the top of the page. If you need to contact me directly you can do so by <a href=\"mailto:escaperoomgenerator@gmail.com\">email</a> or join my Discord server by clicking <a href=\"https://discord.gg/FqDHR9g\">here</a>\r\n                            </p>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n\r\n        )\r\n    }\r\n};\r\n\r\nexport default About;","import React, {Component}  from 'react';\r\nimport YouTubePlaylist from 'react-youtube-playlist';\r\nimport '../styles/Tutorials.css';\r\n\r\n/**\r\n * Class for Tutorials\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Tutorials extends Component {\r\n    /** \r\n     * React Lifecycle Method\r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <YouTubePlaylist\r\n                width={'100%'}\r\n                height={'70%'}\r\n                api_key={process.env.REACT_APP_YOUTUBE_API_KEY}\r\n                playlist_id={process.env.REACT_APP_TUTORIALS_PLAYLIST_ID}\r\n                scrolling={\"auto\"}\r\n            />\r\n        )\r\n    }\r\n};\r\n\r\nexport default Tutorials;","import React, { Component } from 'react';\r\nimport { Route } from 'react-router'\r\nimport { Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for ProtectedRoute\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass ConditionalRoute extends Component {\r\n  /** \r\n   * React Lifecycle Method\r\n   * Renders Layout\r\n   * @returns {JSX}\r\n   */\r\n    render(){\r\n        if(!this.props.condition){\r\n            return(<Redirect to={this.props.redirect}/>)\r\n        } else {\r\n            return (<Route {...this.props}/>)\r\n        }\r\n    }\r\n}\r\n\r\nConditionalRoute.propTypes = {\r\n    condition: PropTypes.bool,\r\n    location: PropTypes.string,\r\n}\r\n\r\nexport default ConditionalRoute;","import React, {Component}  from 'react';\r\nimport { Container, Row } from 'reactstrap';\r\n\r\n/** \r\n * Class for Not Found \r\n * @extends Component\r\n * @author Alistair Quinn \r\n */\r\nclass NotFound extends Component {\r\n    /**\r\n     * React lifecycle method \r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Row>\r\n                    <h1>404 Page Not Found</h1>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n};\r\n\r\nexport default NotFound;","import RandomWords from 'random-words';\r\n\r\n/**\r\n * Class for LockGenerator\r\n * @author Alistair Quinn\r\n */\r\nclass LockGenerator {\r\n    /**\r\n     * Generates a random numeric combination of a certain length\r\n     * @param {int} length \r\n     * @returns {int}\r\n     */\r\n    generateNumericCombination(length){\r\n        let number = \"\";\r\n        for(let i = 0 ; i<length; i++){\r\n            number += parseInt(Math.floor(Math.random()*9));\r\n        }\r\n        return number;\r\n    }\r\n\r\n    /**\r\n     * Generates Random Work Strings\r\n     * @param {int} amount \r\n     * @param {int} wordsPerString \r\n     * @returns {Array<String>}\r\n     */\r\n    generateWords(amount=1,wordsPerString=1){\r\n        let words = RandomWords({min:amount,max:amount,exactly:amount,wordsPerString:wordsPerString});\r\n        return words.slice(0,amount);\r\n    }\r\n\r\n    /**\r\n     * Generates a Random Directional Sequence \r\n     * @param {int} length \r\n     * @returns {Array<String>}\r\n     */\r\n    generateDirectionSequence(length){\r\n        let sequence = [];\r\n        let directions = [\"UP\",\"DOWN\",\"LEFT\",\"RIGHT\"];\r\n        let number;\r\n        for(let i = 0 ; i<length; i++){\r\n            number = Math.floor(Math.random()*3);\r\n            sequence.push(directions[number]);\r\n        }\r\n        return sequence.join(',');\r\n    }\r\n}\r\n\r\nexport default LockGenerator;","import React, {Component}  from 'react';\r\nimport {Row,Col,Button,Input} from 'reactstrap'\r\nimport lockGen from '../generators/LockGenerator';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for Lock Generator\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass LockGenerator extends Component {\r\n    /** Creates LockGenerator */\r\n    constructor(){\r\n        super();\r\n        this.state={length:1,wordsPerString:1}\r\n        this.lockGenerator = new lockGen();\r\n    }\r\n\r\n    /**\r\n     * Handles Input Change\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleChange = (e) => { \r\n        let state = {};\r\n        state[e.target.name] = e.target.value;  \r\n        this.setState(state);\r\n    }\r\n\r\n    /**\r\n     * Handles Numeric Lock Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleNumericClick = (e) => {\r\n        let output = this.lockGenerator.generateNumericCombination(this.state.length);\r\n        this.props.handleOutputChange(output);\r\n    }\r\n\r\n    /**\r\n     * Handles Word Lock Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleWordClick = (e) => {\r\n        let output = this.lockGenerator.generateWords(this.state.length,this.state.wordsPerString);\r\n        this.props.handleOutputChange(output);\r\n    }\r\n\r\n    /**\r\n     * Handles Directional Lock Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleDirectionalClick = (e) => {\r\n        let output = this.lockGenerator.generateDirectionSequence(this.state.length);\r\n        this.props.handleOutputChange(output);\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        switch(this.props.lockType){\r\n            case 'Numeric':\r\n                return (\r\n                    <Row>\r\n                        <Col>\r\n                            <Input name=\"length\" placeholder=\"length\" type=\"number\" step=\"1\" min=\"1\" value={this.state.length} onChange={this.handleChange}/>\r\n                            <Button block onClick={this.handleNumericClick} color=\"primary\">Generate Random Number</Button>\r\n                        </Col>\r\n                    </Row>\r\n                )\r\n            case 'Word':\r\n                return (\r\n                    <Row>\r\n                        <Col>\r\n                            <Input name=\"length\" placeholder=\"length\" type=\"number\" step=\"1\" min=\"1\" value={this.state.length} onChange={this.handleChange}/>\r\n                            <Input name=\"wordsPerString\" placeholder=\"words per string\" type=\"number\" step=\"1\" min=\"1\" value={this.state.wordsPerString} onChange={this.handleChange}/>\r\n                            <Button block onClick={this.handleWordClick} color=\"primary\">Generate Words</Button>\r\n                        </Col>\r\n                    </Row>\r\n                )\r\n            case 'Directional':\r\n                return (\r\n                    <Row>\r\n                        <Col>\r\n                            <Input name=\"length\" placeholder=\"length\" type=\"number\" step=\"1\" min=\"1\" value={this.state.length} onChange={this.handleChange}/>\r\n                            <Button block onClick={this.handleDirectionalClick} color=\"primary\">Generate Directional Sequence</Button>\r\n                        </Col>\r\n                    </Row>\r\n                )\r\n            default:\r\n                return null;\r\n            \r\n        }\r\n    }\r\n};\r\n\r\nLockGenerator.propTypes = {\r\n    handleOutputChange: PropTypes.func,\r\n    lockType: PropTypes.string,\r\n}\r\n\r\nexport default LockGenerator;","/**\r\n * Base Class for Puzzle\r\n * @author Alistair Quinn\r\n */\r\nclass Puzzle {\r\n    constructor(type){\r\n        this.type=type;\r\n    }\r\n}\r\n\r\nexport default Puzzle;","import Puzzle from './Puzzle';\r\n\r\n/**\r\n * Class for Colour\r\n * @extends Puzzle\r\n * @author Alistair Quinn\r\n */\r\nclass Colour extends Puzzle{\r\n    constructor(){\r\n        super('Colour')\r\n        let numbers = this.generateNumbers();\r\n        this.output = numbers.num1.toString() + numbers.num2.toString() + numbers.num3.toString() + numbers.num4.toString();\r\n        this.answer= numbers.num1.toString() + numbers.num2.toString() + numbers.num3.toString() + numbers.num4.toString();\r\n        this.numbers = numbers.numbers;\r\n    }\r\n\r\n    generateNumbers(){\r\n        let num1 = Math.floor(Math.random()*4)+1;\r\n        let num2;\r\n        while(num2!==num1){\r\n            num2 = Math.floor(Math.random()*4)+1;\r\n        }\r\n        let num3 = num1 + num2;\r\n        let num4 = Math.floor(Math.random()*4)+1;\r\n        let numbers = [{number:num1,colour:'red'},{number:num2,colour:'blue'},{number:num3,colour:'purple'},{number:num4,colour:'green'}];\r\n        return {num1,num2,num3,num4,numbers};\r\n    }\r\n}\r\n\r\nexport default Colour;","import CrosswordGenerator from 'cwg';\r\nimport Puzzle from './Puzzle';\r\n\r\n/**\r\n * Class for Crossword\r\n * @extends Puzzle\r\n * @author Alistair Quinn\r\n */\r\nclass Crossword extends Puzzle {\r\n    constructor(output=\"\",words,hints,answers){\r\n        super('Crossword');\r\n        this.type=\"crossword\";\r\n        this.output=\"\";\r\n        this.words=words;\r\n        this.hints=hints;\r\n        this.answers=answers;\r\n        this.crossword=CrosswordGenerator(words);\r\n    }\r\n}\r\n\r\nexport default Crossword;","import Puzzle from './Puzzle';\r\n\r\n/**\r\n * Class for HiddenWord\r\n * @extends Puzzle\r\n * @author Alistair Quinn\r\n */\r\nclass HiddenWord extends Puzzle{\r\n    constructor(word,words,hints,answers){\r\n        super('HiddenWord');\r\n        this.output=word;\r\n        this.word=word;\r\n        this.words=words;\r\n        this.hints=hints;\r\n        this.answers=answers;\r\n        this.hiddenWord=this.generateHiddenWord(word,words);\r\n    }\r\n\r\n    generateHiddenWord(word,words){\r\n        let matrix = [];\r\n        for (let i=0;i<words.length;i++){\r\n            matrix.push(words[i].indexOf(word[i]));\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n}\r\n\r\nexport default HiddenWord;","import riddles from '../generators/riddle.json';\r\nimport Puzzle from './Puzzle';\r\n\r\n/**\r\n * Class for Riddle\r\n * @extends Puzzle\r\n * @author Alistair Quinn\r\n */\r\nclass Riddle extends Puzzle {\r\n    constructor(){\r\n        super('Riddle');\r\n        let riddle = this.generateRandomRiddle();\r\n        this.output=riddle.answer;\r\n        this.riddle=riddle;\r\n    }\r\n    generateRandomRiddle(){\r\n        return riddles[Math.floor(Math.random()*riddles.length)];\r\n    }\r\n}\r\n\r\nexport default Riddle;","import Puzzle from './Puzzle';\r\nimport encoders from '../ciphers/encoders.json';\r\nimport decoders from '../ciphers/decoders.json';\r\n\r\n/**\r\n * Class for Cipher\r\n * @extends Puzzle\r\n * @author Alistair Quinn\r\n */\r\nclass Cipher extends Puzzle {\r\n    constructor(cipherType=\"pigpen\",encoder=encoders['pigpen'],decoder=decoders['pigpen']){\r\n        super('Cipher')\r\n        this.cipherType = cipherType;\r\n        this.encoderDATA = encoder;\r\n        this.decoderDATA = decoder;\r\n    }\r\n}\r\n\r\nexport default Cipher;","import {Crossword,HiddenWord,Riddle,Colour,Cipher} from '../puzzles/index';\r\n\r\n/**\r\n * Class for PuzzleGenerator\r\n * @author Alistair Quinn\r\n */\r\nclass PuzzleGenerator {\r\n    /**\r\n     * Generates a cipher by type\r\n     * @param {String} type \r\n     * @returns {Cipher}\r\n     */\r\n    generateCipher(type=\"pigpen\"){\r\n        switch(type){\r\n            case 'pigpen':\r\n                return new Cipher();\r\n            default:\r\n                return new Cipher();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Generates a Word Puzzle by type\r\n     * @param {String} type \r\n     * @param {?????} options \r\n     * @returns {Puzzle}\r\n     */\r\n    generateWord(type=\"crossword\",options) {\r\n        switch(type){\r\n            case 'crossword':\r\n                return new Crossword(\"\",options.words,options.hints,options.answers);\r\n            case 'hidden':\r\n                return new HiddenWord(options.word,options.words,options.hints,options.answers);\r\n            case 'riddle':\r\n                return new Riddle();\r\n            default:\r\n                return new Riddle();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Generates a Colour Puzzle\r\n     * @returns {Colour}\r\n     */\r\n    generateColour(){\r\n        return new Colour();\r\n    }\r\n}\r\n\r\nexport default PuzzleGenerator;","import React, {Component}  from 'react';\r\nimport {Row, Col, Button, Input, InputGroup, InputGroupAddon, InputGroupText} from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\nimport EscapeRoom from '../models/EscapeRoom';\r\n\r\n/**\r\n * Class for ListCreator\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass ListCreator extends Component {\r\n    /** Creates ListCreator */\r\n    constructor(){\r\n        super();\r\n        this.state = {items:[\"\"]};\r\n    }\r\n\r\n    /**\r\n     * Handles Input Change\r\n     * @function\r\n     * @param {Event} event\r\n     */\r\n    handleChange = (event) => { \r\n        let index = event.target.id;\r\n        let items = [...this.state.items];\r\n        items[index] = event.target.value;\r\n        this.setState({items},()=>{\r\n            this.props.handleChange(items);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Adds a string to items\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    addItem = (e) => {\r\n        let items = [...this.state.items];\r\n        items.push(\"\");\r\n        this.setState({items});\r\n        this.props.handleChange(items);\r\n    }\r\n\r\n    /**\r\n     * Removes an item from the \r\n     * @param {Event} e\r\n     */\r\n    removeItem = (index) => (e) => {\r\n        let items = [...this.state.items];\r\n        items = [...items.slice(0,index),...items.slice(index+1)];\r\n        this.setState({items});\r\n        this.props.handleChange(items);\r\n    }\r\n    \r\n    /**\r\n     * Maps items to Inputs\r\n     * @param {string} item\r\n     * @param {int} index\r\n     * @param {Array} array\r\n     * @returns {JSX}\r\n     */\r\n    mapItemsToInputs = (item,index,array)=>{\r\n        return (\r\n            <InputGroup key={index}>\r\n                <Input type=\"text\" id={index} onChange={this.handleChange}/>\r\n                <InputGroupAddon addonType=\"append\">\r\n                    <InputGroupText onClick={this.removeItem(index)}>\r\n                        delete\r\n                    </InputGroupText>\r\n                </InputGroupAddon>\r\n            </InputGroup>\r\n        )\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        let items = this.state.items.map(this.mapItemsToInputs);\r\n        return (\r\n            <Row>\r\n                <Col>\r\n                    <Button onClick={this.addItem}>Add Item</Button>\r\n                    {items}\r\n                </Col>\r\n            </Row>\r\n        )\r\n    }\r\n};\r\n\r\nListCreator.propTypes = {\r\n    saveEscapeRoom: PropTypes.func,\r\n    escapeRoom: PropTypes.instanceOf(EscapeRoom),\r\n    updateDetails: PropTypes.func,\r\n    updateAccessibility: PropTypes.func,\r\n    showModal: PropTypes.func,\r\n    addComponent: PropTypes.func,\r\n    removeComponent: PropTypes.func,\r\n    updateComponent: PropTypes.func,\r\n    addRelationship: PropTypes.func,\r\n    removeRelationship: PropTypes.func\r\n}\r\n\r\nexport default ListCreator;","import React, {Component}  from 'react';\r\nimport {Row,Col,Button,Input} from 'reactstrap'\r\nimport puzzleGenerator from '../generators/PuzzleGenerator';\r\nimport ListCreator from '../components/ListCreator';\r\nimport PropTypes from 'prop-types';\r\n\r\n/** \r\n * Class for PuzzleGenerator\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass PuzzleGenerator extends Component {\r\n    /** Creates PuzzleGenerator */\r\n    constructor(){\r\n        super();\r\n        this.state = {word:\"\",words:[],hints:[],answers:[],cipher:\"pigpen\"};\r\n        this.PuzzleGenerator = new puzzleGenerator();\r\n    }\r\n\r\n    /**\r\n     * Handles Input Change\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleChange = (e) => { \r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handles List Change\r\n     * @function\r\n     * @param {String} key\r\n     * @param {Array} list\r\n     */\r\n    handleListChange = (key) => (list) => {\r\n        this.setState({[key]:list});\r\n    }\r\n\r\n    /**\r\n     * Handles Word Puzzle Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleWordClick = (e) => {\r\n        let options = {...this.state};\r\n        this.props.handlePuzzleChange(this.PuzzleGenerator.generateWord('hidden',options))\r\n    }\r\n\r\n    /**\r\n     * Handles Riddle Puzzle Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleRiddleClick = (e) => {\r\n        this.props.handlePuzzleChange(this.PuzzleGenerator.generateWord('riddle'))\r\n    }\r\n\r\n    /**\r\n     * Handles Cipher Puzzle Click\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleCipherClick = (e) => {\r\n        this.props.handlePuzzleChange(this.PuzzleGenerator.generateCipher(this.state.cipher))\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Method\r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        switch(this.props.puzzleType){\r\n            case 'Hidden Word':\r\n                return (\r\n                    <Row>\r\n                        <Col>\r\n                            <Input type=\"text\" name='word' id='word' placeholder='hidden word'value={this.state.word} onChange={this.handleChange}></Input>\r\n                            <p>Words</p>\r\n                            <ListCreator handleChange={this.handleListChange('words')}/>\r\n                            <p>Hints</p>\r\n                            <ListCreator handleChange={this.handleListChange('hints')}/>\r\n                            <p>Answers</p>\r\n                            <ListCreator handleChange={this.handleListChange('answers')}/>\r\n                            <Button block onClick={this.handleWordClick} color=\"primary\">Generate Hidden Word</Button>\r\n                        </Col>\r\n                    </Row>\r\n                )\r\n            case 'Riddle':\r\n                return (\r\n                    <Row>\r\n                        <Col>\r\n                            <Button block onClick={this.handleRiddleClick} color=\"primary\">Generate Random Riddle</Button>\r\n                        </Col>\r\n                    </Row>\r\n                )\r\n            case 'Cipher':\r\n                return (\r\n                    <Row>\r\n                        <Col>\r\n                            <Input type=\"select\" name=\"cipher\" id=\"cipher\" placeholder=\"cipher\" value={this.state.cipher} onChange={this.handleChange}>\r\n                                <option>pigpen</option>\r\n                            </Input>\r\n                            <Button block onClick={this.handleCipherClick} color=\"primary\">Generate Cipher</Button>\r\n                        </Col>\r\n                    </Row>\r\n                )\r\n            default:\r\n                return null;\r\n        }\r\n\r\n    }\r\n}\r\n\r\nPuzzleGenerator.propTypes = {\r\n    puzzleType: PropTypes.string,\r\n    handlePuzzleChange: PropTypes.func,\r\n}\r\n\r\nexport default PuzzleGenerator;","import React, {Component}  from 'react';\r\nimport { Container, Row, Col, Alert } from 'reactstrap';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Class for Verify\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Verify extends Component {\r\n    /** Creates Verify */\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {color:\"success\",message:\"\"};\r\n    }\r\n\r\n    /**\r\n     * Verifies Token from URL\r\n     * @function\r\n     */\r\n    verify = async () => {\r\n        return this.props.verify(this.props.token);\r\n    }\r\n\r\n    /**\r\n     * Sends Verify Email\r\n     * @function\r\n     */\r\n    sendVerify = async () => {\r\n        return this.props.sendVerify();\r\n    }\r\n\r\n    /**\r\n     * React Lifecycle Method\r\n     * Component Mounted\r\n     */\r\n    async componentDidMount(){\r\n        let result;\r\n        try{\r\n            if(this.props.token!==undefined && this.props.token!==\"\")\r\n                result = await this.verify();\r\n            else\r\n                result = await this.sendVerify();\r\n        }catch(error){\r\n            if(this.props.token!==undefined && this.props.token!==\"\")\r\n                result = {color:\"warning\", message: \"An error has occured, your account may have been verified\"};\r\n            else\r\n                result = {color:\"warning\", message: \"An error has occured, a verification email may have been sent\"};\r\n        }\r\n        this.setState(result);\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Method\r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        return (\r\n            <Container fluid>\r\n                <Row>\r\n                    <Col>\r\n                        <h1>Verify Your Account</h1>\r\n                        <p>To access The Escape Room Generator, you must first verify your account. Please check your emails and click the link.</p>\r\n                        <Alert isOpen={this.state.message!==\"\"} color={this.state.color}>{this.state.message}</Alert>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n};\r\n\r\nVerify.propTypes = {\r\n    token: PropTypes.string,\r\n    verify: PropTypes.func,\r\n    sendVerify: PropTypes.func\r\n}\r\n\r\nexport default Verify;","import React, {Component} from 'react';\r\nimport { Container, Row, Col, Alert, Button, Form, FormGroup, Label, Input, FormText} from 'reactstrap';\r\nimport PasswordStrengthMeter from './PasswordStrengthMeter'\r\nimport zxcvbn from 'zxcvbn';\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\n\r\n/**\r\n * Class for Reset\r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass Reset extends Component {\r\n    /** Creates Reset */\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            password:\"\",\r\n            password2:\"\",\r\n            message: \"\",\r\n            color:\"success\",\r\n            testResult: {}\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles Form Submit\r\n     * @function\r\n     * @param {Event} e\r\n     */\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if(this.props.password!==\"\" && this.props.password===this.props.password2 && this.props.signUp){\r\n            let result = await this.props.reset(this.props.token,this.state.password);\r\n            this.setState({message:result.message, color:result.color});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles Input Change\r\n     * @function\r\n     */\r\n    handleChange = (e) => {\r\n        if(e.target.id === \"password\"){\r\n            this.setState({\r\n                [e.target.id]: e.target.value,\r\n                testResult: zxcvbn(e.target.value)\r\n            },()=>this.setState({message:this.composemessage()}));\r\n        } else {\r\n            this.setState({\r\n                [e.target.id]: e.target.value,\r\n            },()=>this.setState({message:this.composemessage()}));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles ReCAPTCHA\r\n     * @function\r\n     * @param {bool} value\r\n     */\r\n    handleReCAPTCHA = (value) => {\r\n        this.setState({recaptcha:value})\r\n    }\r\n\r\n    /**\r\n     * Composes Error Message\r\n     * @function\r\n     * @returns {String}\r\n     */\r\n    composemessage = () => {\r\n        let messages = [];\r\n        if(this.state.password!==\"\"&&this.state.password!==this.state.password2)\r\n            messages.push(\"Passwords Must Match\");\r\n        if(this.state.testResult.score<4)\r\n            messages.push(\"Password Not Strong Enough\");\r\n        if(this.state.password.length < 8)\r\n            messages.push(\"Password Too Short\");\r\n        return messages.join(\", \");   \r\n    }\r\n\r\n    /**\r\n     * Handles Alert Dismiss\r\n     * @function\r\n     */\r\n    handleDismiss = (event) => {\r\n        this.setState({message: \"\"});\r\n    }\r\n\r\n    /**\r\n     * Handles Test Result\r\n     * @function\r\n     */\r\n    handleTestResult = (testResult) => {\r\n        this.setState({testResult:testResult});\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Method\r\n     * Renders Layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        if(this.props.token!==undefined && this.props.token!==\"\"){\r\n            return (\r\n                <div className=\"sign-up full-container verticaly-center-content\">\r\n                    <Container>\r\n                        <Row>\r\n                            <Col>\r\n                                <Form noValidate onSubmit={this.handleSubmit}>\r\n                                    <FormGroup>\r\n                                        <Label for=\"password\">Password</Label>\r\n                                        <Input required type=\"password\" name=\"password\" id=\"password\" value={this.state.password} onChange={this.handleChange}/>\r\n                                        <PasswordStrengthMeter score={this.state.testResult.score}/>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Label for=\"password2\">Re-Type Password</Label>\r\n                                        <Input required type=\"password\" name=\"password2\" id=\"password2\" value={this.state.password2} onChange={this.handleChange}/>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <div style={{\"width\":\"fit-content\",\"margin\":\"auto\"}}>\r\n                                            <ReCAPTCHA\r\n                                                sitekey={process.env.REACT_APP_RECAPTCHA}\r\n                                                onChange={this.handleReCAPTCHA}\r\n                                            />\r\n                                        </div>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Button block disabled={this.state.password===\"\" || this.state.message!==\"\" || !this.state.recaptcha}>Reset Password</Button>\r\n                                    </FormGroup>\r\n                                    <FormText>\r\n                                        Passwords must be strong and 8 characters in length or more\r\n                                    </FormText>\r\n                                    <Alert isOpen={this.state.message !== \"\"} toggle={this.handleDismiss} color=\"danger\">{this.state.message}</Alert>\r\n                                </Form>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <Container fluid>\r\n                    <Row>\r\n                        <Col>\r\n                            <h1>Password Reset</h1>\r\n                            <p>To reset your password login to your account, click the profile dropdown and click reset password.</p>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Reset;","import React, {Component}  from 'react';\r\nimport { Route, Switch } from 'react-router';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Dashboard, EscapeRoomDesigner, Login, Signup, Tutorials, About, ConditionalRoute, NotFound, Verify, Reset } from '../components/index.js';\r\nimport EscapeRoom from '../models/EscapeRoom.js';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Business logic of app \r\n * handles creating and updating of data \r\n * handles navigation \r\n * @extends Component\r\n * @author Alistair Quinn\r\n */\r\nclass BusinessLogic extends Component {\r\n    /**\r\n     * React lifecycle method\r\n     */\r\n    componentWillReceiveProps(){\r\n        this.setState({user:this.props.redux.state.user});\r\n    }\r\n\r\n    /**\r\n     * Popultes escape rooms by user ID\r\n     * @param {String} userId\r\n     * @returns {bool} success\r\n     */\r\n    populateEscapeRooms = async (userId) => {\r\n        //Get User Details and Update Redux Store\r\n        if (userId !== null && userId !== undefined){\r\n            try{\r\n                let result = await this.props.services['escape-rooms'].find({query:{userId:userId}});\r\n                if(result.action.type.includes('FULFILLED')){\r\n                    const escapeRooms = result.value.data;\r\n                    if (escapeRooms!==null && escapeRooms!==undefined){\r\n                        this.props.redux.actions.escapeRooms.updateEscapeRooms(escapeRooms);\r\n                        this.setState({loading:false});\r\n                    }\r\n                }\r\n                return true;\r\n            }catch(e){\r\n                // User Not Verified\r\n                if(e.message.includes(\"verified\")){\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Authenticates login credentials \r\n     * @param {Object} credentials \r\n     * @returns {string} Error\r\n     */\r\n    authenticateCredentials = async(credentials)=>{\r\n        try {\r\n            let { user } = await this.props.feathersClient.authenticate(credentials);\r\n            if(user!=null){\r\n                user.token = window.localStorage.getItem('feathers-jwt');\r\n                const verified = await this.populateEscapeRooms(user._id);\r\n                user.verified = verified;\r\n                this.props.redux.actions.user.login(user);\r\n                this.props.history.push('/dashboard');\r\n            }\r\n        } catch(error){\r\n            return error.message;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new user \r\n     * @param {Object} credentials \r\n     * @returns {string} Error\r\n     */\r\n    signUp = async(credentials)=>{\r\n        //Create a new user \r\n        try{\r\n            let queryResult = await this.props.services.users.create(credentials);\r\n            if(queryResult.action.type.includes('FULFILLED')){\r\n                await this.authenticateCredentials(credentials);\r\n                this.props.history.push('/verify');\r\n            }\r\n        } catch(error){\r\n            return error.message;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Opens escape room designer\r\n     * @param {EscapeRoom} escapeRoom\r\n     */\r\n    editEscapeRoom = (escapeRoom) => {\r\n        this.props.redux.actions.escapeRoom.setSelectedEscapeRoom(escapeRoom);\r\n        this.props.history.push('/designer');\r\n    }\r\n    \r\n    /**\r\n     * Creates a new escape room \r\n     * then opens designer\r\n     */\r\n    newEscapeRoom = async() => {\r\n        const userId = this.props.redux.state.user._id;\r\n        const newEscapeRoom = new EscapeRoom(userId);\r\n        let response = await this.props.services['escape-rooms'].create(newEscapeRoom);\r\n        if(response.action.type.includes('FULFILLED')){\r\n            const escapeRoom = response.value;\r\n            if (escapeRoom!==null){\r\n                this.props.redux.actions.escapeRooms.addEscapeRoom(escapeRoom);\r\n                this.props.redux.actions.escapeRoom.setSelectedEscapeRoom(escapeRoom);\r\n                this.props.history.push('/designer');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Deletes an escape room\r\n     * @function\r\n     * @param {EscapeRoom} escapeRoom\r\n     */\r\n    deleteEscapeRoom = (escapeRoom) => {\r\n        this.props.services['escape-rooms'].remove(escapeRoom._id);\r\n        this.props.redux.actions.escapeRooms.removeEscapeRoom(escapeRoom);\r\n    }\r\n\r\n    /**\r\n     * Saves an escape room\r\n     * @function\r\n     * @param {EscapeRoom} escapeRoom\r\n     */\r\n    saveEscapeRoom = async(escapeRoom) => {\r\n        if(escapeRoom._id!==undefined){\r\n            escapeRoom.details.estimatedCost = EscapeRoom.calculateCost(escapeRoom);\r\n            await this.props.services['escape-rooms'].update(escapeRoom._id,escapeRoom);\r\n            await this.props.redux.actions.escapeRooms.updateEscapeRoom(escapeRoom);\r\n        }\r\n        this.props.history.push('/');\r\n    }\r\n\r\n    /**\r\n     * Verifies a user account via token\r\n     * @function\r\n     * @param {String} token\r\n     * @returns {Status} Result\r\n     */\r\n    verify = async(token)=>{\r\n        let result = await this.props.services['auth-management'].create({action:'verifySignupLong',value:token});\r\n        if(result.action.type.includes('FULFILLED')){\r\n            return {color:\"success\", message:\"Account Verified\"};\r\n        } else {\r\n            return {color:\"danger\", message:\"Error\"}\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sends a verify link\r\n     * @function\r\n     * @returns {Status} Result\r\n     */\r\n    sendVerify = async()=>{\r\n        let result = await this.props.services['auth-management'].create({action:'resendVerifySignup',value:{email:this.props.redux.state.user.email}});\r\n        if(result.action.type.includes('FULFILLED')){\r\n            return {color:\"success\", message:\"Account Verified\"};\r\n        } else {\r\n            return {color:\"danger\", message:\"Error\"}\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Resets users password\r\n     * @function\r\n     * @param {String} email\r\n     * @param {String} token\r\n     * @param {String} password\r\n     * @returns {Status} Result\r\n     */\r\n    reset = async(token, password) => {\r\n        let result = await this.props.services['auth-management'].create({action:'resetPwdLong',value:{token,password}});\r\n        if(result.action.type.includes('FULFILLED')){\r\n            return {color:\"success\", message:\"Password Reset\"};\r\n        } else {\r\n            return {color:\"danger\", message:\"Error\"}\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sends password reset\r\n     * @function\r\n     * @param {String} email\r\n     * @returns {Status} Result\r\n     */\r\n    sendReset = async(email) => {\r\n        let result = await this.props.services['auth-management'].create({action:'sendResetPwd', value:{email}, notifierOptions:{}});\r\n        if(result.action.type.includes('FULFILLED')){\r\n            return {color:\"success\", message:\"Password Reset Send, Check Emails\"};\r\n        } else {\r\n            return {color:\"danger\", message:\"Error\"}\r\n        }\r\n    }\r\n\r\n    /** \r\n     * React Lifecycle Render\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        const user = this.props.redux.state.user;\r\n        const escapeRooms = this.props.redux.state.escapeRooms;\r\n        const escapeRoom = this.props.redux.state.escapeRoom;\r\n        const escapeRoomActions = this.props.redux.actions.escapeRoom;\r\n        const showModal = this.props.redux.actions.modal.showModal;\r\n        const loggedIn = window.localStorage.getItem(\"feathers-jwt\") != null;\r\n        return (\r\n            <Switch>\r\n                <Redirect exact from=\"/\" to=\"dashboard\"/>\r\n                <ConditionalRoute path=\"/dashboard\" condition={user.isVerified && loggedIn} redirect={'/verify'} render={(routeProps) => (<Dashboard escapeRooms={escapeRooms} showModal={showModal} editEscapeRoom={this.editEscapeRoom} newEscapeRoom={this.newEscapeRoom} deleteEscapeRoom={this.deleteEscapeRoom}/>)}/>\r\n                <ConditionalRoute path=\"/designer\" condition={Object.keys(escapeRoom).length > 0 && escapeRoom!==undefined && loggedIn} redirect={'/'} render={(routeProps) =>(<EscapeRoomDesigner showModal={showModal} escapeRoom={escapeRoom} saveEscapeRoom={this.saveEscapeRoom} updateDetails={escapeRoomActions.updateDetails} updateAccessibility={escapeRoomActions.updateAccessibility} addComponent={escapeRoomActions.addComponent} removeComponent={escapeRoomActions.removeComponent} updateComponent={escapeRoomActions.updateComponent} addRelationship={escapeRoomActions.addRelationship} removeRelationship={escapeRoomActions.removeRelationship}/>)}/>\r\n                <ConditionalRoute path=\"/login\" condition={!loggedIn} redirect={'/dashboard'} render={(routeProps) => (<Login authenticateCredentials={this.authenticateCredentials}/>)}/>\r\n                <ConditionalRoute path=\"/signup\" condition={!loggedIn} redirect={'/dashboard'} render={(routeProps) => (<Signup signUp={this.signUp}/>)}/>\r\n                <Route path=\"/about\" component={About}/>\r\n                <Route path=\"/tutorials\" component={Tutorials}/>\r\n                <ConditionalRoute exact path=\"/verify\" condition={!user.isVerified && loggedIn} redirect={'/login'} render={(routeProps) => (<Verify token={routeProps.match.params.token} sendVerify={this.sendVerify}/>)}/>\r\n                <ConditionalRoute path=\"/verify/:token\" condition={!user.isVerified && loggedIn} redirect={'/login'} render={(routeProps) => (<Verify token={routeProps.match.params.token} verify={this.verify} />)}/>\r\n                <ConditionalRoute exact path=\"/reset\" condition={loggedIn} redirect={'/login'} component={Reset}/>\r\n                <ConditionalRoute path=\"/reset/:token\" condition={loggedIn} redirect={'/login'} render={(routeProps) => (<Reset token={routeProps.match.params.token} reset={this.reset}/>)}/>\r\n                <Route component={NotFound}/>\r\n            </Switch> \r\n        )\r\n    }\r\n};\r\n\r\nBusinessLogic.propTypes = {\r\n    history: PropTypes.object,\r\n    feathersClient: PropTypes.object,\r\n    redux: PropTypes.object,\r\n    services: PropTypes.object\r\n}\r\n\r\nexport default BusinessLogic;","import React, {Component}  from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Navbar, NavbarBrand, NavbarToggler, Collapse, Nav, NavItem, NavLink, Dropdown, DropdownToggle, DropdownMenu} from 'reactstrap';\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport Profile from '../components/Profile';\r\nimport BusinessLogic from './BusinessLogic.js';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/Main.css';\r\n\r\n/**\r\n * Defines main layout of app \r\n * Handles re-authentication of logged in user \r\n * Renders business logic \r\n * @author Alistair Quinn\r\n */\r\nclass Main extends Component {\r\n    /** Creates Main */\r\n    constructor(){\r\n        super();\r\n        this.state = {profile:false, isProfileOpen:false,tooltipOpen:false, isOpen:false};\r\n    }\r\n\r\n    /** \r\n     * Toggles is Open\r\n     * @function \r\n     */\r\n    toggle = () => {\r\n        this.setState({isOpen:!this.state.isOpen});\r\n    }\r\n\r\n    /** \r\n     * Toggles is Profile \r\n     * @function\r\n     */\r\n    toggleProfile = () => {\r\n        this.setState({isProfileOpen:!this.state.isProfileOpen});\r\n    }\r\n\r\n    /**\r\n     * React lifecycle method\r\n     * Updates profile if user has changed\r\n     * @param {Object} prevProps \r\n     */\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.redux.state.user.email!==this.props.redux.state.user.email){\r\n            if(this.props.redux.state.user.email !== undefined){\r\n                this.setState({profile:true});\r\n            } else {\r\n                this.setState({profile:false});\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * React lifecycle method \r\n     * Updates profile is logged in\r\n     */\r\n    componentDidMount() {\r\n        if (window.localStorage.getItem('feathers-jwt') && this.props.redux.state.user.email!==undefined){\r\n            this.setState({profile:true});\r\n        } else if (window.localStorage.getItem('feathers-jwt') && this.props.redux.state.user.email===undefined){\r\n            this.authenticate();\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Authenticates User \r\n     * @function \r\n     */\r\n    authenticate = async() => {\r\n        //Authenticates JWT and then populates user/escapeRooms\r\n        try{\r\n            let { user } = await this.props.feathersClient.reAuthenticate();\r\n            if(user!=null){\r\n                user.token = window.localStorage.getItem('feathers-jwt');\r\n                await this.populateEscapeRooms(user._id);\r\n                this.props.redux.actions.user.login(user);\r\n            }\r\n        } catch(error){\r\n            this.logout();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Popultes escape rooms by user ID\r\n     * @function\r\n     * @param {String} userId\r\n     * @returns {Array}\r\n     */\r\n    populateEscapeRooms = async (userId) => {\r\n        //Get User Details and Update Redux Store\r\n        if (userId !== null && userId !== undefined){\r\n            try{\r\n                let result = await this.props.services['escape-rooms'].find({query:{userId:userId}});\r\n                if(result.action.type.includes('FULFILLED')){\r\n                    const escapeRooms = result.value.data;\r\n                    if (escapeRooms!==null && escapeRooms!==undefined){\r\n                        this.props.redux.actions.escapeRooms.updateEscapeRooms(escapeRooms);\r\n                        this.setState({loading:false});\r\n                    }\r\n                }\r\n                return true;\r\n            }catch(e){\r\n                // User Not Verified\r\n                if(e.message.includes(\"verified\")){\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Logs out user, tidys up \r\n     * @function \r\n     */\r\n    logout = () => {\r\n        this.props.feathersClient.logout();\r\n        window.localStorage.removeItem('feathers-jwt');\r\n        this.setState({profile:null});\r\n        this.props.redux.actions.user.logout();\r\n        this.props.history.push('/');\r\n    }\r\n\r\n    /**\r\n     * Edits a users email\r\n     * @function\r\n     * @param {String} email\r\n     * @param {String} password\r\n     * @param {Object} change\r\n     * @returns {Object} \r\n     */\r\n    identityChange = async(user, password, changes) => {\r\n        try {\r\n            let result = await this.props.services['auth-management'].create({action:'identityChange',value:{user,password,changes}});\r\n            if(result.action.type.include('FULFILLED')){\r\n                return {color:\"success\", message:\"Email Saved\"};\r\n            } else {\r\n                return {color:\"danger\", message:\"Error\"}\r\n            }\r\n        } catch(error){\r\n            return {color:\"warning\", message: \"An error has occured, changed may have been made\"};\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sends Password Reset\r\n     * @function\r\n     * @returns {Object}\r\n     */\r\n    sendPasswordReset = async() => {\r\n        try {\r\n            let result = await this.props.services['auth-management'].create({action:'sendResetPwd', value:{email:this.props.redux.state.user.email},notifierOptions:{}});\r\n            if(result.action.type.include('FULFILLED')){\r\n                return {color:\"success\", message:\"Email Saved\"};\r\n            } else {\r\n                return {color:\"danger\", message:\"Error\"}\r\n            }\r\n        } catch(error){\r\n            return {color:\"warning\", message:\"An error has occured, a password reset email may have been sent\"};\r\n        }\r\n    }\r\n\r\n    /**\r\n     * React lifecycle method \r\n     * Renders main layout\r\n     * @returns {JSX}\r\n     */\r\n    render() {\r\n        const loading = this.state.loading || this.props.redux.state.usersService.isLoading || this.props.redux.state.escapeRoomsService.isLoading || this.props.redux.state.authManagementService.isLoading;\r\n        const modal = this.props.redux.state.modal;\r\n        const hideModal = this.props.redux.actions.modal.hideModal;\r\n        let user = this.props.redux.state.user;\r\n        let profile;\r\n        if(this.state.profile){\r\n            profile =                                 \r\n            <Dropdown isOpen={this.state.isProfileOpen} toggle={this.toggleProfile} nav inNavbar>\r\n                <DropdownToggle nav caret>\r\n                Profile\r\n                </DropdownToggle>\r\n                <DropdownMenu right>\r\n                    <Profile user={user} identityChange={this.identityChange} sendPasswordReset={this.sendPasswordReset}/>\r\n                    <Button id=\"LogoutButton\" onClick={this.logout} block>Logout</Button>\r\n                </DropdownMenu>\r\n            </Dropdown>\r\n        } else {\r\n            profile = null;\r\n        }\r\n        return (\r\n            <div>   \r\n                <LoadingOverlay className={'loading-overlay'} active={loading} spinner>       \r\n                    <header>\r\n                        <Navbar color=\"light\" light expand=\"md\">\r\n                            <NavbarBrand href=\"/#/\"><img src=\"/images/logos/main.svg\" alt=\"Logo\"/></NavbarBrand>\r\n                            <NavbarToggler onClick={this.toggle} />\r\n                            <Collapse isOpen={this.state.isOpen} navbar>\r\n                                <Nav className=\"ml-auto\" navbar>\r\n                                <NavItem>\r\n                                    <NavLink href=\"https://github.com/AldoAbdn/Escape-Room-Generator\">GitHub</NavLink>\r\n                                </NavItem>\r\n                                <NavItem>\r\n                                    <Link className=\"nav-link\" to=\"/about\">About</Link>\r\n                                </NavItem>\r\n                                <NavItem>\r\n                                    <Link className=\"nav-link\" to=\"/tutorials\">Tutorials</Link>\r\n                                </NavItem>\r\n                                {profile}\r\n                                </Nav>\r\n                            </Collapse>\r\n                        </Navbar>\r\n                    </header>\r\n                    <main>\r\n                        <BusinessLogic history={this.props.history} feathersClient={this.props.feathersClient} redux={this.props.redux} services={this.props.services}/>\r\n                    </main>\r\n                </LoadingOverlay>\r\n                <Modal isOpen={modal.isOpen} >\r\n                    <ModalHeader>{modal.header}</ModalHeader>\r\n                    <ModalBody>\r\n                        {modal.body}\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"success\" onClick={()=>{\r\n                            modal.confirm.action();\r\n                            hideModal();\r\n                        }}>{modal.confirm.text}</Button>\r\n                        <Button color=\"danger\" onClick={()=>{\r\n                            modal.cancel.action();\r\n                            hideModal();\r\n                        }}>{modal.cancel.text}</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nMain.propTypes = {\r\n    redux: PropTypes.object,\r\n    history: PropTypes.object,\r\n    services: PropTypes.array,\r\n    feathersClient: PropTypes.object,\r\n}\r\n\r\nexport default Main;","/**\r\n * Redux Actions for User\r\n * @module Actions/User\r\n * @author Alistair Quinn\r\n */\r\n\r\n /** \r\n  * Set User \r\n  * @param {User} user\r\n  * @returns {Action} Action \r\n  */\r\nexport function login(user) {\r\n    return {\r\n        type: 'LOGIN', user\r\n    }\r\n}\r\n\r\n/** \r\n * Unset User \r\n * @returns {Action} Action\r\n */\r\nexport function logout() {\r\n    return {\r\n        type: 'LOGOUT'\r\n    }\r\n}\r\n\r\n","/**\r\n * Redux Actions for EscapeRooms\r\n * @module Actions/EscapeRooms\r\n * @author Alistair Quinn\r\n */\r\n\r\n /** \r\n  * Add an Escape Room \r\n  * @param {EscapeRoom} escapeRoom\r\n  * @returns {Action} Action\r\n  */\r\nexport function addEscapeRoom(escapeRoom){\r\n    return {\r\n        type: 'ADD_ESCAPE_ROOM',\r\n        escapeRoom\r\n    }\r\n}\r\n\r\n/** \r\n * Remove an Escape Room \r\n * @param {EscapeRoom} escapeRoom\r\n * @returns {Action} Action \r\n */\r\nexport function removeEscapeRoom(escapeRoom){\r\n    return {\r\n        type: 'REMOVE_ESCAPE_ROOM',\r\n        escapeRoom\r\n    }\r\n}\r\n\r\n/** \r\n * Updates an Existing Escape Room \r\n * @param {EscapeRoom} escapeRoom\r\n * @returns {Action} Action\r\n */\r\nexport function updateEscapeRoom(escapeRoom){\r\n    return {\r\n        type: 'UPDATE_ESCAPE_ROOM',\r\n        escapeRoom\r\n    }\r\n}\r\n\r\n/** \r\n * Update List of Escape Rooms \r\n * @param {Array<EscapeRoom>} escapeRooms \r\n * @returns {Action} Action\r\n */\r\nexport function updateEscapeRooms(escapeRooms){\r\n    return {\r\n        type: 'UPDATE_ESCAPE_ROOMS',\r\n        escapeRooms\r\n    }\r\n}","/**\r\n * Redux Actions for EscapeRoom\r\n * @module Actions/EscapeRoom\r\n * @author Alistair Quinn\r\n */\r\n\r\n /** \r\n  * Set Selected Escape Room \r\n  * @param {EscapeRoom} escapeRoom \r\n  * @return {Action} Action\r\n  */\r\nexport function setSelectedEscapeRoom(escapeRoom){\r\n    return {\r\n        type: 'SET_SELECTED_ESCAPE_ROOM',\r\n        escapeRoom\r\n    }\r\n}\r\n\r\n/** Clears Selected Escape Room \r\n * @param {EscapeRoom} escapeRoom \r\n * @return {Action} Action\r\n */\r\nexport function clearSelectedEscapeRoom(escapeRoom){\r\n    return {\r\n        type: 'CLEAR_SELECTED_ESCAPE_ROOM',\r\n        escapeRoom\r\n    }\r\n}\r\n\r\n/** \r\n * Update Selected Escape Room's Details \r\n * @param {EscapeRoom} escapeRoom \r\n * @return {Action} Action\r\n */\r\nexport function updateDetails(details){\r\n    return {\r\n        type: 'UPDATE_DETAILS',\r\n        details\r\n    }\r\n}\r\n\r\n/** \r\n * Update Selected Escape Rooms's Accessibility \r\n * @param {Accessibility} accessibility \r\n * @return {Action} Action\r\n */\r\nexport function updateAccessibility(accessibility){\r\n    return {\r\n        type: 'UPDATE_ACCESSIBILITY',\r\n        accessibility\r\n    }\r\n}\r\n\r\n/** \r\n * Add Component to Selected Escape Room \r\n * @param {Component} component\r\n * @param {string} areaId \r\n * @return {Action} Action\r\n */\r\nexport function addComponent(component, areaId){\r\n    return {\r\n        type: 'ADD_COMPONENT',\r\n        component,\r\n        areaId\r\n    }\r\n}\r\n\r\n/** \r\n * Remove Component to Selected Escape Room \r\n * @param {string} componentId \r\n * @return {Action} Action\r\n */\r\nexport function removeComponent(componentId){\r\n    return {\r\n        type: 'REMOVE_COMPONENT',\r\n        componentId\r\n    }\r\n}\r\n\r\n/** \r\n * Update an Existing Component to Selected Escape Room \r\n * @param {Component} component\r\n * @param {string} areaId \r\n * @return {Action} Action\r\n */\r\nexport function updateComponent(component,areaId){\r\n    return {\r\n        type: 'UPDATE_COMPONENT',\r\n        component,\r\n        areaId\r\n    }\r\n}\r\n\r\n/** \r\n * Add Relationship Between Components \r\n * @param {string} componentId\r\n * @param {string} stringId\r\n * @param {bool} isInput \r\n * @return {Action} Action\r\n */\r\nexport function addRelationship(componentId,parentId,isInput){\r\n    return {\r\n        type: 'ADD_RELATIONSHIP',\r\n        componentId,\r\n        parentId,\r\n        isInput\r\n    }\r\n}\r\n\r\n/** \r\n * Remove Relationship Between Components \r\n * @param {string} componentId\r\n * @param {string} stringId\r\n * @param {bool} isInput\r\n * @return {Action} Action \r\n */\r\nexport function removeRelationship(componentId,parentId,isInput){\r\n    return {\r\n        type: 'REMOVE_RELATIONSHIP',\r\n        componentId,\r\n        parentId,\r\n        isInput\r\n    }\r\n}\r\n\r\n","/**\r\n * Redux Actions for Modal\r\n * @module Actions/Modal\r\n * @author Alistair Quinn\r\n */\r\n\r\n /** \r\n  * Shows Modal \r\n  * @param {Modal} modal\r\n  * @returns {Action} Action\r\n  */\r\nexport function showModal(modal){\r\n    return {\r\n        type: 'SHOW_MODAL',\r\n        modal\r\n    }\r\n}\r\n\r\n/** \r\n * Hide Modal \r\n * @returns {Action} Action \r\n */\r\nexport function hideModal(){\r\n    return {\r\n        type: 'HIDE_MODAL'\r\n    }\r\n}","/**\r\n * Connects redux state and actions to the whole app\r\n * makes sure routing is possible\r\n * @class App\r\n * @author Alistair Quinn  \r\n */\r\n\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router'\r\nimport '../styles/App.css';\r\nimport Main from './Main';\r\nimport * as userActionCreators from '../actions/user';\r\nimport * as escapeRoomsActionCreators from '../actions/escapeRooms';\r\nimport * as escapeRoomActionCreators from '../actions/escapeRoom';\r\nimport * as modalActionCreators from '../actions/modal';\r\n\r\n/**\r\n * Maps state to props\r\n * @param {object} state \r\n */\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    redux: state\r\n  }\r\n}\r\n\r\n/**\r\n * Maps dispatch to props\r\n * @param {object} dispatch \r\n */\r\nfunction mapDispatchToProps(dispatch){\r\n  const user = bindActionCreators(userActionCreators, dispatch);\r\n  const escapeRooms = bindActionCreators(escapeRoomsActionCreators, dispatch);\r\n  const escapeRoom = bindActionCreators(escapeRoomActionCreators, dispatch);\r\n  const modal = bindActionCreators(modalActionCreators, dispatch);\r\n  return {user, escapeRooms, escapeRoom, modal};\r\n}\r\n\r\n/**\r\n * \r\n * @param {object} stateProps \r\n * @param {object} dispatchProps \r\n * @param {object} ownProps \r\n */\r\nfunction mergeProps(stateProps, dispatchProps, ownProps) {\r\n  return {\r\n    ...ownProps,\r\n    redux: {\r\n      state: stateProps.redux,\r\n      actions: dispatchProps\r\n    }\r\n  }\r\n}\r\n\r\n/** Main App Component */\r\nconst App = connect(mapStateToProps, mapDispatchToProps, mergeProps)(Main);\r\n\r\n/** App with Router */\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType !== null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","/**\r\n * Main file, starts front end and renders App \r\n * @author Alistair Quinn\r\n */\r\n//Polyfills\r\nimport 'react-app-polyfill/ie9';\r\n//React Imports \r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { HashRouter } from 'react-router-dom';\r\n//Redux Imports\r\nimport { Provider } from 'react-redux';\r\n//Store \r\nimport configureStore from './stores/store'\r\n//Feathers\r\nimport io from 'socket.io-client';\r\nimport feathers from '@feathersjs/client';\r\n//Feathers-Redux\r\nimport reduxifyServices, {getServicesStatus, bindWithDispatch} from 'feathers-redux';\r\n//CSS\r\nimport './index.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n//Components\r\nimport App from './components/App';\r\n//Service Worker \r\nimport * as serviceWorker from './serviceWorker';\r\n//ReactDnD\r\nimport HTML5Backend from 'react-dnd-html5-backend';\r\nimport TouchBackend from 'react-dnd-touch-backend';\r\nimport MultiBackend, { TouchTransition } from 'react-dnd-multi-backend';\r\nimport { DragDropContextProvider } from 'react-dnd';\r\nlet pipline = {\r\n    backends: [\r\n        {backend: HTML5Backend},\r\n        {\r\n            backend: TouchBackend({enableMouseEvents:true}),\r\n            preview: true,\r\n            transition: TouchTransition\r\n        }\r\n    ]\r\n};\r\nlet backend = MultiBackend(pipline);\r\n\r\n//Feathers Configuration \r\nexport const feathersClient = feathers()\r\n    .configure(feathers.socketio(io()))\r\n    .configure(feathers.authentication());\r\n\r\n//Configure Redux\r\nconst rawServices = reduxifyServices(feathersClient, ['users', 'escape-rooms', 'auth-management']);\r\nconst store = configureStore(rawServices,{user:{},escapeRooms:[],escapeRoom:{}});\r\nconst services = bindWithDispatch(store.dispatch, rawServices);\r\n\r\n//Router\r\nconst router = (\r\n    <DragDropContextProvider backend={backend}>\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App feathersClient={feathersClient} services={services} getServicesStatus={getServicesStatus}/>\r\n            </HashRouter>\r\n        </Provider>\r\n    </DragDropContextProvider>\r\n);\r\n\r\n//Render Router \r\nReactDOM.render(router, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport middlewares from '../middleware';\r\nimport rootReducer from '../reducers';\r\n\r\n/**\r\n * Configures store \r\n * @param {Array<Service>} reduxifiedServices \r\n * @param {Object} initialState \r\n * @returns {Object}\r\n */\r\nexport default function configureStore(reduxifiedServices, initialState) {\r\n    const createStoreWithDevTools = window.devToolsExtension ? window.devToolsExtension()(createStore) : createStore;\r\n    const createStoreWithMiddlewares = applyMiddleware(...middlewares)(createStoreWithDevTools);\r\n    return createStoreWithMiddlewares(rootReducer(reduxifiedServices),initialState);\r\n}"],"sourceRoot":""}