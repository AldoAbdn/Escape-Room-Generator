(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e){e.exports=[{riddle:"It is greater than God and more evil than the devil. The poor have it, the rich need it and if you eat it you\u2019ll die. What is it?",answer:"nothing"},{riddle:"It walks on four legs in the morning, two legs at noon and three legs in the evening. What is it?",answer:"man"},{riddle:"I am the beginning of the end, and the end of time and space. I am essential to creation, and I surround every place. What am I?",answer:"the letter e",info:"End, timE, spacE, Every placE"},{riddle:"What always runs but never walks, often murmurs, never talks, has a bed but never sleeps, has a mouth but never eats?",answer:"a river"},{riddle:"I never was, am always to be. No one ever saw me, nor ever will. And yet I am the confidence of all, To live and breath on this terrestrial ball. What am I?",answer:"the future"},{riddle:"At night they come without being fetched. By day they are lost without being stolen. What are they?",answer:"the stars"},{riddle:"What is in seasons, seconds, centuries and minutes but not in decades, years or days?",answer:"the letter n"},{riddle:"The one who makes it, sells it. The one who buys it, never uses it. The one that uses it never knows that he\u2019s using it. What is it?",answer:"a coffin"},{riddle:"The more you have of it, the less you see. What is it?",answer:"Darkness"},{riddle:"What smells like purple paint, tastes like green paint, and can appear as a white dove?",answer:"white paint"},{riddle:"You start in the top left corner of a 6x6 grid, your goal is to get to the bottom right corner. You can only move to the right or down. You can't move diagonally and you can't move backwards.\nHow many different ways are there to get from the start to the finish?",answer:"252"},{riddle:"There are 9 coins, all except one are the same weight, the odd one is heavier than the rest. You must determine which is the odd one out using an old fashioned balance. How many times do you need to use the balance at a minimum, to determine which coin is the heavier one?",answer:"2"},{riddle:"100 people stand in a circle in order 1 to 100. No. 1 has a sword. He kills the next person (i.e. No. 2) and gives the sword to the next living person (i.e. No. 3). All people do the same until only 1 survives. Which number survives to the end?",answer:"73"},{riddle:"A snail is at the bottom of a 30 foot well. Every hour the snail is able to climb up 3 feet, then immediately slide back down 2 feet. How many hours does it take for the snail to get out of the well?",answer:"28"},{riddle:"Watermelon is 99% water. I have 100 pounds of watermelon. After a week, drying in the sun, the shrivelled watermelon had only dried down to being 98% water. What is the total weight of the watermelon now?",answer:"50"},{riddle:"An executioner lines up 100 prisoners single file and puts a red or a blue hat on each prisoner's head. Every prisoner can see the hats of the people in front of him in the line - but not his own hat, nor those of anyone behind him. The executioner starts at the end (back) and asks the last prisoner the colour of his hat. He must answer 'red' or 'blue'. If he answers correctly, he is allowed to live. If he gives the wrong answer, he is killed instantly and silently. (While everyone hears the answer, no one knows whether an answer was right.) On the night before the line-up, the prisoners confer on strategy to help them. How many prisoners can you guarantee to survive at most?",answer:"99"},{riddle:"You are given a lighter and two ropes that will burn for exactly 1 hour. The ropes do not burn consistently from one end to the other (some parts burn faster than others). How can you time 45 minutes using only what you're given?\nThe ropes:\n 1 ======= 2\n 3 ======= 4\nAnswer using keywords: 'light <number>' and 'wait <rope 1 or 2>'\ne.g.: 'light 1 wait 1 light 3'. This means light end 1 from the start, wait until the first rope burns up, then light end 3",answer:"light 1 light 2 light 3 wait 1 light 4"},{riddle:"Imagine there's an island somewhere in the world that's controlled by a mad dictator who keeps one hundred people imprisoned. The island is swarming with guards, and the waters are filled with sharks. There's no way these people can just escape their fate, except they are all free to leave every night!\nThe rule is that any prisoner can approach the guards at night, and ask the leave, but only if they have green eyes. Since there are no mirrors on the island, and they are unable to communicate amongst themselves, the prisoners do no know their own eye colour. The trick is that all of the one hundred prisoners have greens.\nAs human rights organisations world wide try to get the prisoners freed, you alone are selected to try and find a way to save all those people. The dictator allows you to to speak to the prisoners just once, but there are rules:\n1) You can only make one statement.\n2) You cannot tell them any new information.\n\nYou decide to tell the prisoners \"At least one of you has green eyes.\"\nAfter how many days is the prison empty?",answer:"100"},{riddle:"What is the smallest positive integer that leaves a remainder of 1 when divided by 2, remainder of 2 when divided by 3, a remainder of 3 when divided by 4, and so on up to a remainder of 9 when divided by 10?",answer:"2519"},{riddle:"Sorry, no riddle today. You can add more riddles in the hubot scripts repository in the file riddles.json",answer:"====="}]},328:function(e,t,n){e.exports=n(719)},395:function(e,t){},479:function(e,t,n){},483:function(e,t,n){},493:function(e,t,n){},495:function(e,t,n){},497:function(e,t,n){},599:function(e,t,n){},601:function(e,t,n){},608:function(e,t,n){},610:function(e,t,n){},719:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"login",function(){return zt}),n.d(a,"logout",function(){return Ut});var r={};n.r(r),n.d(r,"addEscapeRoom",function(){return Ft}),n.d(r,"removeEscapeRoom",function(){return Ht}),n.d(r,"updateEscapeRoom",function(){return Gt}),n.d(r,"updateEscapeRooms",function(){return Jt});var o={};n.r(o),n.d(o,"setSelectedEscapeRoom",function(){return Bt}),n.d(o,"clearSelectedEscapeRoom",function(){return Yt}),n.d(o,"updateDetails",function(){return Vt}),n.d(o,"updateAccessibility",function(){return qt}),n.d(o,"addComponent",function(){return Kt}),n.d(o,"removeComponent",function(){return Xt}),n.d(o,"updateComponent",function(){return $t}),n.d(o,"addRelationship",function(){return Qt}),n.d(o,"removeRelationship",function(){return Zt});var s={};n.r(s),n.d(s,"showModal",function(){return en}),n.d(s,"hideModal",function(){return tn});n(329);var i=n(1),c=n.n(i),l=n(20),p=n.n(l),u=n(758),d=n(147),h=n(31),m=n(30),f=n(314),E=n(327),g=function(e){return function(t){return function(n){console.groupCollapsed(n.type),console.info("dispatching",n);var a=t(n);return console.log("next state",e.getState()),console.groupEnd(n.type),a}}},v=[f.a,Object(E.a)(),g],b=n(315),C=n(22);var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(C.a)({},t.user);case"LOGOUT":return{};default:return e}};var O=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_ESCAPE_ROOM":return t.push(n.escapeRoom),t.slice();case"REMOVE_ESCAPE_ROOM":return e=t.findIndex(function(e){return e._id===n.escapeRoom._id}),[].concat(Object(h.a)(t.slice(0,e)),Object(h.a)(t.slice(e+1)));case"UPDATE_ESCAPE_ROOM":return e=t.findIndex(function(e){return e._id===n.escapeRoom._id}),t[e]=n.escapeRoom,t.slice();case"UPDATE_ESCAPE_ROOMS":return n.escapeRooms.slice();default:return t}},w=n(11),k=n(17),j=n(13),x=n(12),D=n(14),R=n(316),S=n.n(R),T=function e(){Object(w.a)(this,e),this._id=S()(),this.name="",this.description="",this.output="",this.inputComponents=[],this.outputComponents=[],this.type="Component",this.position={top:0,left:0},this.estimatedCost="",this.resources=[]},I=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).type="Area",e}return Object(D.a)(t,e),t}(T),M=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).puzzle={},e.puzzleType="Cipher",e.type="Puzzle",e}return Object(D.a)(t,e),t}(T),P=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).type="Prop",e}return Object(D.a)(t,e),t}(T),_=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).lockType="Numeric",e.type="Lock",e}return Object(D.a)(t,e),t}(T),A=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).eventType="Sound Effect",e.type="Event",e}return Object(D.a)(t,e),t}(T),N=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).startTime="",e.endTime="",e.type="Music",e}return Object(D.a)(t,e),t}(T),L=function(){function e(t){Object(w.a)(this,e),this.userId=t,this.details={name:"Unnamed",designers:"",theme:"",minPlayers:"",maxPlayers:"",targetTime:"",difficulty:"3",objective:"",description:"",estimatedCost:""},this.accessibility={protanomaly:!1,protanopia:!1,deuteranomaly:!1,deuteranopia:!1,tritanomaly:!1,tritanopia:!1,coneMonochromacy:!1,rodMonochromacy:!1,largeFonts:!1,highContrast:!1},this.components=[new I]}return Object(k.a)(e,null,[{key:"calculateCost",value:function(e){var t=e.components,n=0,a=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var c=s.value.estimatedCost;isNaN(parseFloat(c))?isNaN(parseFloat(c))||(n+=parseInt(c)):n+=parseFloat(c)}}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}}]),e}();var W=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a={};switch(n.type){case"SET_SELECTED_ESCAPE_ROOM":return Object(C.a)({},n.escapeRoom);case"CLEAR_SELECTED_ESCAPE_ROOM":return{};case"UPDATE_DETAILS":return(a=Object(C.a)({},t)).details=Object(C.a)({},a.details,n.details),a;case"UPDATE_ACCESSIBILITY":return(a=Object(C.a)({},t)).accessibility=Object(C.a)({},a.accessibility,n.accessibility),a;case"ADD_COMPONENT":return(a=Object(C.a)({},t)).components.push(n.component),void 0!==n.areaId&&(e=a.components.findIndex(function(e){return e._id===n.areaId}),a.components[e].outputComponents.push(n.component._id)),a.details.estimatedCost=L.calculateCost(a),a;case"REMOVE_COMPONENT":return e=(a=Object(C.a)({},t)).components.findIndex(function(e){return e._id===n.componentId}),a.components=[].concat(Object(h.a)(a.components.slice(0,e)),Object(h.a)(a.components.slice(e+1))),a.components.forEach(function(e,t,a){a[t].inputComponents=e.inputComponents.filter(function(e){return e!==n.componentId}),a[t].outputComponents=e.outputComponents.filter(function(e){return e!==n.componentId})}),a.details.estimatedCost=L.calculateCost(a),a;case"UPDATE_COMPONENT":return e=(a=Object(C.a)({},t)).components.findIndex(function(e){return e._id===n.component._id}),a.components[e]=Object(C.a)({},a.components[e],n.component),null!=n.areaId&&(a.components.forEach(function(e,t,a){"Area"===e.type&&(a[t].outputComponents=e.outputComponents.filter(function(e){return e!==n.component._id}))}),e=a.components.findIndex(function(e){return e._id===n.areaId}),-1===a.components[e].outputComponents.indexOf(n.component._id)&&a.components[e].outputComponents.push(n.component._id)),a.details.estimatedCost=L.calculateCost(a),a;case"ADD_RELATIONSHIP":return(a=Object(C.a)({},t)).components.forEach(function(e,t,a){e._id===n.parentId&&(n.isInput?-1===e.inputComponents.indexOf(n.componentId)&&e.inputComponents.push(n.componentId):-1===e.outputComponents.indexOf(n.componentId)&&e.outputComponents.push(n.componentId))}),a;case"REMOVE_RELATIONSHIP":return(a=Object(C.a)({},t)).components.forEach(function(e,t,a){e._id===n.parentId&&(n.isInput?-1===e.inputComponents.indexOf(n.componentId)&&(e.inputComponents=e.inputComponents.filter(function(e){return e!==n.componentId})):-1===e.outputComponents.indexOf(n.componentId)&&(e.outputComponents=e.outputComponents.filter(function(e){return e!==n.componentId})))}),a;default:return t}},z=function e(t,n,a,r,o,s){var i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];Object(w.a)(this,e),this.header=t,this.body=n,this.confirm={text:a,action:r},this.cancel={text:o,action:s},this.isOpen=i};var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new z("","","",function(){},"",function(){},!1),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return Object(C.a)({},t.modal,{isOpen:!0});case"HIDE_MODAL":return new z("","","",function(){},"",function(){},!1);default:return e}},F=function(e){return Object(m.combineReducers)({usersService:e.users.reducer,escapeRoomsService:e["escape-rooms"].reducer,routing:b.routerReducer,user:y,escapeRooms:O,escapeRoom:W,modal:U})};var H=n(317),G=n.n(H),J=n(104),B=n.n(J),Y=n(148),V=n.n(Y),q=(n(479),n(481),n(756)),K=(n(483),n(19)),X=n.n(K),$=n(25),Q=n(745),Z=n(730),ee=n(731),te=n(732),ne=n(492),ae=n(749),re=n(750),oe=n(751),se=n(752),ie=n(735),ce=n(736),le=n(737),pe=n(759),ue=n(753),de=n(754),he=n(755),me=n(319),fe=n.n(me),Ee=n(53),ge=n(721),ve=n(722),be=n(723),Ce=n(724),ye=n(725),Oe=n(726),we=n(727),ke=n(728),je=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).handleSubmit=function(){var t=Object($.a)(X.a.mark(function t(n){return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.props.updateUser&&e.props.updateUser({email:e.state.email,password:e.state.password});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(Ee.a)({},t.target.id,t.target.value))},e.handleDismiss=function(t){e.setState({errorMessage:""})},e.handleClick=function(){var t=Object($.a)(X.a.mark(function t(n){var a;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),t.t0=n.target.id,t.next="editButton"===t.t0?4:"saveButton"===t.t0?6:20;break;case 4:return e.setState({edit:!0}),t.abrupt("break",20);case 6:if(a=e.props.user,""!==e.state.email){t.next=12;break}return e.setState({errorMessage:"Email Required"}),t.abrupt("return");case 12:a.email=e.state.email;case 13:if(""!==e.state.password&&(a.password=e.state.password),void 0===e.props.updateUser){t.next=19;break}return t.next=17,e.props.updateUser(a);case 17:!0===t.sent?e.setState({edit:!1}):e.setState({errorMessage:"Error, Please Try Again Later"});case 19:return t.abrupt("break",20);case 20:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={edit:!1,errorMessage:"",email:"",password:"",_id:""},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user;this.setState({email:e.email})}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(e.user.email!==t.user.email){var n=this.props.user;this.setState({email:n.email,_id:n._id})}}},{key:"render",value:function(){return this.profile=c.a.createElement(ge.a,{fluid:!0},c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("img",{id:"ProfileImage",className:"img-fluid",src:this.props.user.avatar,alt:"Profile Image"}),c.a.createElement("p",{className:"text-center"},this.props.user.email),c.a.createElement(ne.a,{id:"editButton",block:!0,className:"text-center",onClick:this.handleClick},"Edit Profile")))),this.editProfile=c.a.createElement(ge.a,{fluid:!0},c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ce.a,{onSubmit:this.handleSubmit},c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"email"},"Email"),c.a.createElement(we.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"password"},"Password"),c.a.createElement(we.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(ne.a,{id:"saveButton",onClick:this.handleClick,block:!0},"Save"),c.a.createElement(ke.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))),this.state.edit?this.editProfile:this.profile}}]),t}(i.Component),xe=(n(493),n(748)),De=n(691),Re=n(757),Se=n(729),Te=n(733),Ie=n(734),Me=n(141),Pe=n(142),_e=n.n(Pe),Ae=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(j.a)(this,Object(x.a)(t).call(this,e))).handleToggle=function(e){return function(t){var a=n.state.dropdownOpen;a[e]=!a[e],n.setState({dropdownOpen:a})}},n.handleClick=function(){var e=Object($.a)(X.a.mark(function e(t){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.newEscapeRoom&&n.props.newEscapeRoom();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleItemClick=function(e,t){return function(a){var r=n.props.escapeRooms[e];switch(t){case"EDIT":n.props.editEscapeRoom&&n.props.editEscapeRoom(r);break;case"JSON":n.saveJSON(r);break;case"PDF":n.savePDF(r);break;case"DELETE":n.props.deleteEscapeRoom&&n.props.showModal(new z("Warning","Are you sure you want to delete "+r.details.name+"?","Yes",function(){n.props.deleteEscapeRoom(r)},"No",function(){}));break;default:return}}},n.mapEscapeRoomToList=function(e,t){return c.a.createElement(Se.a,{key:t},e.details.name,c.a.createElement(Z.a,{style:{display:"inline",position:"absolute",right:"20px"},isOpen:n.state.dropdownOpen[t],toggle:n.handleToggle(t)},c.a.createElement(ee.a,{caret:!0}),c.a.createElement(te.a,{right:!0},c.a.createElement(Te.a,{onClick:n.handleItemClick(t,"EDIT")},"Edit"),c.a.createElement(Te.a,{onClick:n.handleItemClick(t,"JSON")},"Export as JSON"),c.a.createElement(Te.a,{onClick:n.handleItemClick(t,"PDF")},"Export as PDF"),c.a.createElement(Te.a,{onClick:n.handleItemClick(t,"DELETE")},"Delete"))))},n.state={dropdownOpen:[!1,!1]},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(Me.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new _e.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"render",value:function(){var e=this.props.escapeRooms;return c.a.createElement(ge.a,null,c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(ne.a,{block:!0,onClick:this.handleClick},"NEW"))),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ie.a,null,e.map(this.mapEscapeRoomToList)))))}}]),t}(i.Component),Ne=n(738),Le=n(739),We=n(2),ze=n.n(We),Ue=(n(495),function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).handleClick=function(t){return function(n){switch(t){case"EXIT":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom);break;case"JSON":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom),e.saveJSON(e.props.escapeRoom);break;case"PDF":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom),e.savePDF(e.props.escapeRoom);break;default:return}}},e.handleToggle=function(t){e.setState({dropdownOpen:!e.state.dropdownOpen})},e.handleNav=function(t){return function(n){e.state.activeTab!==t&&e.setState({activeTab:t})}},e.state={activeTab:"design",dropdownOpen:!1},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(Me.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new _e.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"componentDidMount",value:function(){void 0===this.props.escapeRoom&&this.props.history.push("/")}},{key:"render",value:function(){return c.a.createElement(ge.a,{fluid:!0},c.a.createElement(ve.a,{className:"save-options"},c.a.createElement(be.a,{xs:"6",md:"3",lg:"3"},c.a.createElement(ne.a,{block:!0,onClick:this.handleClick("EXIT")},"Save and Exit")),c.a.createElement(be.a,{xs:"6",md:"3",lg:"3"},c.a.createElement(Z.a,{block:!0,isOpen:this.state.dropdownOpen,toggle:this.handleToggle},c.a.createElement(ee.a,{className:"full-width",caret:!0},"Save and Export"),c.a.createElement(te.a,{right:!0},c.a.createElement(Te.a,{onClick:this.handleClick("JSON")},"Export as JSON"),c.a.createElement(Te.a,{onClick:this.handleClick("PDF")},"Export as PDF")))),c.a.createElement(be.a,{xs:"6"})),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(ie.a,{tabs:!0},c.a.createElement(ce.a,null,c.a.createElement(le.a,{className:ze()({active:"details"===this.state.activeTab}),onClick:this.handleNav("details")},"Details")),c.a.createElement(ce.a,null,c.a.createElement(le.a,{className:ze()({active:"accessibility"===this.state.activeTab}),onClick:this.handleNav("accessibility")},"Accessibility")),c.a.createElement(ce.a,null,c.a.createElement(le.a,{className:ze()({active:"design"===this.state.activeTab}),onClick:this.handleNav("design")},"Design"))))),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ne.a,{activeTab:this.state.activeTab},c.a.createElement(Le.a,{tabId:"details"},c.a.createElement(Fe,{details:this.props.escapeRoom.details,updateDetails:this.props.updateDetails})),c.a.createElement(Le.a,{tabId:"accessibility"},c.a.createElement(mt,{accessibility:this.props.escapeRoom.accessibility,updateAccessibility:this.props.updateAccessibility})),c.a.createElement(Le.a,{tabId:"design"},c.a.createElement(He,{components:{components:this.props.escapeRoom.components},showModal:this.props.showModal,accessibility:this.props.escapeRoom.accessibility,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,updateComponent:this.props.updateComponent,addRelationship:this.props.addRelationship,removeRelationship:this.props.removeRelationship}))))))}}]),t}(i.Component)),Fe=(n(497),function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,n.props.updateDetails(t)},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement(ge.a,{fluid:!0},c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ce.a,null,c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"name"},"Room Name"),c.a.createElement(we.a,{type:"text",name:"name",id:"name",placeholder:"Room Name",value:this.props.details.name,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"designers"},"Designers"),c.a.createElement(we.a,{type:"text",name:"designers",id:"designers",placeholder:"Designer(s)",value:this.props.details.designers,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"theme"},"Theme"),c.a.createElement(we.a,{type:"text",name:"theme",id:"theme",placeholder:"theme",value:this.props.details.theme,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,null,"Players"),c.a.createElement(we.a,{type:"text",name:"minPlayers",id:"minPlayers",placeholder:"Min",value:this.props.details.minPlayers,onChange:this.handleChange}),c.a.createElement(we.a,{type:"text",name:"maxPlayers",id:"maxPlayers",placeholder:"Max",value:this.props.details.maxPlayers,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"targetTime"},"Target Time"),c.a.createElement(we.a,{type:"text",name:"targetTime",id:"targetTime",placeholder:"Time",value:this.props.details.targetTime,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"difficulty"},"Difficulty"),c.a.createElement(we.a,{type:"range",min:"1",max:"5",name:"difficulty",id:"difficulty",value:this.props.details.difficulty,onChange:this.handleChange})))),c.a.createElement(be.a,null,c.a.createElement(Ce.a,null,c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"objective"},"Objective"),c.a.createElement(we.a,{type:"text",name:"objective",id:"objective",placeholder:"Main Objective",value:this.props.details.objective,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"description"},"Description"),c.a.createElement(we.a,{type:"textarea",name:"description",id:"description",placeholder:"Description",value:this.props.details.description,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"estimatedCost"},"Estimated Cost"),c.a.createElement("p",null,this.props.details.estimatedCost))))))}}]),t}(i.Component)),He=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(j.a)(this,Object(x.a)(t).call(this,e))).handleComponentClick=function(e){return function(t){t.stopPropagation(),n.setState({selected:e})}},n.updateComponent=function(e){n.props.updateComponent(e),n.setState({selected:Object(C.a)({},n.state.selected,e)})},n.findComponent=function(e){return n.props.components.components.find(function(t){return t._id===e})},n.state={selected:{}},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement(ge.a,{fluid:!0},c.a.createElement(ve.a,null,c.a.createElement(be.a,{md:"2"},c.a.createElement(st,null)),c.a.createElement(be.a,{md:"8"},c.a.createElement(ut,{renderTrigger:JSON.stringify(this.props.components.components),findComponent:this.findComponent,showModal:this.props.showModal,handleComponentClick:this.handleComponentClick,updateComponent:this.props.updateComponent,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship,components:this.props.components.components})),c.a.createElement(be.a,{md:"2"},c.a.createElement(dt,{selected:this.state.selected,updateComponent:this.updateComponent}))))}}]),t}(i.Component),Ge=n(27),Je=n(740),Be=n(741),Ye=n(742);n(80);var Ve=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(k.a)(t,[{key:"handleComponentDrop",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;if(void 0!==e.id){switch(e.id){case"Puzzle":n=new M;break;case"Lock":n=new _;break;case"Event":n=new A;break;case"Music":n=new N;break;case"Prop":n=new P;break;default:return}this.props.addComponent(n,this.props.component._id)}else(n=e)._id!==this.props.component._id&&this.props.addRelationship(n._id,this.props.component._id,t)}},{key:"render",value:function(){var e="hide-border";return this.props.isOver&&this.props.canDrop?e+=" canDrop":this.props.isOver&&!this.props.canDrop?e+=" cantDrop":this.props.canDrop&&(e+=" couldDrop"),this.props.connectDropTarget(c.a.createElement("div",{key:this.props.component._id},c.a.createElement(Je.a,{className:e,onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(Be.a,null))))}}]),t}(i.Component),qe=Object(Ge.DropTarget)("COMPONENT",{drop:function(e,t,n){if(!t.didDrop()){var a=t.getItem(),r=e.isInput;return n.handleComponentDrop(a,r),{moved:!0}}}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(Ve),Ke=(n(289),{canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,n){return Object(C.a)({},e.component)},endDrag:function(e,t,n){t.didDrop()||void 0===e.component&&null===e.component||!e.showModal||e.showModal(new z("Warning","Are you sure you want to delete this component?","Yes",n.removeComponent,"No",function(){}))}});var Xe=function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).removeComponent=function(){n.props.removeComponent(n.props.component._id)},n.update=function(){return n.forceUpdate()},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.addRef&&this.props.addRef(this.ref)}},{key:"componentDidUpdate",value:function(e){this.props.renderTrigger!=e.renderTrigger&&this.forceUpdate()}},{key:"findComponent",value:function(e){return void 0!==this.props.findComponent?this.props.findComponent(e):null}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.update,!0),window.addEventListener("scroll",this.update,!0),window.addEventListener("resize",this.update)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.update),window.removeEventListener("scroll",this.update),window.removeEventListener("resize",this.update)}},{key:"render",value:function(){var e;this.props.isTarget&&(e=c.a.createElement(ve.a,null,c.a.createElement(be.a,{xs:"6"},c.a.createElement(qe,{isInput:!0,component:this.props.component,handleComponentClick:this.props.handleComponentClick,showModal:this.props.showModal,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship})),c.a.createElement(be.a,{xs:"6"},c.a.createElement(qe,{isInput:!1,component:this.props.component,handleComponentClick:this.props.handleComponentClick,showModal:this.props.showModal,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship}))));var t,n,a={},r="component";return void 0!==this.props.component&&(t=this.props.component.type,a.top=this.props.component.position.top,a.left=this.props.component.position.left,r+=" "+this.props.component.type+" "+this.props.component._id,t+=" ("+this.props.component._id+")",n=this.props.component.name),this.props.connectDragSource(c.a.createElement("div",{className:r,id:this.props.component._id,style:a,onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement("span",null,t),c.a.createElement("span",{class:"hide-overflow"},n),e))}}]),t}(i.Component),$e=Object(Ge.DragSource)("COMPONENT",Ke,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Xe),Qe={drop:function(e,t,n){if(!t.didDrop()&&n&&void 0!==typeof e.component){var a=t.getItem(),r=t.getClientOffset(),o=p.a.findDOMNode(n).getBoundingClientRect();return a.position={top:(r.y-o.y)/o.height*100+"%",left:(r.x-o.x)/o.width*100+"%"},n.handleComponentDrop(a),{moved:!0}}}};var Ze=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).state={render:!0},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"handleComponentDrop",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=null;if(void 0!==e.id&&void 0===e._id){switch(e.id){case"Puzzle":(t=new M).position=e.position;break;case"Prop":(t=new P).position=e.position;break;case"Lock":(t=new _).position=e.position;break;case"Event":(t=new A).position=e.position;break;case"Music":(t=new N).position=e.position;break;default:return}this.props.addComponent(t,this.props.component._id)}else t=e,this.props.updateComponent(t,this.props.component._id)}},{key:"render",value:function(){var e=this,t="Area";return this.props.isOver&&this.props.canDrop?t+=" canDrop":this.props.isOver&&!this.props.canDrop?t+=" cantDrop":this.props.canDrop&&(t+=" couldDrop"),this.props.connectDropTarget(c.a.createElement("div",{className:this.props.component.type,key:this.props.component._id},c.a.createElement(Je.a,{className:t,onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(Be.a,null,c.a.createElement(Ye.a,null,this.props.component.type+" ("+this.props.component._id+") "+this.props.component.name),this.props.outputComponents.map(function(t,n){var a;return a=e.props.findComponent(t._id),c.a.createElement($e,{addRef:e.props.addRef,key:n,renderTrigger:JSON.stringify(e.props.outputComponents),isTarget:!0,handleComponentClick:e.props.handleComponentClick,component:a,findComponent:e.props.findComponent,id:a.type,showModal:e.props.showModal,addComponent:e.props.addComponent,removeComponent:e.props.removeComponent,addRelationship:e.props.addRelationship})})))))}}]),t}(i.Component),et=Object(Ge.DropTarget)("COMPONENT",Qe,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver(),canDrop:t.canDrop(),itemType:t.getItemType()}})(Ze),tt={canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,n){return void 0!==e.id?{id:e.id}:{component:e.component}},endDrag:function(e,t,n){t.didDrop()||null==n||e.showModal(new z("Warning","Are you sure you want to delete this component?","Yes",n.removeComponent,"No",function(){}))}};var nt=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).removeComponent=function(){e.props.removeComponent(e.props.component._id)},e.addComponent=function(t,n){e.props.addComponent(t,e.props.component._id),e.props.addRelationship(t._id,n)},e.state={render:!0},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.renderTrigger!=e.renderTrigger&&this.forceUpdate()}},{key:"render",value:function(){var e;return this.props.isTarget&&(e=c.a.createElement(et,{renderTrigger:JSON.stringify(this.props.component),addRef:this.props.addRef,findComponent:this.props.findComponent,handleComponentClick:this.props.handleComponentClick,outputComponents:this.props.outputComponents,component:this.props.component,showModal:this.props.showModal,addComponent:this.addComponent,updateComponent:this.props.updateComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship})),this.props.connectDragSource(c.a.createElement("div",{onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(Je.a,{className:"component"},this.props.id,e)))}}]),t}(i.Component),at=Object(Ge.DragSource)("AREA",tt,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(nt);var rt=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.id||"",t=e+" component pallet-item";return this.props.connectDragSource(c.a.createElement("div",{className:t,id:e},c.a.createElement("span",null,e)))}}]),t}(i.Component),ot=Object(Ge.DragSource)("COMPONENT",{beginDrag:function(e,t,n){return{id:e.id}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(rt),st=(n(599),function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleComponentClick=function(e){},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement(ge.a,{fluid:!0},c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("h3",null,"Pallet"))),c.a.createElement(ve.a,null,c.a.createElement(be.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(at,{id:"Area",handleComponentClick:this.handleComponentClick})),c.a.createElement(be.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(ot,{id:"Puzzle",handleComponentClick:this.handleComponentClick})),c.a.createElement(be.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(ot,{id:"Prop",handleComponentClick:this.handleComponentClick})),c.a.createElement(be.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(ot,{id:"Lock",handleComponentClick:this.handleComponentClick})),c.a.createElement(be.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(ot,{id:"Event",handleComponentClick:this.handleComponentClick})),c.a.createElement(be.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(ot,{id:"Music",handleComponentClick:this.handleComponentClick}))))}}]),t}(i.Component)),it=(n(601),n(207)),ct=n.n(it),lt={drop:function(e,t,n){var a=t.getItem();void 0!==a.component&&null!==a.component||n.props.addComponent(new I)}};var pt=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).mapAreas=function(t,n){if("Area"===t.type){var a=e.props.components.filter(function(e){return t.outputComponents.includes(e._id)});return c.a.createElement(ve.a,null,c.a.createElement(be.a,{key:t._id,xs:"12"},c.a.createElement(at,{renderTrigger:JSON.stringify(t),addRef:e.addRef,isTarget:!0,findComponent:e.props.findComponent,handleComponentClick:e.props.handleComponentClick,component:t,outputComponents:a,showModal:e.props.showModal,addComponent:e.props.addComponent,removeComponent:e.props.removeComponent,updateComponent:e.props.updateComponent,addRelationship:e.props.addRelationship})))}},e.addRef=function(t){void 0!=t&&e.setState({refs:[].concat(Object(h.a)(e.state.refs),[t])})},e.update=function(){return e.forceUpdate()},e.state={refs:[]},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"componentDidUpdate",value:function(e,t){JSON.stringify(this.props.components)!==JSON.stringify(e.components)&&this.forceUpdate()}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.update,!0),window.addEventListener("resize",this.update)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.update),window.removeEventListener("resize",this.update)}},{key:"render",value:function(){var e=this,t="row";this.props.isOver&&this.props.canDrop?t+=" canDrop":this.props.isOver&&(t+=" cantDrop");var n=[];return this.props.components.forEach(function(t,a,r){if(void 0!=t&&void 0!=t.inputComponents&&"Area"!=t.type){var o=t.inputComponents,s=t.outputComponents;o.forEach(function(a,r,o){a=e.props.findComponent(a),n.push(c.a.createElement(ct.a,{key:r,from:t._id,to:a._id,borderColor:"#007bff"}))}),s.forEach(function(a,r,o){a=e.props.findComponent(a),n.push(c.a.createElement(ct.a,{key:r,from:t._id,to:a._id,borderColor:"#28a745"}))})}}),this.props.connectDropTarget(c.a.createElement("div",{className:t},n,c.a.createElement(be.a,{xs:"12"},c.a.createElement(ve.a,null,c.a.createElement("h3",null,"Components")),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,this.props.components.map(this.mapAreas))))))}}]),t}(i.Component),ut=Object(Ge.DropTarget)("AREA",lt,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(pt),dt=(n(608),function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,"puzzleType"===e.target.id&&(t.puzzle={}),"lockType"===e.target.id&&(t.output=""),t._id=n.props.selected._id,n.props.updateComponent(t)},n.handleOutputChange=function(e){n.props.updateComponent({output:e})},n.handlePuzzleChange=function(e){void 0===e.output&&(e.output=""),n.props.updateComponent({_id:n.props.selected._id,puzzle:e,output:e.output}),n.forceUpdate()},n.mapDetailToInput=function(e,t){var a;if("output"===e)return"Lock"===n.props.selected.type?a=c.a.createElement(Dt,{lockType:n.props.selected.lockType,handleOutputChange:n.handleOutputChange}):"Puzzle"===n.props.selected.type&&(a=c.a.createElement(Nt,{puzzleType:n.props.selected.puzzleType,handlePuzzleChange:n.handlePuzzleChange})),c.a.createElement(ve.a,{key:t},c.a.createElement(be.a,null,c.a.createElement(Oe.a,{for:e},e),c.a.createElement(we.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange}),c.a.createElement(ne.a,{color:"primary",onClick:n.generateFromInputs},"Generate From Inputs"),c.a.createElement("br",null),c.a.createElement("br",null),a,c.a.createElement("br",null)));if("lockType"===e)return c.a.createElement(ve.a,{key:t},c.a.createElement(be.a,null,c.a.createElement(Oe.a,{for:e},e),c.a.createElement(we.a,{type:"select",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange},c.a.createElement("option",null,"Numeric"),c.a.createElement("option",null,"Word"),c.a.createElement("option",null,"Directional"),c.a.createElement("option",null,"Contactless"),c.a.createElement("option",null,"Key"))));if("eventType"===e)return c.a.createElement(ve.a,{key:t},c.a.createElement(be.a,null,c.a.createElement(Oe.a,{for:e},e),c.a.createElement(we.a,{type:"select",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange},c.a.createElement("option",null,"Sound Effect"),c.a.createElement("option",null,"New Area"),c.a.createElement("option",null,"Objective Complete"),c.a.createElement("option",null,"Custom"))));if("puzzleType"===e)return c.a.createElement(ve.a,{key:t},c.a.createElement(be.a,null,c.a.createElement(Oe.a,{for:e},e),c.a.createElement(we.a,{type:"select",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange},c.a.createElement("option",null,"Cipher"),c.a.createElement("option",null,"Word"),c.a.createElement("option",null,"Colour"),c.a.createElement("option",null,"Hidden Word"),c.a.createElement("option",null,"Hidden Object"),c.a.createElement("option",null,"Riddle"),c.a.createElement("option",null,"Custom"))));if("puzzle"===e){var r=n.props.selected,o=Object.keys(r[e]).map(function(t,n,a){var o;return o="object"===typeof r[e][t]?r[e][t].toString():r[e][t],c.a.createElement(ve.a,{id:e},c.a.createElement(be.a,null,c.a.createElement("p",null," "+t+": "+o)))});return Object.keys(r[e]).length>0?c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Oe.a,null,e),o)):null}return"string"===typeof n.props.selected[e]&&"_id"!==e&&"type"!==e?c.a.createElement(ve.a,{key:t},c.a.createElement(be.a,null,c.a.createElement(Oe.a,{for:e},e),c.a.createElement(we.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange}))):void 0},n.mapKeysToRow=function(e,t,n){},n.handleOnClick=function(e,t){return function(a){var r=Object(C.a)({},n.props.selected),o={};o._id=r._id,t?o.inputComponents=r.inputComponents.filter(function(t){return t!==e}):o.outputComponents=r.outputComponents.filter(function(t){return t!==e}),n.props.updateComponent(o)}},n.mapIDToP=function(e,t,a){return c.a.createElement(Se.a,{key:t},e,c.a.createElement(ne.a,{onClick:n.handleOnClick(e,a),color:"danger",style:{display:"inline",position:"absolute",right:"2px",top:"0.3rem"}},"X"))},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e,t,n,a,r,o=this,s=this.props.selected,i="",l="";return void 0===s&&null===s||(i=void 0!=s._id?" ("+s._id+")":"",e=Object.keys(s).map(this.mapDetailToInput),l=s.type||"","Area"!==s.type&&void 0!==s.inputComponents&&void 0!==s.outputComponents&&(s.inputComponents.length>0||s.outputComponents.length>0)&&(t=s.inputComponents.map(function(e,t){return o.mapIDToP(e,t,!0)}),n=s.outputComponents.map(function(e,t){return o.mapIDToP(e,t,!1)}),a=c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("h4",null,"Inputs"),c.a.createElement(Ie.a,null,t))),r=c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("h4",null,"Outputs"),c.a.createElement(Ie.a,null,n))))),c.a.createElement(ge.a,{fluid:!0,className:"container-fluid component-details"},c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("h3",null,"Details"),c.a.createElement("h4",null,l+i))),e,a,r)}}]),t}(i.Component)),ht=n(743),mt=(n(610),function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,n.props.updateAccessibility(t)},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement(ge.a,{fluid:!0,className:"accessibility"},c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("h1",{className:"text-center"},"Visual Accessibility"))),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("h2",null,"Colour Blindness"),c.a.createElement("p",null,"Please select the types of colour blindness your design must take into account")),c.a.createElement(be.a,null,c.a.createElement("h2",null,"Other"),c.a.createElement("p",null,"These are options to indicate restrictions on the design related to visual impairments such as blindness"))),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Je.a,null,c.a.createElement(ht.a,{type:"checkbox",name:"protanomaly",id:"protanomaly",label:"Protanomaly",checked:this.props.accessibility.protanomaly,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"protanopia",id:"protanopia",label:"Protanopia",checked:this.props.accessibility.protanopia,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"deuteranomaly",id:"deuteranomaly",label:"Deuteranomaly",checked:this.props.accessibility.deuteranomaly,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"deuteranopia",id:"deuteranopia",label:"Deuteranopia",checked:this.props.accessibility.deuteranopia,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"tritanomaly",id:"tritanomaly",label:"Tritanomaly",checked:this.props.accessibility.tritanomaly,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"tritanopia",id:"tritanopia",label:"Tritanopia",checked:this.props.accessibility.tritanopia,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"coneMonochromacy",id:"coneMonochromacy",label:"Cone Monochromacy",checked:this.props.accessibility.coneMonochromacy,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"rodMonochromacy",id:"rodMonochromacy",label:"Rod Monochromacy",checked:this.props.accessibility.rodMonochromacy,onChange:this.handleChange}))),c.a.createElement(be.a,null,c.a.createElement(Je.a,null,c.a.createElement(ht.a,{type:"checkbox",name:"largeFonts",id:"largeFonts",label:"Large Fonts",value:this.props.accessibility.largeFonts,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"highContrast",id:"highContrast",label:"High Contrast",value:this.props.accessibility.highContrast,onChange:this.handleChange}))))),c.a.createElement(be.a,null,c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("h1",{className:"text-center"},"Physical Accessibility"))),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("p",null,"These options are to indicate restrictions on the design related to physical impairments for example wheelchair accessibility and motor functions"))),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Je.a,null,c.a.createElement(ht.a,{type:"checkbox",name:"Wheelchair Accessible",id:"heelchairAccessible",label:"wheelchairAccessible",value:this.props.accessibility.wheelchairAccessible,onChange:this.handleChange}),c.a.createElement(ht.a,{type:"checkbox",name:"motorAccessible",id:"motorAccessible",label:"Accessible for players with motor function issues",value:this.props.accessibility.motorAccessible,onChange:this.handleChange})))))),c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("p",null,"These options are designed to indicate the attempted accessibility of your design. These options will flag puzzles in your design that do not meet these restrictions"))))}}]),t}(i.Component)),ft=n(744),Et=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(j.a)(this,Object(x.a)(t).call(this,e))).handleSubmit=function(){var e=Object($.a)(X.a.mark(function e(t){var a;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.props.authenticateCredentials){e.next=6;break}return e.next=4,n.props.authenticateCredentials({strategy:"local",email:n.state.email,password:n.state.password});case 4:a=e.sent,n.setState({errorMessage:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(Ee.a)({},e.target.id,e.target.value))},n.handleDismiss=function(e){n.setState({errorMessage:""})},n.state={email:"",password:"",errorMessage:""},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"login full-container verticaly-center-content"},c.a.createElement(ge.a,null,c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ce.a,{onSubmit:this.handleSubmit},c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"email"},"Email"),c.a.createElement(we.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"password"},"Password"),c.a.createElement(we.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(ne.a,null,"Login"),c.a.createElement(ft.a,null,"Don't have an account? Sign Up ",c.a.createElement(Q.a,{to:"/signup"},"Here")),c.a.createElement(ke.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(i.Component),gt=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(j.a)(this,Object(x.a)(t).call(this,e))).handleSubmit=function(){var e=Object($.a)(X.a.mark(function e(t){var a;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.props.password!=n.props.password2&&n.setState({errorMessage:"Passwords Must Match"}),!n.props.signUp){e.next=7;break}return e.next=5,n.props.signUp({email:n.state.email,password:n.state.password});case 5:a=e.sent,n.setState({errorMessage:a});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(Ee.a)({},e.target.id,e.target.value),function(){""!=n.state.password&&n.state.password!=n.state.password2?n.setState({errorMessage:"Passwords Must Match"}):n.setState({errorMessage:""})})},n.handleDismiss=function(e){n.setState({errorMessage:""})},n.state={email:"",password:"",password2:"",errorMessage:""},n}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"sign-up full-container verticaly-center-content"},c.a.createElement(ge.a,null,c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ce.a,{onSubmit:this.handleSubmit},c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"email"},"Email"),c.a.createElement(we.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"password"},"Password"),c.a.createElement(we.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(ye.a,null,c.a.createElement(Oe.a,{for:"password2"},"Re-Type Password"),c.a.createElement(we.a,{type:"password",name:"password2",id:"password2",value:this.state.password2,onChange:this.handleChange})),c.a.createElement(ne.a,null,"Sign Up"),c.a.createElement(ft.a,null,"Have an account? Log In ",c.a.createElement(Q.a,{to:"/login"},"Here")),c.a.createElement(ke.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(i.Component),vt=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement(ge.a,{fluid:!0},c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement("p",null,"This is my honours project for BsC(Hons) Computing: Application Software Development at Robert Gordon University This is a web app for designing an escape room using drag and drop components")),c.a.createElement(be.a,null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"https://github.com/AldoAbdn/Escape-Room-Generator/"},"Github Repo")),c.a.createElement("li",null,c.a.createElement("a",{href:"https://ninjamock.com/s/KCMW2Tx"},"Wireframe"))))))}}]),t}(i.Component),bt=n(321),Ct=n.n(bt),yt=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement(Ct.a,{width:"85%",height:"100%",api_key:Object({NODE_ENV:"production",PUBLIC_URL:""}).youtubeAPIKey,playlist_id:"PLWRRwFEmEuDKX5sobzWeb50xD14cpfkk3",scrolling:!0})}}]),t}(i.Component),Ot=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return window.localStorage.getItem("feathers-jwt")?void 0!==this.props.condition?this.props.condition?c.a.createElement(De.a,this.props):c.a.createElement(Re.a,{to:this.props.redirect,state:this.props.location}):c.a.createElement(De.a,this.props):c.a.createElement(Re.a,{to:"/login",state:this.props.location})}}]),t}(i.Component),wt=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement(ge.a,null,c.a.createElement(ve.a,null,c.a.createElement("h1",null,"404 Page Not Found")))}}]),t}(i.Component),kt=n(322),jt=n.n(kt),xt=function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,[{key:"generateNumericCombination",value:function(e){for(var t="",n=0;n<e;n++)t+=parseInt(Math.floor(9*Math.random()));return t}},{key:"generateWords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return jt()({min:e,max:e,exactly:e,wordsPerString:t}).slice(0,e)}},{key:"generateDirectionSequence",value:function(e){for(var t,n=[],a=["UP","DOWN","LEFT","RIGHT"],r=0;r<e;r++)t=Math.floor(3*Math.random()),n.push(a[t]);return n.join(",")}}]),e}(),Dt=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).handleChange=function(t){var n={};n[t.target.name]=t.target.value,e.setState(n)},e.handleNumericClick=function(t){var n=e.lockGenerator.generateNumericCombination(e.state.length);e.props.handleOutputChange(n)},e.handleWordClick=function(t){var n=e.lockGenerator.generateWords(e.state.length,e.state.wordsPerString);e.props.handleOutputChange(n)},e.handleDirectionalClick=function(t){var n=e.lockGenerator.generateDirectionSequence(e.state.length);e.props.handleOutputChange(n)},e.state={length:1,wordsPerString:1},e.lockGenerator=new xt,e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){switch(this.props.lockType){case"Numeric":return c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(we.a,{name:"length",placeholder:"length",type:"number",step:"1",min:"1",value:this.state.length,onChange:this.handleChange}),c.a.createElement(ne.a,{block:!0,onClick:this.handleNumericClick,color:"primary"},"Generate Random Number")));case"Word":return c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(we.a,{name:"length",placeholder:"length",type:"number",step:"1",min:"1",value:this.state.length,onChange:this.handleChange}),c.a.createElement(we.a,{name:"wordsPerString",placeholder:"words per string",type:"number",step:"1",min:"1",value:this.state.wordsPerString,onChange:this.handleChange}),c.a.createElement(ne.a,{block:!0,onClick:this.handleWordClick,color:"primary"},"Generate Words")));case"Directional":return c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(we.a,{name:"length",placeholder:"length",type:"number",step:"1",min:"1",value:this.state.length,onChange:this.handleChange}),c.a.createElement(ne.a,{block:!0,onClick:this.handleDirectionalClick,color:"primary"},"Generate Directional Sequence")));default:return null}}}]),t}(i.Component),Rt=n(323),St=n.n(Rt),Tt=n(210),It=function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,[{key:"generateCipher",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pigpen"){case"pigpen":return{cipher:"/images/ciphers/pigpen/cipher.jpg",decoder:"/images/ciphers/pigpen/cipher.jpg"}}}},{key:"generateWord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"crossword",t=arguments.length>1?arguments[1]:void 0;switch(e){case"crossword":return{type:"crossword",output:"",words:t.words,hints:t.hints,answers:t.answers,crossword:St()(t.words)};case"hidden":return{type:"hidden",output:t.word,word:t.word,words:t.words,hints:t.hints,answers:t.answers,hiddenWord:this.generateHiddenWord(t.word,t.words,t.hints,t.answers)};case"riddle":var n=Tt[Math.floor(Math.random()*Tt.length)];return{type:"riddle",output:n.answer,riddle:n}}}},{key:"generateColour",value:function(){for(var e,t=Math.floor(4*Math.random())+1;e!=t;)e=Math.floor(4*Math.random())+1;var n=t+e,a=Math.floor(4*Math.random())+1,r=[{number:t,colour:"red"},{number:e,colour:"blue"},{number:n,colour:"purple"},{number:a,colour:"green"}];return{answer:t.toString()+e.toString()+n.toString()+a.toString(),numbers:r}}},{key:"generateHiddenWord",value:function(e,t){for(var n=[],a=0;a<t.length;a++)n.push(t.indexOf(e[a]))}}]),e}(),Mt=n(746),Pt=n(747),_t=n(692),At=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).handleChange=function(t){var n=t.target.id,a=Object(h.a)(e.state.items);a[n]=t.target.value,e.setState({items:a},function(){e.props.handleChange(e.state.items)})},e.addItem=function(t){e.setState({items:e.state.items.push("")})},e.removeItem=function(t){return function(n){e.setState({items:[].concat(Object(h.a)(e.state.items.slice(0,t)),Object(h.a)(e.state.items.slice(t)))})}},e.mapItemsToInputs=function(t,n,a){return c.a.createElement(Mt.a,null,c.a.createElement(we.a,{type:"text",id:n,onChange:e.handleChange}),c.a.createElement(Pt.a,null,c.a.createElement(_t.a,{onClick:e.removeItem(n),addonType:"append"},"delete")))},e.state={items:[""]},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.state.items;return c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(ne.a,{onClick:this.addItem},"Add Item"),e))}}]),t}(i.Component),Nt=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).handleChange=function(t){var n={};n[t.target.id]=t.target.value,n._id=e.props.selected._id,e.props.updateComponent(n)},e.handleListChange=function(t){return function(t){e.setState({key:t})}},e.handleWordClick=function(t){var n=Object(C.a)({},e.state);e.props.handlePuzzleChange(e.PuzzleGenerator.generateWord("hidden",n))},e.handleRiddleClick=function(t){e.props.handlePuzzleChange(e.PuzzleGenerator.generateWord("riddle"))},e.handleCipherClick=function(t){e.props.handlePuzzleChange(e.PuzzleGenerator.generateCipher(e.state.cipher))},e.state={word:"",words:[],hints:[],answers:[],cipher:"pigpen"},e.PuzzleGenerator=new It,e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){switch(this.props.puzzleType){case"Hidden Word":return c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(we.a,{type:"text",name:"hiddenWord",id:"hiddenWord",placeholder:"hidden word",value:this.state.word,onChange:this.handleChange}),c.a.createElement(At,{handleChange:this.handleListChange("words")}),c.a.createElement(At,{handleChange:this.handleListChange("hints")}),c.a.createElement(At,{handleChange:this.handleListChange("answers")}),c.a.createElement(ne.a,{block:!0,onClick:this.handleWordClick,color:"primary"},"Generate Hidden Word")));case"Riddle":return c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(ne.a,{block:!0,onClick:this.handleRiddleClick,color:"primary"},"Generate Random Riddle")));case"Cipher":return c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(we.a,{type:"select",name:"cipher",id:"cipher",placeholder:"cipher",value:this.state.cipher,onChange:this.handleChange},c.a.createElement("option",null,"pigpen")),c.a.createElement(ne.a,{block:!0,onClick:this.handleCipherClick,color:"primary"},"Generate Cipher")));default:return null}}}]),t}(i.Component),Lt=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).authenticateCredentials=function(){var t=Object($.a)(X.a.mark(function t(n){var a,r;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate(n);case 3:return t.next=5,e.props.services.users.find({query:{email:n.email}});case 5:(a=t.sent).action.type.includes("FULFILLED")&&a.value.total>0?((r=a.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(r),e.props.history.push("/dashboard")):e.setState({}),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),e.signUp=function(){var t=Object($.a)(X.a.mark(function t(n){var a,r;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.services.users.create(n);case 3:return t.next=5,e.props.feathersClient.authenticate({strategy:"local",email:n.email,password:n.password});case 5:return t.next=7,e.props.services.users.find({query:{email:n.email}});case 7:(a=t.sent).action.type.includes("FULFILLED")&&((r=a.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(r),e.props.history.push("/dashboard")),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}(),e.editEscapeRoom=function(t){e.props.redux.actions.escapeRoom.setSelectedEscapeRoom(t),e.props.history.push("/designer")},e.newEscapeRoom=Object($.a)(X.a.mark(function t(){var n,a,r,o;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.redux.state.user._id,a=new L(n),t.next=4,e.props.services["escape-rooms"].create(a);case 4:(r=t.sent).action.type.includes("FULFILLED")&&null!==(o=r.value)&&(e.props.redux.actions.escapeRooms.addEscapeRoom(o),e.props.redux.actions.escapeRoom.setSelectedEscapeRoom(o),e.props.history.push("/designer"));case 6:case"end":return t.stop()}},t,this)})),e.deleteEscapeRoom=function(t){e.props.services["escape-rooms"].remove(t._id),e.props.redux.actions.escapeRooms.removeEscapeRoom(t)},e.saveEscapeRoom=function(){var t=Object($.a)(X.a.mark(function t(n){return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n._id){t.next=6;break}return n.estimatedCost=L.calculateCost(n),t.next=4,e.props.services["escape-rooms"].update(n._id,n);case 4:return t.next=6,e.props.redux.actions.escapeRooms.updateEscapeRoom(n);case 6:e.props.history.push("/");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={profile:null},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.props.redux.state.escapeRooms,n=this.props.redux.state.escapeRoom,a=this.props.redux.actions.escapeRoom,r=(this.props.redux.state.user,this.props.redux.actions.modal.showModal);return c.a.createElement(xe.a,null,c.a.createElement(Re.a,{exact:!0,from:"/",to:"dashboard"}),c.a.createElement(Ot,{path:"/dashboard",render:function(n){return c.a.createElement(Ae,{escapeRooms:t,showModal:r,editEscapeRoom:e.editEscapeRoom,newEscapeRoom:e.newEscapeRoom,deleteEscapeRoom:e.deleteEscapeRoom})}}),c.a.createElement(Ot,{path:"/designer",condition:Object.keys(n).length>0&&void 0!==n,redirect:"/",render:function(t){return c.a.createElement(Ue,{showModal:r,escapeRoom:n,saveEscapeRoom:e.saveEscapeRoom,updateDetails:a.updateDetails,updateAccessibility:a.updateAccessibility,addComponent:a.addComponent,removeComponent:a.removeComponent,updateComponent:a.updateComponent,addRelationship:a.addRelationship,removeRelationship:a.removeRelationship})}}),c.a.createElement(De.a,{path:"/login",render:function(t){return c.a.createElement(Et,{authenticateCredentials:e.authenticateCredentials})}}),c.a.createElement(De.a,{path:"/signup",render:function(t){return c.a.createElement(gt,{signUp:e.signUp})}}),c.a.createElement(De.a,{path:"/about",component:vt}),c.a.createElement(De.a,{path:"/tutorials",component:yt}),c.a.createElement(De.a,{component:wt}))}}]),t}(i.Component),Wt=function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(j.a)(this,Object(x.a)(t).call(this))).toggle=function(){e.setState({isOpen:!e.state.isOpen})},e.toggleProfile=function(){e.setState({isProfileOpen:!e.state.isProfileOpen})},e.authenticate=Object($.a)(X.a.mark(function t(){var n,a;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authenticateJWT();case 2:return n=t.sent,t.next=5,e.populateUserFromJWT(n);case 5:if(null==(a=t.sent)){t.next=9;break}return t.next=9,e.populateEscapeRooms(a._id);case 9:case"end":return t.stop()}},t,this)})),e.authenticateJWT=Object($.a)(X.a.mark(function t(){var n;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate();case 3:return n=t.sent,t.abrupt("return",n.accessToken);case 7:t.prev=7,t.t0=t.catch(0),e.logout();case 10:case"end":return t.stop()}},t,this,[[0,7]])})),e.populateUserFromJWT=function(){var t=Object($.a)(X.a.mark(function t(n){var a,r;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n&&null!==n&&""!==n){t.next=3;break}return e.setState({profile:!1}),t.abrupt("return",null);case 3:return t.next=5,e.props.feathersClient.passport.verifyJWT(n);case 5:return a=t.sent,t.next=8,e.props.services.users.get(a.userId);case 8:if(a=t.sent,void 0!==(r=a.value).email&&""!==r.email){t.next=13;break}return e.setState({profile:!1}),t.abrupt("return",null);case 13:return r.token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(r),e.setState({profile:!0}),t.abrupt("return",r);case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.populateEscapeRooms=function(){var t=Object($.a)(X.a.mark(function t(n){var a,r;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===n||void 0===n){t.next=5;break}return t.next=3,e.props.services["escape-rooms"].find({query:{userId:n}});case 3:(a=t.sent).action.type.includes("FULFILLED")&&(null!==(r=a.value.data)&&void 0!==r&&e.props.redux.actions.escapeRooms.updateEscapeRooms(r),e.setState({loading:!1}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.logout=function(){window.localStorage.removeItem("feathers-jwt"),e.setState({profile:null}),e.props.redux.actions.user.logout(),e.props.history.push("/")},e.updateUser=function(){var t=Object($.a)(X.a.mark(function t(n){var a,r;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.props.redux.state.user,t.next=4,e.props.services.users.patch(a._id,n);case 4:return r=t.sent,e.props.redux.actions.user.login(r.value),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),e.state={profile:!1,isProfileOpen:!1,tooltipOpen:!1,isOpen:!1},e}return Object(D.a)(t,e),Object(k.a)(t,[{key:"componentDidUpdate",value:function(e){e.redux.state.user.email!==this.props.redux.state.user.email&&(this.populateEscapeRooms(this.props.redux.state.user._id),void 0!==this.props.redux.state.user.email?this.setState({profile:!0}):this.setState({profile:!1}))}},{key:"componentDidMount",value:function(){window.localStorage.getItem("feathers-jwt")&&void 0!==this.props.redux.state.user.email?this.setState({profile:!0}):window.localStorage.getItem("feathers-jwt")&&void 0===this.props.redux.state.user.email&&this.authenticate()}},{key:"render",value:function(){var e,t=this.state.loading||this.props.redux.state.usersService.isLoading||this.props.redux.state.escapeRoomsService.isLoading,n=this.props.redux.state.modal,a=this.props.redux.actions.modal.hideModal,r=this.props.redux.state.user;return e=this.state.profile?c.a.createElement(Z.a,{isOpen:this.state.isProfileOpen,toggle:this.toggleProfile,nav:!0,inNavbar:!0},c.a.createElement(ee.a,{nav:!0,caret:!0},"Profile"),c.a.createElement(te.a,{right:!0},c.a.createElement(je,{user:r,updateUser:this.updateUser}),c.a.createElement(ne.a,{id:"LogoutButton",onClick:this.logout,block:!0},"Logout"))):null,c.a.createElement("div",null,c.a.createElement(fe.a,{className:"loading-overlay",active:t,spinner:!0},c.a.createElement("header",null,c.a.createElement(ae.a,{color:"light",light:!0,expand:"md"},c.a.createElement(re.a,{href:"/"},"The Escape Room Generator V1.1.0"),c.a.createElement(oe.a,{onClick:this.toggle}),c.a.createElement(se.a,{isOpen:this.state.isOpen,navbar:!0},c.a.createElement(ie.a,{className:"ml-auto",navbar:!0},c.a.createElement(ce.a,null,c.a.createElement(le.a,{href:"/"},"Survey")),c.a.createElement(ce.a,null,c.a.createElement(le.a,{href:"https://github.com/AldoAbdn/Escape-Room-Generator"},"GitHub")),c.a.createElement(ce.a,null,c.a.createElement(Q.a,{className:"nav-link",to:"/about"},"About")),c.a.createElement(ce.a,null,c.a.createElement(Q.a,{className:"nav-link",to:"/tutorials"},"Tutorials")),e)))),c.a.createElement("main",null,c.a.createElement(Lt,{history:this.props.history,feathersClient:this.props.feathersClient,redux:this.props.redux,services:this.props.services}))),c.a.createElement(pe.a,{isOpen:n.isOpen},c.a.createElement(ue.a,null,n.header),c.a.createElement(de.a,null,n.body),c.a.createElement(he.a,null,c.a.createElement(ne.a,{color:"success",onClick:function(){n.confirm.action(),a()}},n.confirm.text),c.a.createElement(ne.a,{color:"danger",onClick:function(){n.cancel.action(),a()}},n.cancel.text))))}}]),t}(i.Component);function zt(e){return{type:"LOGIN",user:e}}function Ut(){return{type:"LOGOUT"}}function Ft(e){return{type:"ADD_ESCAPE_ROOM",escapeRoom:e}}function Ht(e){return{type:"REMOVE_ESCAPE_ROOM",escapeRoom:e}}function Gt(e){return{type:"UPDATE_ESCAPE_ROOM",escapeRoom:e}}function Jt(e){return{type:"UPDATE_ESCAPE_ROOMS",escapeRooms:e}}function Bt(e){return{type:"SET_SELECTED_ESCAPE_ROOM",escapeRoom:e}}function Yt(e){return{type:"CLEAR_SELECTED_ESCAPE_ROOM",escapeRoom:e}}function Vt(e){return{type:"UPDATE_DETAILS",details:e}}function qt(e){return{type:"UPDATE_ACCESSIBILITY",accessibility:e}}function Kt(e,t){return{type:"ADD_COMPONENT",component:e,areaId:t}}function Xt(e){return{type:"REMOVE_COMPONENT",componentId:e}}function $t(e,t){return{type:"UPDATE_COMPONENT",component:e,areaId:t}}function Qt(e,t,n){return{type:"ADD_RELATIONSHIP",componentId:e,parentId:t,isInput:n}}function Zt(e,t,n){return{type:"REMOVE_RELATIONSHIP",componentId:e,parentId:t,isInput:n}}function en(e){return{type:"SHOW_MODAL",modal:e}}function tn(){return{type:"HIDE_MODAL"}}var nn=Object(d.b)(function(e){return{redux:e}},function(e){return{user:Object(m.bindActionCreators)(a,e),escapeRooms:Object(m.bindActionCreators)(r,e),escapeRoom:Object(m.bindActionCreators)(o,e),modal:Object(m.bindActionCreators)(s,e)}},function(e,t,n){return Object(C.a)({},n,{redux:{state:e.redux,actions:t}})})(Wt),an=Object(q.a)(nn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rn=n(325),on=n.n(rn),sn=n(326),cn=n.n(sn),ln=n(211),pn=n.n(ln);n.d(t,"feathersClient",function(){return hn});var un={backends:[{backend:on.a},{backend:cn()({enableMouseEvents:!0}),preview:!0,transition:ln.TouchTransition}]},dn=pn()(un),hn=B()().configure(B.a.socketio(G()())).configure(B.a.hooks()).configure(B.a.authentication({storage:window.localStorage})),mn=V()(hn,["users","escape-rooms"]),fn=function(e,t){var n=window.devToolsExtension?window.devToolsExtension()(m.createStore):m.createStore;return m.applyMiddleware.apply(void 0,Object(h.a)(v))(n)(F(e),t)}(mn,{user:{},escapeRooms:[],escapeRoom:{}}),En=Object(Y.bindWithDispatch)(fn.dispatch,mn),gn=c.a.createElement(Ge.DragDropContextProvider,{backend:dn},c.a.createElement(d.a,{store:fn},c.a.createElement(u.a,null,c.a.createElement(an,{feathersClient:hn,services:En,getServicesStatus:Y.getServicesStatus}))));p.a.render(gn,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,t,n){}},[[328,2,1]]]);
//# sourceMappingURL=main.64a22a0a.chunk.js.map