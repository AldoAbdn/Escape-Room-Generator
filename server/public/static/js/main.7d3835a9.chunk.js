(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{266:function(e,t,n){e.exports=n(610)},300:function(e,t){},384:function(e,t,n){},388:function(e,t,n){},397:function(e,t,n){},501:function(e,t,n){},610:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"login",function(){return gt}),n.d(a,"logout",function(){return Ot});var o={};n.r(o),n.d(o,"addEscapeRoom",function(){return yt}),n.d(o,"removeEscapeRoom",function(){return jt}),n.d(o,"updateEscapeRoom",function(){return kt}),n.d(o,"updateEscapeRooms",function(){return wt});var r={};n.r(r),n.d(r,"setSelectedEscapeRoom",function(){return xt}),n.d(r,"clearSelectedEscapeRoom",function(){return Rt}),n.d(r,"updateDetails",function(){return Dt}),n.d(r,"updateAccessibility",function(){return St}),n.d(r,"addComponent",function(){return Tt}),n.d(r,"removeComponent",function(){return It}),n.d(r,"updateComponent",function(){return Mt}),n.d(r,"addRelationship",function(){return At}),n.d(r,"removeRelationship",function(){return _t});var s={};n.r(s),n.d(s,"showModal",function(){return Pt}),n.d(s,"hideModal",function(){return Nt});var i=n(1),c=n.n(i),l=n(20),p=n.n(l),u=n(643),m=n(126),d=n(34),h=n(28),f=n(254),E=n(265),v=function(e){return function(t){return function(n){console.groupCollapsed(n.type),console.info("dispatching",n);var a=t(n);return console.log("next state",e.getState()),console.groupEnd(n.type),a}}},b=[f.a,Object(E.a)(),v],C=n(255),g=n(22);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(g.a)({},t.user);case"LOGOUT":return{};default:return e}};var y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_ESCAPE_ROOM":return t.push(n.escapeRoom),t.slice();case"REMOVE_ESCAPE_ROOM":return e=t.findIndex(function(e){return e._id===n.escapeRoom._id}),[].concat(Object(d.a)(t.slice(0,e)),Object(d.a)(t.slice(e+1)));case"UPDATE_ESCAPE_ROOM":return e=t.findIndex(function(e){return e._id===n.escapeRoom._id}),t[e]=n.escapeRoom,t.slice();case"UPDATE_ESCAPE_ROOMS":return n.escapeRooms.slice();default:return t}};var j=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a={};switch(n.type){case"SET_SELECTED_ESCAPE_ROOM":return Object(g.a)({},n.escapeRoom);case"CLEAR_SELECTED_ESCAPE_ROOM":return{};case"UPDATE_DETAILS":return(a=Object(g.a)({},t)).details=Object(g.a)({},a.details,n.details),a;case"UPDATE_ACCESSIBILITY":return(a=Object(g.a)({},t)).accessibility=Object(g.a)({},a.accessibility,n.accessibility),a;case"ADD_COMPONENT":return(a=Object(g.a)({},t)).components.push(n.component),e=a.components.findIndex(function(e){return e._id===n.areaId}),a.components[e].outputComponents.push(n.component._id),a;case"REMOVE_COMPONENT":return e=(a=Object(g.a)({},t)).components.findIndex(function(e){return e._id===n.componentId}),a.components=[].concat(Object(d.a)(a.components.slice(0,e)),Object(d.a)(a.components.slice(e+1))),a.components.forEach(function(e,t,a){a[t].inputComponents=e.inputComponents.filter(function(e){return e!==n.componentId}),a[t].outputComponents=e.outputComponents.filter(function(e){return e!==n.componentId})}),a;case"UPDATE_COMPONENT":return e=(a=Object(g.a)({},t)).components.findIndex(function(e){return e._id===n.component._id}),a.components[e]=Object(g.a)({},a.components[e],n.component),a;case"ADD_RELATIONSHIP":return(a=Object(g.a)({},t)).components.forEach(function(e,t,a){e._id===n.parentId&&(n.isInput?-1===e.inputComponents.indexOf(n.componentId)&&e.inputComponents.push(n.componentId):-1===e.outputComponents.indexOf(n.componentId)&&e.outputComponents.push(n.componentId))}),a;case"REMOVE_RELATIONSHIP":return(a=Object(g.a)({},t)).components.forEach(function(e,t,a){e._id===n.parentId&&(n.isInput?-1===e.inputComponents.indexOf(n.componentId)&&(e.inputComponents=e.inputComponents.filter(function(e){return e!==n.componentId})):-1===e.outputComponents.indexOf(n.componentId)&&(e.outputComponents=e.outputComponents.filter(function(e){return e!==n.componentId})))}),a;default:return t}},k=n(11),w=function e(t,n,a,o,r,s){var i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];Object(k.a)(this,e),this.header=t,this.body=n,this.confirm={text:a,action:o},this.cancel={text:r,action:s},this.isOpen=i};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w("","","",function(){},"",function(){},!1),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return Object(g.a)({},t.modal,{isOpen:!0});case"HIDE_MODAL":return new w("","","",function(){},"",function(){},!1);default:return e}},R=function(e){return Object(h.combineReducers)({usersService:e.users.reducer,escapeRoomsService:e["escape-rooms"].reducer,routing:C.routerReducer,user:O,escapeRooms:y,escapeRoom:j,modal:x})};var D=n(256),S=n.n(D),T=n(88),I=n.n(T),M=n(127),A=n.n(M),_=(n(384),n(386),n(642)),P=(n(388),n(19)),N=n.n(P),L=n(24),U=n(18),F=n(15),J=n(14),W=n(16),B=n(637),z=n(399),H=n(645),G=n(639),V=n(640),Y=n(641),q=n(258),X=n.n(q),K=(n(397),n(638)),$=n(583),Q=n(644),Z=n(612),ee=n(613),te=n(614),ne=n(615),ae=n(616),oe=n(617),re=n(618),se=n(619),ie=n(620),ce=n(118),le=n(119),pe=n.n(le),ue=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleToggle=function(e){return function(t){var a=n.state.dropdownOpen;a[e]=!a[e],n.setState({dropdownOpen:a})}},n.handleClick=function(){var e=Object(L.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.newEscapeRoom&&n.props.newEscapeRoom();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleItemClick=function(e,t){return function(a){var o=n.props.escapeRooms[e];switch(t){case"EDIT":n.props.editEscapeRoom&&n.props.editEscapeRoom(o);break;case"JSON":n.saveJSON(o);break;case"PDF":n.savePDF(o);break;case"DELETE":n.props.deleteEscapeRoom&&n.props.showModal(new w("Warning","Are you sure you want to delete "+o.details.name+"?","Yes",function(){n.props.deleteEscapeRoom(o)},"No",function(){}));break;default:return}}},n.mapEscapeRoomToList=function(e,t){return c.a.createElement(Z.a,{key:t},e.details.name,c.a.createElement(ee.a,{style:{display:"inline",position:"absolute",right:"20px"},isOpen:n.state.dropdownOpen[t],toggle:n.handleToggle(t)},c.a.createElement(te.a,{caret:!0}),c.a.createElement(ne.a,{right:!0},c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"EDIT")},"Edit"),c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"JSON")},"Export as JSON"),c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"PDF")},"Export as PDF"),c.a.createElement(ae.a,{onClick:n.handleItemClick(t,"DELETE")},"Delete"))))},n.state={dropdownOpen:[!1,!1]},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(ce.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new pe.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"render",value:function(){var e=this.props.escapeRooms;return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(z.a,{block:!0,onClick:this.handleClick},"NEW"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ie.a,null,e.map(this.mapEscapeRoomToList)))))}}]),t}(i.Component),me=n(45),de=n(621),he=n(622),fe=n(623),Ee=n(624),ve=n(625),be=n(626),Ce=n(627),ge=n(628),Oe=n(629),ye=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).handleSubmit=function(){var t=Object(L.a)(N.a.mark(function t(n){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.props.updateUser&&e.props.updateUser({email:e.state.email,password:e.state.password});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(me.a)({},t.target.id,t.target.value))},e.handleDismiss=function(t){e.setState({errorMessage:""})},e.handleClick=function(){var t=Object(L.a)(N.a.mark(function t(n){var a;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.target.id,t.next="editButton"===t.t0?3:"saveButton"===t.t0?5:19;break;case 3:return e.setState({edit:!0}),t.abrupt("break",19);case 5:if(a=e.props.user,""!==e.state.email){t.next=11;break}return e.setState({errorMessage:"Email Required"}),t.abrupt("return");case 11:a.email=e.state.email;case 12:if(""!==e.state.password&&(a.password=e.state.password),void 0===e.props.updateUser){t.next=18;break}return t.next=16,e.props.updateUser(a);case 16:!0===t.sent?e.setState({edit:!1}):e.setState({errorMessage:"Error, Please Try Again Later"});case 18:return t.abrupt("break",19);case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={edit:!1,errorMessage:"",email:"",password:"",_id:""},e}return Object(W.a)(t,e),Object(U.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user;this.setState({email:e.email})}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(e.user.email!==t.user.email){var n=this.props.user;this.setState({email:n.email,_id:n._id})}}},{key:"render",value:function(){return this.profile=c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(he.a,{height:"50%",src:this.props.user.avatar,alt:"Profile Image"}),c.a.createElement(fe.a,null,c.a.createElement(Ee.a,{className:"text-center"},this.props.user.email),c.a.createElement(z.a,{id:"editButton",block:!0,className:"text-center",onClick:this.handleClick},"Edit Profile")))))),this.editProfile=c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,{onSubmit:this.handleSubmit},c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"email"},"Email"),c.a.createElement(ge.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"password"},"Password"),c.a.createElement(ge.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(z.a,{id:"saveButton",onClick:this.handleClick},"Save"),c.a.createElement(Oe.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))),this.state.edit?this.editProfile:this.profile}}]),t}(i.Component),je=n(630),ke=n(631),we=n(632),xe=n(633),Re=n(634),De=n(2),Se=n.n(De),Te=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).handleClick=function(t){return function(n){switch(t){case"EXIT":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom);break;case"JSON":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom),e.saveJSON(e.props.escapeRoom);break;case"PDF":e.props.saveEscapeRoom&&e.props.saveEscapeRoom(e.props.escapeRoom),e.savePDF(e.props.escapeRoom);break;default:return}}},e.handleToggle=function(t){e.setState({dropdownOpen:!e.state.dropdownOpen})},e.handleNav=function(t){return function(n){e.state.activeTab!==t&&e.setState({activeTab:t})}},e.state={activeTab:"design",dropdownOpen:!1},e}return Object(W.a)(t,e),Object(U.a)(t,[{key:"saveJSON",value:function(e){var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});Object(ce.saveAs)(t,e.details.name+".json")}},{key:"savePDF",value:function(e){var t=new pe.a;t.text(JSON.stringify(e),10,10),t.save(e.details.name+".pdf")}},{key:"componentDidMount",value:function(){void 0===this.props.escapeRoom&&this.props.history.push("/")}},{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,{xs:"6",md:"3",lg:"3"},c.a.createElement(z.a,{block:!0,onClick:this.handleClick("EXIT")},"Save and Exit")),c.a.createElement(se.a,{xs:"6",md:"3",lg:"3"},c.a.createElement(ee.a,{block:!0,isOpen:this.state.dropdownOpen,toggle:this.handleToggle},c.a.createElement(te.a,{caret:!0},"Save and Export"),c.a.createElement(ne.a,{right:!0},c.a.createElement(ae.a,{onClick:this.handleClick("JSON")},"Export as JSON"),c.a.createElement(ae.a,{onClick:this.handleClick("PDF")},"Export as PDF")))),c.a.createElement(se.a,{xs:"6"})),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(je.a,{tabs:!0},c.a.createElement(ke.a,null,c.a.createElement(we.a,{className:Se()({active:"details"===this.state.activeTab}),onClick:this.handleNav("details")},"Details")),c.a.createElement(ke.a,null,c.a.createElement(we.a,{className:Se()({active:"accessibility"===this.state.activeTab}),onClick:this.handleNav("accessibility")},"Accessibility")),c.a.createElement(ke.a,null,c.a.createElement(we.a,{className:Se()({active:"design"===this.state.activeTab}),onClick:this.handleNav("design")},"Design"))))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(xe.a,{activeTab:this.state.activeTab},c.a.createElement(Re.a,{tabId:"details"},c.a.createElement(Ie,{details:this.props.escapeRoom.details,updateDetails:this.props.updateDetails})),c.a.createElement(Re.a,{tabId:"accessibility"},c.a.createElement(it,{accessibility:this.props.escapeRoom.accessibility,updateAccessibility:this.props.updateAccessibility})),c.a.createElement(Re.a,{tabId:"design"},c.a.createElement(Me,{components:{components:this.props.escapeRoom.components},showModal:this.props.showModal,accessibility:this.props.escapeRoom.accessibility,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,updateComponent:this.props.updateComponent,addRelationship:this.props.addRelationship,removeRelationship:this.props.removeRelationship}))))))}}]),t}(i.Component),Ie=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,n.props.updateDetails(t)},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"name"},"Room Name"),c.a.createElement(ge.a,{type:"text",name:"name",id:"name",placeholder:"Room Name",value:this.props.details.name,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"designers"},"Designers"),c.a.createElement(ge.a,{type:"text",name:"designers",id:"designers",placeholder:"Designer(s)",value:this.props.details.designers,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"theme"},"Theme"),c.a.createElement(ge.a,{type:"text",name:"theme",id:"theme",placeholder:"theme",value:this.props.details.theme,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,null,"Players"),c.a.createElement(ge.a,{type:"text",name:"minPlayers",id:"minPlayers",placeholder:"Min",value:this.props.details.minPlayers,onChange:this.handleChange}),c.a.createElement(ge.a,{type:"text",name:"maxPlayers",id:"maxPlayers",placeholder:"Max",value:this.props.details.maxPlayers,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"targetTime"},"Target Time"),c.a.createElement(ge.a,{type:"text",name:"targetTime",id:"targetTime",placeholder:"Time",value:this.props.details.targetTime,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"difficulty"},"Difficulty"),c.a.createElement(ge.a,{type:"range",min:"1",max:"5",name:"difficulty",id:"difficulty",value:this.props.details.difficulty,onChange:this.handleChange})))),c.a.createElement(se.a,null,c.a.createElement(ve.a,null,c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"objective"},"Objective"),c.a.createElement(ge.a,{type:"text",name:"objective",id:"objective",placeholder:"Main Objective",value:this.props.details.objective,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"description"},"Description"),c.a.createElement(ge.a,{type:"textarea",name:"description",id:"description",placeholder:"Description",value:this.props.details.description,onChange:this.handleChange}))))))}}]),t}(i.Component),Me=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleComponentClick=function(e){return function(t){t.stopPropagation(),n.setState({selected:e})}},n.state={selected:{}},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,{md:"2"},c.a.createElement(tt,null)),c.a.createElement(se.a,{md:"8"},c.a.createElement(ot,{showModal:this.props.showModal,handleComponentClick:this.handleComponentClick,updateComponent:this.props.updateComponent,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship,components:this.props.components.components})),c.a.createElement(se.a,{md:"2"},c.a.createElement(rt,{selected:this.state.selected,updateComponent:this.props.updateComponent}))))}}]),t}(i.Component),Ae=n(31),_e=(n(84),n(260)),Pe=n.n(_e),Ne=function e(){Object(k.a)(this,e),this._id=Pe()(),this.name="",this.description="",this.inputComponents=[],this.outputComponents=[],this.type="Component",this.position={top:0,left:0},this.estimatedCost=""},Le=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).type="Area",e}return Object(W.a)(t,e),t}(Ne),Ue=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).puzzleType="",e.type="Puzzle",e}return Object(W.a)(t,e),t}(Ne),Fe=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).type="Prop",e}return Object(W.a)(t,e),t}(Ne),Je=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).lockType="",e.type="Lock",e}return Object(W.a)(t,e),t}(Ne),We=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).eventType="",e.type="Event",e}return Object(W.a)(t,e),t}(Ne),Be=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).startTime="",e.endTime="",e.type="Music",e}return Object(W.a)(t,e),t}(Ne);var ze=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"handleComponentDrop",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;if(void 0!==e.id){switch(e.id){case"Puzzle":n=new Ue;break;case"Lock":n=new Je;break;case"Event":n=new We;break;case"Music":n=new Be;break;case"Prop":n=new Fe;break;default:return}this.props.addComponent(n,this.props.component._id)}else(n=e)._id!==this.props.component._id&&this.props.addRelationship(n._id,this.props.component._id,t)}},{key:"render",value:function(){var e;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(c.a.createElement("div",{className:e,key:this.props.component._id},c.a.createElement(de.a,{onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(fe.a,null))))}}]),t}(i.Component),He=Object(Ae.DropTarget)("COMPONENT",{drop:function(e,t,n){if(!t.didDrop()){var a=t.getItem(),o=e.isInput;return n.handleComponentDrop(a,o),{moved:!0}}}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(ze),Ge=n(121),Ve={canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,n){return void 0===e.component?{id:e.id}:Object(g.a)({},e.component)},endDrag:function(e,t,n){t.didDrop()||void 0===e.component&&null===e.component||e.showModal(new w("Warning","Are you sure you want to delete this component?","Yes",n.removeComponent,"No",function(){}))}};var Ye=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).removeComponent=function(){n.props.removeComponent(n.props.component._id)},n.mapRelationships=function(e,t){var n,a="";switch(t){case"input":n={strokeColor:"blue"},a="input";break;case"output":n={strokeColor:"green"},a="output";break;default:n={}}return{targetId:e,targetAnchor:"top",sourceAnchor:"bottom",style:n,label:a}},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"findComponent",value:function(e){return void 0!==this.props.findComponent?this.props.findComponent(e):null}},{key:"render",value:function(){var e,t=this;this.props.isTarget&&(e=c.a.createElement(re.a,null,c.a.createElement(se.a,{xs:"6"},c.a.createElement(He,{isInput:!0,component:this.props.component,handleComponentClick:this.props.handleComponentClick,showModal:this.props.showModal,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship})),c.a.createElement(se.a,{xs:"6"},c.a.createElement(He,{isInput:!1,component:this.props.component,handleComponentClick:this.props.handleComponentClick,showModal:this.props.showModal,addComponent:this.props.addComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship}))));var n,a,o,r={},s="",i="component";return void 0!==this.props.component&&(r.top=this.props.component.position.top,r.left=this.props.component.position.left,r.position="relative",i+=" "+this.props.component.type+" "+this.props.component._id,s=this.props.component._id,n=this.props.component.inputComponents.map(function(e){return t.mapRelationships(e,"input")}),a=this.props.component.outputComponents.map(function(e){return t.mapRelationships(e,"output")}),o=c.a.createElement(Ge.ArcherElement,{id:s,relations:[].concat(Object(d.a)(a),Object(d.a)(n))},c.a.createElement("span",null,s))),this.props.connectDragSource(c.a.createElement("div",{className:i,style:r,onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement("span",null,this.props.id),e,o))}}]),t}(i.Component),qe=Object(Ae.DragSource)("COMPONENT",Ve,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Ye),Xe={drop:function(e,t,n){if(!t.didDrop()&&n&&void 0!==typeof e.component){var a=t.getItem();if(void 0===a.position){var o=t.getClientOffset(),r=p.a.findDOMNode(n).getBoundingClientRect();a.position={top:o.y-r.y-.2*r.height,left:o.x-r.x-.1*r.width}}else{var s=t.getDifferenceFromInitialOffset();a.position.left=Math.round(a.position.left+s.x),a.position.top=Math.round(a.position.top+s.y)}return n.handleComponentDrop(a),{moved:!0}}}};var Ke=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"handleComponentDrop",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=null;if(void 0!==e.id&&void 0===e._id){switch(e.id){case"Puzzle":(t=new Ue).position=e.position;break;case"Prop":(t=new Fe).position=e.position;break;case"Lock":(t=new Je).position=e.position;break;case"Event":(t=new We).position=e.position;break;case"Music":(t=new Be).position=e.position;break;default:return}this.props.addComponent(t,this.props.component._id)}else t=e,this.props.updateComponent(t)}},{key:"render",value:function(){var e,t=this;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(c.a.createElement("div",{className:e,key:this.props.component._id},c.a.createElement(de.a,{className:this.props.component.type,onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(fe.a,null,c.a.createElement(Ee.a,null,this.props.component.type),c.a.createElement(Ge.ArcherContainer,null,this.props.outputComponents.map(function(e,n){return c.a.createElement(qe,{key:e._id,isTarget:!0,handleComponentClick:t.props.handleComponentClick,component:e,findComponent:t.props.findComponent,id:e.type,showModal:t.props.showModal,addComponent:t.props.addComponent,removeComponent:t.props.removeComponent,addRelationship:t.props.addRelationship})}))))))}}]),t}(i.Component),$e=Object(Ae.DropTarget)("COMPONENT",Xe,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver(),canDrop:t.canDrop(),itemType:t.getItemType()}})(Ke),Qe={canDrag:function(e){return!0},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,n){return void 0!==e.id?{id:e.id}:{component:e.component}},endDrag:function(e,t,n){t.didDrop()||e.showModal(new w("Warning","Are you sure you want to delete this component?","Yes",n.removeComponent,"No",function(){}))}};var Ze=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).removeComponent=function(){n.props.removeComponent(n.props.component._id)},n.addComponent=function(e,t){n.props.addComponent(e,n.props.component._id),n.props.addRelationship(e._id,t)},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e;return this.props.isTarget&&(e=c.a.createElement($e,{findComponent:this.props.findComponent,handleComponentClick:this.props.handleComponentClick,outputComponents:this.props.outputComponents,component:this.props.component,showModal:this.props.showModal,addComponent:this.props.addComponent,updateComponent:this.props.updateComponent,removeComponent:this.props.removeComponent,addRelationship:this.props.addRelationship})),this.props.connectDragSource(c.a.createElement("div",{onClick:this.props.handleComponentClick(this.props.component)},c.a.createElement(de.a,{className:"component"},this.props.id,e)))}}]),t}(i.Component),et=Object(Ae.DragSource)("AREA",Qe,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Ze),tt=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleComponentClick=function(e){},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h3",null,"Pallet"))),c.a.createElement(re.a,null,c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(et,{id:"Area",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Puzzle",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Prop",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Lock",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Event",handleComponentClick:this.handleComponentClick})),c.a.createElement(se.a,{xs:"3",md:"12",lg:"12"},c.a.createElement(qe,{id:"Music",handleComponentClick:this.handleComponentClick}))))}}]),t}(i.Component),nt=(n(501),{drop:function(e,t,n){var a=t.getItem();void 0!==a.component&&null!==a.component||n.props.addComponent(new Le)}});var at=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).findComponent=function(e){return n.props.components.find(function(t){return e===t._id})},n.mapAreas=function(e,t){if("Area"===e.type){var a=e.outputComponents.map(function(e,t){return n.findComponent(e)});return c.a.createElement(se.a,{key:t,xs:"12"},c.a.createElement(et,{isTarget:!0,findComponent:n.findComponent,handleComponentClick:n.props.handleComponentClick,component:e,outputComponents:a,showModal:n.props.showModal,addComponent:n.props.addComponent,removeComponent:n.props.removeComponent,updateComponent:n.props.updateComponent,addRelationship:n.props.addRelationship}))}},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.components)!==JSON.stringify(e.components)&&this.setState({render:!0})}},{key:"render",value:function(){var e;return this.props.isOver&&this.props.canDrop?e="canDrop":this.props.isOver&&(e="cantDrop"),this.props.connectDropTarget(c.a.createElement("div",{className:e},c.a.createElement(oe.a,{className:"component-arranger"},c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h3",null,"Components"))),c.a.createElement(re.a,null,this.props.components.map(this.mapAreas)))))}}]),t}(i.Component),ot=Object(Ae.DropTarget)("AREA",nt,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(at),rt=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,t._id=n.props.selected._id,n.props.updateComponent(t)},n.mapDetailToInput=function(e,t){return"string"===typeof n.props.selected[e]&&"_id"!==e&&"type"!==e?c.a.createElement(re.a,{key:t},c.a.createElement(se.a,null,c.a.createElement(Ce.a,{for:e},e),c.a.createElement(ge.a,{type:"text",name:e,id:e,placeholder:e,value:n.props.selected[e],onChange:n.handleChange}))):void 0},n.handleOnClick=function(e,t){return function(a){var o=Object(g.a)({},n.props.selected),r={};r._id=o._id,t?r.inputComponents=o.inputComponents.filter(function(t){return t!==e}):r.outputComponents=o.outputComponents.filter(function(t){return t!==e}),n.props.updateComponent(r)}},n.mapIDToP=function(e,t,a){return c.a.createElement(Z.a,{key:t},e,c.a.createElement(z.a,{onClick:n.handleOnClick(e,a),color:"danger",style:{display:"inline",position:"absolute",right:"2px",top:"0.3rem"}},"X"))},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e,t,n,a,o,r,s=this,i=this.props.selected;return void 0===i&&null===i||(t=Object.keys(i).map(this.mapDetailToInput),e=this.props.selected.type,"Area"!==i.type&&void 0!==i.inputComponents&&void 0!==i.outputComponents&&(i.inputComponents.length>0||i.outputComponents.length>0)&&(n=i.inputComponents.map(function(e,t){return s.mapIDToP(e,t,!0)}),a=i.outputComponents.map(function(e,t){return s.mapIDToP(e,t,!1)}),o=c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h4",null,"Inputs"),c.a.createElement(ie.a,null,n))),r=c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h4",null,"Outputs"),c.a.createElement(ie.a,null,a))))),c.a.createElement(oe.a,{style:{"margin-bottom":"5vh"}},c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h3",null,"Details"),c.a.createElement("h4",null,e))),t,o,r)}}]),t}(i.Component),st=n(635),it=function(e){function t(){var e,n;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(F.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,n.props.updateAccessibility(t)},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h1",{className:"text-center"},"Visual Accessibility"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h2",null,"Colour Blindness"),c.a.createElement("p",null,"Please select the types of colour blindness your design must take into account")),c.a.createElement(se.a,null,c.a.createElement("h2",null,"Other"),c.a.createElement("p",null,"These are options to indicate restrictions on the design related to visual impairments such as blindness"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(st.a,{type:"checkbox",name:"protanomaly",id:"protanomaly",label:"Protanomaly",checked:this.props.accessibility.protanomaly,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"protanopia",id:"protanopia",label:"Protanopia",checked:this.props.accessibility.protanopia,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"deuteranomaly",id:"deuteranomaly",label:"Deuteranomaly",checked:this.props.accessibility.deuteranomaly,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"deuteranopia",id:"deuteranopia",label:"Deuteranopia",checked:this.props.accessibility.deuteranopia,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"tritanomaly",id:"tritanomaly",label:"Tritanomaly",checked:this.props.accessibility.tritanomaly,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"tritanopia",id:"tritanopia",label:"Tritanopia",checked:this.props.accessibility.tritanopia,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"coneMonochromacy",id:"coneMonochromacy",label:"Cone Monochromacy",checked:this.props.accessibility.coneMonochromacy,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"rodMonochromacy",id:"rodMonochromacy",label:"Rod Monochromacy",checked:this.props.accessibility.rodMonochromacy,onChange:this.handleChange}))),c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(st.a,{type:"checkbox",name:"largeFonts",id:"largeFonts",label:"Large Fonts",value:this.props.accessibility.largeFonts,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"highContrast",id:"highContrast",label:"High Contrast",value:this.props.accessibility.highContrast,onChange:this.handleChange}))))),c.a.createElement(se.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("h1",{className:"text-center"},"Physical Accessibility"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("p",null,"These options are to indicate restrictions on the design related to physical impairments for example wheelchair accessibility and motor functions"))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(de.a,null,c.a.createElement(st.a,{type:"checkbox",name:"Wheelchair Accessible",id:"heelchairAccessible",label:"wheelchairAccessible",value:this.props.accessibility.wheelchairAccessible,onChange:this.handleChange}),c.a.createElement(st.a,{type:"checkbox",name:"motorAccessible",id:"motorAccessible",label:"Accessible for players with motor function issues",value:this.props.accessibility.motorAccessible,onChange:this.handleChange})))))),c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("p",null,"These options are designed to indicate the attempted accessibility of your design. These options will flag puzzles in your design that do not meet these restrictions"))))}}]),t}(i.Component),ct=n(636),lt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleSubmit=function(){var e=Object(L.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.props.authenticateCredentials){e.next=6;break}return e.next=4,n.props.authenticateCredentials({strategy:"local",email:n.state.email,password:n.state.password});case 4:a=e.sent,n.setState({errorMessage:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(me.a)({},e.target.id,e.target.value))},n.handleDismiss=function(e){n.setState({errorMessage:""})},n.state={email:"",password:"",errorMessage:""},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"full-container verticaly-center-content"},c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,{onSubmit:this.handleSubmit},c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"email"},"Email"),c.a.createElement(ge.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"password"},"Password"),c.a.createElement(ge.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(z.a,null,"Login"),c.a.createElement(ct.a,null,"Don't have an account? Sign Up ",c.a.createElement(B.a,{to:"/signup"},"Here")),c.a.createElement(Oe.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(i.Component),pt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(F.a)(this,Object(J.a)(t).call(this,e))).handleSubmit=function(){var e=Object(L.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.props.signUp){e.next=6;break}return e.next=4,n.props.signUp({email:n.state.email,password:n.state.password});case 4:a=e.sent,n.setState({errorMessage:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(me.a)({},e.target.id,e.target.value))},n.handleDismiss=function(e){n.setState({errorMessage:""})},n.state={email:"",password:"",errorMessage:""},n}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"full-container verticaly-center-content"},c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement(ve.a,{onSubmit:this.handleSubmit},c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"email"},"Email"),c.a.createElement(ge.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),c.a.createElement(be.a,null,c.a.createElement(Ce.a,{for:"password"},"Password"),c.a.createElement(ge.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement(z.a,null,"Sign Up"),c.a.createElement(ct.a,null,"Have an account? Log In ",c.a.createElement(B.a,{to:"/login"},"Here")),c.a.createElement(Oe.a,{isOpen:""!==this.state.errorMessage,toggle:this.handleDismiss,color:"danger"},this.state.errorMessage))))))}}]),t}(i.Component),ut=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement(se.a,null,c.a.createElement("p",null,"This is my honours project for BsC(Hons) Computing: Application Software Development at Robert Gordon University This is a web app for designing an escape room using drag and drop components")),c.a.createElement(se.a,null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"https://github.com/AldoAbdn/Escape-Room-Generator/"},"Github Repo")),c.a.createElement("li",null,c.a.createElement("a",{href:"https://ninjamock.com/s/KCMW2Tx"},"Wireframe"))))))}}]),t}(i.Component),mt=n(261),dt=n.n(mt),ht=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(dt.a,{width:"85%",height:"100%",api_key:Object({NODE_ENV:"production",PUBLIC_URL:""}).youtubeAPIKey,playlist_id:"PLWRRwFEmEuDKX5sobzWeb50xD14cpfkk3",scrolling:!0})}}]),t}(i.Component),ft=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return window.localStorage.getItem("feathers-jwt")?void 0!==this.props.condition?this.props.condition?c.a.createElement($.a,this.props):c.a.createElement(Q.a,{to:this.props.redirect,state:this.props.location}):c.a.createElement($.a,this.props):c.a.createElement(Q.a,{to:"/login",state:this.props.location})}}]),t}(i.Component),Et=function(e){function t(){return Object(k.a)(this,t),Object(F.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return c.a.createElement(oe.a,null,c.a.createElement(re.a,null,c.a.createElement("h1",null,"404 Page Not Found")))}}]),t}(i.Component),vt=function e(t){Object(k.a)(this,e),this.userId=t,this.details={name:"Unnamed",designers:"",theme:"",minPlayers:"",maxPlayers:"",targetTime:"",difficulty:"3",objective:"",description:""},this.accessibility={protanomaly:!1,protanopia:!1,deuteranomaly:!1,deuteranopia:!1,tritanomaly:!1,tritanopia:!1,coneMonochromacy:!1,rodMonochromacy:!1,largeFonts:!1,highContrast:!1},this.components=[new Le]},bt=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).authenticateCredentials=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate(n);case 3:return t.next=5,e.props.services.users.find({query:{email:n.email}});case 5:(a=t.sent).action.type.includes("FULFILLED")&&a.value.total>0?((o=a.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(o),e.props.history.push("/dashboard")):e.setState({}),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),e.signUp=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.services.users.create(n);case 3:return t.next=5,e.props.feathersClient.authenticate({strategy:"local",email:n.email,password:n.password});case 5:return t.next=7,e.props.services.users.find({query:{email:n.email}});case 7:(a=t.sent).action.type.includes("FULFILLED")&&((o=a.value.data[0]).token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(o),e.props.history.push("/dashboard")),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}(),e.editEscapeRoom=function(t){console.log(e.props),e.props.redux.actions.escapeRoom.setSelectedEscapeRoom(t),e.props.history.push("/designer")},e.newEscapeRoom=Object(L.a)(N.a.mark(function t(){var n,a,o,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.redux.state.user._id,a=new vt(n),t.next=4,e.props.services["escape-rooms"].create(a);case 4:(o=t.sent).action.type.includes("FULFILLED")&&null!==(r=o.value)&&(e.props.redux.actions.escapeRooms.addEscapeRoom(r),e.props.redux.actions.escapeRooms.setSelectedEscapeRoom(r),e.props.history.push("/designer"));case 6:case"end":return t.stop()}},t,this)})),e.deleteEscapeRoom=function(t){e.props.services["escape-rooms"].remove(t._id),e.props.redux.actions.escapeRooms.removeEscapeRoom(t)},e.updateUser=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.props.redux.state.user,t.next=4,e.props.services.users.patch(a._id,n);case 4:return o=t.sent,e.props.redux.actions.user.login(o.value),e.props.history.push("/profile"),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}(),e.saveEscapeRoom=function(){var t=Object(L.a)(N.a.mark(function t(n){return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n._id){t.next=5;break}return t.next=3,e.props.services["escape-rooms"].update(n._id,n);case 3:return t.next=5,e.props.redux.actions.escapeRooms.updateEscapeRoom(n);case 5:e.props.history.push("/");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={profile:null},e}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this,t=this.props.redux.state.escapeRooms,n=this.props.redux.state.escapeRoom,a=this.props.redux.actions.escapeRoom,o=this.props.redux.state.user,r=this.props.redux.actions.modal.showModal;return c.a.createElement(K.a,null,c.a.createElement(Q.a,{exact:!0,from:"/",to:"dashboard"}),c.a.createElement(ft,{path:"/dashboard",render:function(n){return c.a.createElement(ue,{escapeRooms:t,showModal:r,editEscapeRoom:e.editEscapeRoom,newEscapeRoom:e.newEscapeRoom,deleteEscapeRoom:e.deleteEscapeRoom})}}),c.a.createElement(ft,{path:"/profile",condition:Object.keys(o).length>0&&void 0!==o,redirect:"/login",render:function(t){return c.a.createElement(ye,{user:o,updateUser:e.updateUser})}}),c.a.createElement(ft,{path:"/designer",condition:Object.keys(n).length>0&&void 0!==n,redirect:"/",render:function(t){return c.a.createElement(Te,{showModal:r,escapeRoom:n,saveEscapeRoom:e.saveEscapeRoom,updateDetails:a.updateDetails,updateAccessibility:a.updateAccessibility,addComponent:a.addComponent,removeComponent:a.removeComponent,updateComponent:a.updateComponent,addRelationship:a.addRelationship,removeRelationship:a.removeRelationship})}}),c.a.createElement($.a,{path:"/login",render:function(t){return c.a.createElement(lt,{authenticateCredentials:e.authenticateCredentials})}}),c.a.createElement($.a,{path:"/signup",render:function(t){return c.a.createElement(pt,{signUp:e.signUp})}}),c.a.createElement($.a,{path:"/about",component:ut}),c.a.createElement($.a,{path:"/tutorials",component:ht}),c.a.createElement($.a,{component:Et}))}}]),t}(i.Component),Ct=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(F.a)(this,Object(J.a)(t).call(this))).authenticate=Object(L.a)(N.a.mark(function t(){var n,a;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authenticateJWT();case 2:return n=t.sent,t.next=5,e.populateUserFromJWT(n);case 5:if(null==(a=t.sent)){t.next=9;break}return t.next=9,e.populateEscapeRooms(a._id);case 9:case"end":return t.stop()}},t,this)})),e.authenticateJWT=Object(L.a)(N.a.mark(function t(){var n;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.feathersClient.authenticate();case 3:return n=t.sent,t.abrupt("return",n.accessToken);case 7:t.prev=7,t.t0=t.catch(0),e.logout();case 10:case"end":return t.stop()}},t,this,[[0,7]])})),e.populateUserFromJWT=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n&&null!==n&&""!==n){t.next=3;break}return e.setProfile(!1),t.abrupt("return",null);case 3:return t.next=5,e.props.feathersClient.passport.verifyJWT(n);case 5:return a=t.sent,t.next=8,e.props.services.users.get(a.userId);case 8:if(a=t.sent,void 0!==(o=a.value).email&&""!==o.email){t.next=13;break}return e.setProfile(!1),t.abrupt("return",null);case 13:return o.token=window.localStorage.getItem("feathers-jwt"),e.props.redux.actions.user.login(o),e.setProfile(!0),t.abrupt("return",o);case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.populateEscapeRooms=function(){var t=Object(L.a)(N.a.mark(function t(n){var a,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===n||void 0===n){t.next=5;break}return t.next=3,e.props.services["escape-rooms"].find({query:{userId:n}});case 3:(a=t.sent).action.type.includes("FULFILLED")&&(null!==(o=a.value.data)&&void 0!==o&&e.props.redux.actions.escapeRooms.updateEscapeRooms(o),e.setState({loading:!1}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.logout=function(){window.localStorage.removeItem("feathers-jwt"),e.setState({profile:null}),e.props.redux.actions.user.logout(),e.props.history.push("/")},e.state={profile:null,tooltipOpen:!1},e}return Object(W.a)(t,e),Object(U.a)(t,[{key:"componentDidUpdate",value:function(e){e.redux.state.user.email!==this.props.redux.state.user.email&&(this.populateEscapeRooms(this.props.redux.state.user._id),void 0!==this.props.redux.state.user.email?this.setProfile(!0):this.setProfile(!1))}},{key:"componentDidMount",value:function(){window.localStorage.getItem("feathers-jwt")&&void 0!==this.props.redux.state.user.email?this.setProfile(!0):window.localStorage.getItem("feathers-jwt")&&void 0===this.props.redux.state.user.email&&this.authenticate()}},{key:"setProfile",value:function(e){var t;t=e?c.a.createElement("div",{className:"profile"},c.a.createElement(B.a,{to:"/profile"},"Profile"),c.a.createElement(z.a,{onClick:this.logout},"Logout")):null,this.setState({profile:t})}},{key:"render",value:function(){var e=this.state.loading||this.props.redux.state.usersService.isLoading||this.props.redux.state.escapeRoomsService.isLoading,t=this.props.redux.state.modal,n=this.props.redux.actions.modal.hideModal;return c.a.createElement("div",null,c.a.createElement(X.a,{className:"loading-overlay",active:e,spinner:!0},c.a.createElement("header",null,c.a.createElement("h1",{className:"title"},c.a.createElement(B.a,{to:"/"},"Escape Room Generator")),this.state.profile),c.a.createElement("main",null,c.a.createElement(bt,{history:this.props.history,feathersClient:this.props.feathersClient,redux:this.props.redux,services:this.props.services})),c.a.createElement("footer",null,c.a.createElement(B.a,{to:"/about"},"About"),c.a.createElement(B.a,{to:"/tutorials"},"Tutorials"))),c.a.createElement(H.a,{isOpen:t.isOpen},c.a.createElement(G.a,null,t.header),c.a.createElement(V.a,null,t.body),c.a.createElement(Y.a,null,c.a.createElement(z.a,{color:"success",onClick:function(){t.confirm.action(),n()}},t.confirm.text),c.a.createElement(z.a,{color:"danger",onClick:function(){t.cancel.action(),n()}},t.cancel.text))))}}]),t}(i.Component);function gt(e){return{type:"LOGIN",user:e}}function Ot(){return{type:"LOGOUT"}}function yt(e){return{type:"ADD_ESCAPE_ROOM",escapeRoom:e}}function jt(e){return{type:"REMOVE_ESCAPE_ROOM",escapeRoom:e}}function kt(e){return{type:"UPDATE_ESCAPE_ROOM",escapeRoom:e}}function wt(e){return{type:"UPDATE_ESCAPE_ROOMS",escapeRooms:e}}function xt(e){return{type:"SET_SELECTED_ESCAPE_ROOM",escapeRoom:e}}function Rt(e){return{type:"CLEAR_SELECTED_ESCAPE_ROOM",escapeRoom:e}}function Dt(e){return{type:"UPDATE_DETAILS",details:e}}function St(e){return{type:"UPDATE_ACCESSIBILITY",accessibility:e}}function Tt(e,t){return{type:"ADD_COMPONENT",component:e,areaId:t}}function It(e){return{type:"REMOVE_COMPONENT",componentId:e}}function Mt(e){return{type:"UPDATE_COMPONENT",component:e}}function At(e,t,n){return{type:"ADD_RELATIONSHIP",componentId:e,parentId:t,isInput:n}}function _t(e,t,n){return{type:"REMOVE_RELATIONSHIP",componentId:e,parentId:t,isInput:n}}function Pt(e){return{type:"SHOW_MODAL",modal:e}}function Nt(){return{type:"HIDE_MODAL"}}var Lt=Object(m.b)(function(e){return{redux:e}},function(e){return{user:Object(h.bindActionCreators)(a,e),escapeRooms:Object(h.bindActionCreators)(o,e),escapeRoom:Object(h.bindActionCreators)(r,e),modal:Object(h.bindActionCreators)(s,e)}},function(e,t,n){return Object(g.a)({},n,{redux:{state:e.redux,actions:t}})})(Ct),Ut=Object(_.a)(Lt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ft=n(263),Jt=n.n(Ft),Wt=n(264),Bt=n.n(Wt),zt=n(173),Ht=n.n(zt);n.d(t,"feathersClient",function(){return Yt});var Gt={backends:[{backend:Jt.a},{backend:Bt()({enableMouseEvents:!0}),preview:!0,transition:zt.TouchTransition}]},Vt=Ht()(Gt),Yt=I()().configure(I.a.socketio(S()())).configure(I.a.hooks()).configure(I.a.authentication({storage:window.localStorage})),qt=A()(Yt,["users","escape-rooms"]),Xt=function(e,t){var n=window.devToolsExtension?window.devToolsExtension()(h.createStore):h.createStore;return h.applyMiddleware.apply(void 0,Object(d.a)(b))(n)(R(e),t)}(qt,{user:{},escapeRooms:[],escapeRoom:{}}),Kt=Object(M.bindWithDispatch)(Xt.dispatch,qt),$t=c.a.createElement(Ae.DragDropContextProvider,{backend:Vt},c.a.createElement(m.a,{store:Xt},c.a.createElement(u.a,null,c.a.createElement(Ut,{feathersClient:Yt,services:Kt,getServicesStatus:M.getServicesStatus}))));p.a.render($t,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},84:function(e,t,n){}},[[266,2,1]]]);
//# sourceMappingURL=main.7d3835a9.chunk.js.map